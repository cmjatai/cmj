(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5c39afd2","chunk-21f31f61"],{1696:function(e,t,o){"use strict";var n=o("2156");o.n(n).a},"1a3b":function(e,t,o){},2156:function(e,t,o){},3559:function(e,t,o){"use strict";o.r(t);var n=o("5530"),i=o("3bf0"),a={name:"container-td-bi",extends:Object(n.a)({},i.default),data:function(){return{dragleave:null,side:0,showModal:-1,showElemento:null}},methods:{showModalAction:function(e,t){this.showElemento=e,this.showModal=t},ondragend:function(e){var t=this;if(e.id!==this.dragleave.id){var o=Object();o.id=e.id,o.ordem=this.dragleave.ordem,e.ordem>this.dragleave.ordem&&this.side>0?o.ordem++:e.ordem<this.dragleave.ordem&&this.side<0&&o.ordem--,e.ordem!==o.ordem&&(e.ordem=o.ordem,this.updateDocumento(o).then((function(){t.getDocumento(t.elemento.id)})))}},ondragleave:function(e,t){this.dragleave=e,this.side=t},changeImage:function(e){this.getDocumento(this.elemento.id)}}},r=(o("1696"),o("2877")),s=Object(r.a)(a,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:[e.name_component,"container"]},[e._m(0),o("div",{staticClass:"drop-area"},[o("drop-zone",{attrs:{elemento:e.elemento,src:e.slug,multiple:!0,resource:e.documentoResource},on:{change:e.changeImage}})],1),o("div",{staticClass:"inner"},[e.showModal>=0?o("modal-image-list",{attrs:{elementos:e.childsOrdenados,child:e.showElemento,pos:e.showModal,parent:e.elemento},on:{close:function(t){e.showModal=-1}}}):e._e(),e._l(e.childsOrdenados,(function(t,n){return o(e.classChild(t),{key:t.id,tag:"component",attrs:{child:t,parent:e.elemento,pos:n},on:{ondragend:e.ondragend,ondragleave:e.ondragleave,showmodal:e.showModalAction}})}))],2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn-toolbar widgets widget-top"},[t("div",{staticClass:"btn-group btn-group-sm"})])}],!1,null,null,null);t.default=s.exports},7221:function(e,t,o){"use strict";(function(e){var n=o("5530"),i=o("3559");o("2ef0");t.a={name:"tpd-gallery",extends:Object(n.a)({},i.default),data:function(){return{bi_selected:"",bi_object:Object(),bi_list:Array(),has_titulo:!1,has_descricao:!1,has_autor:!1,fullHeight:document.documentElement.clientHeight}},watch:{bi_selected:function(e,t){var o=this;this.documentoResource.getDocumento(e).then((function(e){o.bi_object=e.data,o.success()}))}},computed:{images_from_bi:function(){var t=this.bi_object;if(void 0!==t.ordem)return t=e.orderBy(t.childs,"ordem"),t=e.orderBy(t[0].childs,"ordem")},citaOrdenados:function(){var t=this.elemento.cita;return e.orderBy(t,"ordem")}},mounted:function(){var e=this;e.documentoResource.getDocumentoChoiceList(10,1).then((function(t){e.bi_list=t.data.results})).catch((function(t){e.danger()}))},methods:{handleResize:function(){if(0!==this.elemento.id){var e=document.querySelector(".col-bi-container.row"+this.elemento.id),t=document.querySelector(".row-referencias.row"+this.elemento.id);try{t.style.minHeight=e.clientHeight+"px"}catch(e){return""}}},toogleTitulo:function(e){this.has_titulo=!this.has_titulo},toogleDescricao:function(e){this.has_descricao=!this.has_descricao},toogleAutor:function(e){this.has_autor=!this.has_autor},ondragendtransf:function(e){var t=this,o=this.dragleave;if(this.dragleave=null,900===e.tipo)if(o&&void 0===o.tipo){var n=Object();n.referente=this.elemento.id,n.referenciado=e.id,n.ordem=o.ordem,this.side>0&&n.ordem++;var i=Object();i.cita=Array(),i.cita.push(n),i.id=this.elemento.id,this.updateDocumento(i).then((function(){t.getDocumento(t.elemento.id)}))}else{var a=Object();a.referente=this.elemento.id,a.referenciado=e.id,a.ordem=0;var r=Object();r.cita=Array(),r.cita.push(a),r.id=this.elemento.id,this.updateDocumento(r).then((function(){t.getDocumento(t.elemento.id)}))}},ondragend:function(e){var t=this,o=this.dragleave;if(this.dragleave=null,o&&e.id!==o.id&&!(o.tipo>=0)){var n=Object();if(n.id=e.id,n.ordem=o.ordem,e.ordem>o.ordem&&this.side>0?n.ordem++:e.ordem<o.ordem&&this.side<0&&n.ordem--,e.ordem!==n.ordem){e.ordem=n.ordem;var i=Object();i.cita=Array(),i.cita.push(n),i.id=this.elemento.id,this.updateDocumento(i).then((function(){t.getDocumento(t.elemento.id)}))}}},ondragleave:function(e,t){e.tipo>=0?(this.dragleave=null,this.side=0):(this.dragleave=e,this.side=t)},deleteParte:function(e){var t=this,o=this;o.documentoResource.deleteDocumento(this.elemento.id).then((function(e){o.$parent.getDocumento(t.parent.id),o.success("Elemento excluído com sucesso.")})).catch((function(e){o.danger(e.response.data.detail)}))}}}}).call(this,o("2ef0"))},ed8f:function(e,t,o){"use strict";o.r(t);var n=o("7221").a,i=(o("ff2c"),o("2877")),a=Object(i.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.name_component},[o("div",{staticClass:"btn-toolbar widgets widget-top justify-content-end"},[o("div",{staticClass:"btn-group btn-group-sm"},[e.elemento.titulo?e._e():o("button",{staticClass:"btn btn-success",attrs:{title:"Disponibilizar Título para a Galeria",type:"button"},on:{click:function(t){return t.target!==t.currentTarget?null:e.toogleTitulo(t)}}},[e._v("T")]),e.elemento.descricao?e._e():o("button",{staticClass:"btn btn-success",attrs:{title:"Disponibilizar Descrição para a Galeria",type:"button"},on:{click:function(t){return t.target!==t.currentTarget?null:e.toogleDescricao(t)}}},[e._v("D")]),e.elemento.autor?e._e():o("button",{staticClass:"btn btn-success",attrs:{title:"Disponibilizar Autor para a Galeria",type:"button"},on:{click:function(t){return t.target!==t.currentTarget?null:e.toogleAutor(t)}}},[e._v("A")])]),o("div",{staticClass:"btn-group btn-group-sm"},[o("button",{staticClass:"btn btn-danger",attrs:{title:"Remover esta Galeria",type:"button"},on:{click:function(t){return t.target!==t.currentTarget?null:e.deleteParte(t)}}},[e._v("x")])])]),o("div",{staticClass:"inner"},[e.showModal>=0?o("modal-referencia-image-list",{attrs:{elementos:e.citaOrdenados,child:e.showElemento,pos:e.showModal,parent:e.elemento},on:{close:function(t){e.showModal=-1}}}):e._e(),o("div",{class:["row","row-gallery","row"+e.elemento.id]},[o("div",{class:["col-8","col-bi-container","row"+e.elemento.id]},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[e.has_titulo||e.elemento.titulo?o("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.elemento.titulo,expression:"elemento.titulo",modifiers:{lazy:!0}}],attrs:{placeholder:"Título da Galeria..."},domProps:{value:e.elemento.titulo},on:{change:function(t){return e.$set(e.elemento,"titulo",t.target.value)}}}):e._e(),e.has_descricao||e.elemento.descricao?o("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.elemento.descricao,expression:"elemento.descricao",modifiers:{lazy:!0}}],attrs:{placeholder:"Descrição da Galeria..."},domProps:{value:e.elemento.descricao},on:{change:function(t){return e.$set(e.elemento,"descricao",t.target.value)}}}):e._e(),e.has_autor||e.elemento.autor?o("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.elemento.autor,expression:"elemento.autor",modifiers:{lazy:!0}}],attrs:{placeholder:"Autor da Galeria..."},domProps:{value:e.elemento.autor},on:{change:function(t){return e.$set(e.elemento,"autor",t.target.value)}}}):e._e()]),o("div",{staticClass:"col-12"},[o("div",{staticClass:"row row-bi-select"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.bi_selected,expression:"bi_selected"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.bi_selected=t.target.multiple?o:o[0]}}},[o("option",{attrs:{disabled:"",value:""}},[e._v("Escolha um Banco de Imagem")]),e._l(e.bi_list,(function(t){return o("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.text))])}))],2)]),o("div",{class:["row","row-bi","row"+e.elemento.id]},[e._l(e.images_from_bi,(function(t){return o("tpd-image-td-bi",{key:t.id,attrs:{child:t,parent:e.elemento},on:{ondragend:e.ondragendtransf}})})),o("resize-observer",{on:{notify:e.handleResize}})],2)])])]),o("div",{staticClass:"col-4 col-referencias"},[o("div",{class:["row","row-referencias","row"+e.elemento.id],on:{dragend:e.ondragendtransf}},e._l(e.citaOrdenados,(function(t,n){return o("tpd-referencia",{key:t.id,attrs:{child:t,parent:e.elemento,pos:n},on:{ondragend:e.ondragend,ondragleave:e.ondragleave,showmodal:e.showModalAction}})})),1)])])],1)])}),[],!1,null,null,null);t.default=a.exports},ff2c:function(e,t,o){"use strict";var n=o("1a3b");o.n(n).a}}]);