"use strict";(self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[]).push([[4629],{4629:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sessaoplenaria-module online-module"},[e("router-view"),e("popover-palavra")],1)},o=[],n=i(5353),s=function(){var t=this,e=t._self._c;return t.individuos?e("div",{staticClass:"popover-palavra",on:{touchstart:function(e){t.touching=!0},touchmove:function(e){return t.movePopover(e)},touchend:function(e){t.touching=!1},mouseup:function(e){t.touching=!1},mousemove:function(e){return t.movePopover(e)},mousedown:function(e){t.touching=!0}}},t._l(t.individuos,function(i){return e("div",{key:`popover-individuo-${i.id}`,class:["popover-individuo",i.com_a_palavra?"com_a_palavra":"aparteante"]},[e("div",{staticClass:"popover-header"},[e("div",{staticClass:"arrow"}),i.com_a_palavra?e("h3",{staticClass:"popover-title"},[e("i",{staticClass:"fas fa-expand-alt"}),e("span",[t._v(" Com a palavra ")])]):t._e(),i.aparteado?e("h3",{staticClass:"popover-title"},[t._v("Em aparte")]):t._e()]),e("div",{staticClass:"popover-body"},[i?e("div",{staticClass:"individuo-info"},[e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(i.nome))]),i.cronometro?e("div",{staticClass:"timer mt-1"},[e("cronometro-base",{key:`cronometro-popover-${i.cronometro}`,ref:`cronometro-popover-${i.cronometro}`,refInFor:!0,attrs:{cronometro_id:i.cronometro,css_class_controls:"d-none",css_class:"cron-popover-palavra",display_initial:"remaining",display_format:"mm:ss",display_size:"2em",controls:[]}})],1):t._e()]),t.fotografiaUrl(i)?e("div",{staticClass:"foto me-2",style:{backgroundImage:"url("+t.fotografiaUrl(i)+")"}}):e("div",{staticClass:"foto me-2"},[e("i",{staticClass:"fas fa-user"})])]):t._e()])])}),0):t._e()},r=[],l=(i(4114),i(8111),i(116),i(6176)),c={name:"popover-palavra",components:{CronometroBase:l.A},data(){return{touching:!1,moving:!1}},watch:{wsConnected:{immediate:!0,handler(t){t||this.$nextTick(()=>{this.invalidateCacheModels({app:"painelset",models:["individuo","cronometro"]})})}}},computed:{individuo_com_a_palavra:function(){return this.data_cache?.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(t=>t.com_a_palavra):null},individuo_aparteante:function(){return this.data_cache?.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(t=>t.aparteado):null},individuos:function(){const t=[];return this.individuo_aparteante&&t.push(this.individuo_aparteante),this.individuo_com_a_palavra&&t.push(this.individuo_com_a_palavra),t}},mounted(){this.registerModels({app:"painelset",models:["individuo","cronometro"]})},methods:{...n.Ay.mapActions("store__sync",["invalidateCacheModels"]),fotografiaUrl(t){return t.parlamentar?"/api/parlamentares/parlamentar/"+t.parlamentar+"/fotografia.c96.png":t.fotografia?"/api/painelset/individuo/"+t.id+"/fotografia.c96.png":null},movePopover(t){if(!this.touching)return;const e=this.$el,i=e.getBoundingClientRect();if(t.touches&&t.touches.length>1){t.preventDefault();const i=Math.hypot(t.touches[0].clientX-t.touches[1].clientX,t.touches[0].clientY-t.touches[1].clientY),a=Math.min(Math.max(i/10,10),100);return void(e.style.fontSize=`${a}px`)}const a=t.touches?t.touches[0].clientX:t.clientX,o=t.touches?t.touches[0].clientY:t.clientY,n=window.innerWidth-a-i.width/2,s=window.innerHeight-o-i.height/2,r=Math.max(0,Math.min(n,window.innerWidth-i.width)),l=Math.max(0,Math.min(s,window.innerHeight-i.height));e.style.right=`${r}px`,e.style.bottom=`${l}px`}}},d=c,u=i(1656),p=(0,u.A)(d,s,r,!1,null,null,null),h=p.exports,v=i(2543),m={name:"sessaoplenaria-module",components:{PopoverPalavra:h},data(){return{ws:"/ws/time-refresh/",models_init_cache:{base:["autor"],sessao:["tiposessaoplenaria",{model:"expedientesessao",full_pages:!1,ordering:"-sessao_plenaria"}],materia:["tipomaterialegislativa","statustramitacao"],parlamentares:["legislatura",{model:"sessaolegislativa",full_pages:!1,ordering:"-data_inicio"}]}}},mounted:function(){this.setSideleftVisivel(!0),this.setSiderightVisivel(!1),this.initCache()},methods:{...n.Ay.mapActions(["setSideleftVisivel","setSiderightVisivel"]),fetchList(t=null,e=null,i=null){const a=this;a.utils.getModelOrderedList(e,a.isString(i)?i:i.model,a.isString(i)?"":i.ordering,null===t?1:t).then(t=>{v.each(t.data.results,(t,o)=>{a.refreshState({app:e,model:a.isString(i)?i:i.model,id:t.id,value:t})}),a.$nextTick().then(function(){null!==t.data.pagination.next_page&&(a.isString(i)||i.full_pages)&&a.fetchList(t.data.pagination.next_page,e,i)})})},initCache(){const t=this;v.mapKeys(t.models_init_cache,function(e,i){v.each(e,function(e){t.fetchList(1,i,e)})})}}},f=m,_=(0,u.A)(f,a,o,!1,null,null,null),g=_.exports}}]);