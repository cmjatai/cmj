(function(){"use strict";var e={2992:function(e,a,n){n(4114),n(8111),n(2489),n(116),n(7588),n(3110),n(8335),n(1774);var t=n(4335),i=n(4692),s=n(2543);t.A.defaults.headers.get["Cache-Control"]="no-cache, no-store, must-revalidate",t.A.defaults.headers.get["Pragma"]="no-cache",t.A.defaults.headers.get["Expires"]="0",t.A.defaults.xsrfCookieName="csrftoken",t.A.defaults.xsrfHeaderName="X-CSRFToken",window.AppLOA=function(){let e;if(!(this instanceof window.AppLOA))return e||(e=new window.AppLOA),e;e=this,window.AppLOA=function(){return e},e.LoaCRUD=function(){const a=i(".container-loa");a.hasClass("loa-detail")&&e.LoaCrudDETAIL(a)},e.LoaCrudDETAIL=function(e){},e.EmendaLoaCRUD=function(){const a=i(".container-loa");a.hasClass("emendaloa-update")?e.EmendaLoaCrudUPDATE(a):a.hasClass("emendaloa-create")?e.EmendaLoaCrudCREATE(a):a.hasClass("emendaloa-list")&&e.EmendaLoaCrudLIST(a)},e.isObjectEmpty=function(e){let a=!0;return s.forOwn(e,(e,n)=>{Array.isArray(e)&&e.length>0?a=!1:Array.isArray(e)||["",null,void 0].includes(e)||(a=!1)}),a},e.EmendaLoaCrudLIST=function(a){const n=a.find("form"),t=new FormData(n[0]),r={};for(const[e,i]of t.entries())e in r?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(i)):""!==i&&(r[e]=i);delete r.agrupamento,delete r.tipo_agrupamento,delete r.pdf;const o=function(){const e=new FormData(n[0]),a=e.getAll("parlamentares"),t=e.getAll("fase"),i=e.get("finalidade"),s=e.getAll("tipo");return{parlamentares:a.length>0?a:[],fase:t.length>0?t:[],finalidade:""!==i?[i]:[],tipo:s.length>0?s:[]}};if(e.isObjectEmpty(r))try{const a=localStorage.getItem("portalcmj_emendaloa_filter");if(a){const t=JSON.parse(a);if(!e.isObjectEmpty(t)){s.forOwn(t,(e,a)=>{s.forEach(n.find(`input[name="${a}"]`),a=>{Array.isArray(e)&&e.includes(a.value)||e===a.value?(a.checked=!0,i(`label[for="${a.id}"] span`).addClass("active")):Array.isArray(e)?Array.isArray(e)&&e.length>0&&"text"===a.type&&(a.value=e[0]):a.value=e})});const a=o();e.isObjectEmpty(a)||(window.loadingCMJ("Atualizando listagem..."),n.submit())}}}catch(p){localStorage.removeItem("portalcmj_emendaloa_filter")}else{const e=o();localStorage.setItem("portalcmj_emendaloa_filter",JSON.stringify(e))}let d=function(e){const a=o();localStorage.setItem("portalcmj_emendaloa_filter",JSON.stringify(a)),window.loadingCMJ("Atualizando listagem..."),n.submit()};const l=n.find('select[name="agrupamento"]'),c=n.find('input[type="radio"][name="tipo_agrupamento"]');l.change(e=>{""===e.target.value&&c.filter("[value=sem_registro]").prop("checked",!0)}).change(),c.change(e=>{const a=()=>{l.addClass("bg-yellow"),setTimeout(()=>{l.removeClass("bg-yellow"),setTimeout(()=>{l.addClass("bg-yellow"),setTimeout(()=>{l.removeClass("bg-yellow")},400)},400)},400)};e.target.checked&&"sem_registro"===e.target.value?(l.find('option:not([value="model_unidadeorcamentaria"])').attr("disabled","disabled").addClass("d-none"),l.find('option[value=""]').removeAttr("disabled").removeClass("d-none"),l.val("").change(),a()):e.target.checked?(l.find("option").removeAttr("disabled").removeClass("d-none"),l.find('option[value=""]').removeAttr("disabled").addClass("d-none"),l[0].selectedIndex||(l[0].selectedIndex=2,a())):l.find("option").removeAttr("disabled").removeClass("d-none")}).change(),n.find('#div_id_parlamentares input[type="checkbox"]').change(e=>{d()}),n.find('button[type="button"]').click(e=>{d()}),n.find('input[type="submit"]').click(e=>{window.loadingCMJ("Gerando Listagem em PDF...")}),n.keypress(e=>{if(13===e.keyCode)return e.preventDefault(),!1})},e.EmendaLoaCRUDToggleTipo=function(e){const a=e.find('select[name="tipo"]')[0],n=e.find("#div_id_parl_assinantes"),t=e.find("#div_id_parlamentares__valor"),i=e.find('input[name="valor"]')[0];"0"!==a.value?n.length>0&&(i.setAttribute("readonly","readonly"),n.find("input").prop("disabled",!0),n[0].classList.add("d-none")):t.length>0&&(i.removeAttribute("readonly"),t.find("input").prop("disabled",!0),t[0].classList.add("d-none")),e.find('select[name="tipo"]').change(e=>{const a=e.target;"0"===a.value?(t.find("input").prop("disabled",!0),t[0].classList.add("d-none"),n[0].classList.remove("d-none"),n.find("input").prop("disabled",!1),i.removeAttribute("readonly")):(n.find("input").prop("disabled",!0),n[0].classList.add("d-none"),t[0].classList.remove("d-none"),t.find("input").prop("disabled",!1),i.setAttribute("readonly","readonly"))})},e.EmendaLoaCrudCREATE=function(a){const n=a.find("form");e.EmendaLoaCRUDToggleTipo(n)},e.EmendaLoaCrudUPDATE=async function(a){const n=window.location.href.matchAll(/emendaloa\/(\d+)\//g).next().value[1],r=a.find("form"),o=`/api/loa/emendaloa/${n}`;let d=null;const l=async function(){return t.A.get(`${o}/`).then(e=>{d=e.data})};await l(),e.EmendaLoaCRUDToggleTipo(r);const c=function(){return i(".container-preview").html(`\n        <div class="inner-preview">\n          <a class="w-100" target="_blank" href="${o}/view/">\n            <img src="${o}/view/?page=1&u=${Date.now()}"/>\n          </a>\n        </div>\n        <div class="btn-toolbar justify-content-between">\n          <div class="btn-group btn-group-sm">\n            <label for="id_lineHeight">\n              <span>Entrelinha (%)</span>\n              <input type="number"\n                name="lineHeight" value="${d.metadata.style.lineHeight}"\n                step="5"\n                min="100"\n                max="350"\n                class="numberinput form-control text-center"\n                id="id_lineHeight">\n            </label>\n          </div>\n          <div>\n            <label for="id_espacoAssinatura">\n            <input type="checkbox"\n              ${d.metadata.style.espacoAssinatura?"checked":""}\n              name="espacoAssinatura"\n              class="form-check-input"\n              id="id_espacoAssinatura">\n            <span>Incluir espaço para Assinaturas</span>\n            </label>\n          </div>\n        </div>\n      `)},p=c().find("img")[0];p.onload=function(e){p.style.opacity=1,l()};const u=r.find(".registro-render"),m=function(){u.html(""),i('<div class="inner"></div>').appendTo(u),i('<div class="footer"></div>').appendTo(u)};m();const g=function(e=!1){const a=u.find(".inner"),d=u.find(".footer");t.A.get(`/api/loa/emendaloa/${n}/totais/`).then(e=>{d.html(""),i(`\n            <div class="row">\n              <div class="col-12 totais">\n              TOTAIS:\n              </div>\n              <div class="col">\n                <span class="key">Inserções</span>\n                <span class="value">${e.data.soma_insercoes}</span>\n              </div>\n              <div class="col">\n                <span class="key">Deduções</span>\n                <span class="value">${e.data.soma_deducoes}</span>\n              </div>\n              <div class="col text-${"0,00"===e.data.divergencia_registros?"blue":"red"}">\n                <span class="key">Inserções + Deduções</span>\n                <span class="value">${e.data.divergencia_registros}</span>\n              </div>\n              <div class="col text-${"0,00"===e.data.divergencia_emenda?"blue":"red"}">\n                <span class="key">Emenda - Inserções</span>\n                <span class="value">${e.data.divergencia_emenda}</span>\n              </div>\n            </div>\n            `).appendTo(d)}),t.A.get(`/api/loa/emendaloaregistrocontabil/?emendaloa=${n}&get_all=true`).then(n=>{e&&a.html(""),s.each(n.data,(e,n)=>{if(a.find(`.item-rc[pk="${e.id}"]`).length>0)return;const d=i(`<div class="item-rc" pk="${e.id}"></div>`);d.appendTo(a);let l=e.__str__,c=l.search(/(\d) /g),u=0;while(c>0&&c<15&&u<20)l=l.replace(/^R\$/g,"R$ "),c=l.search(/(\d) /g),u+=1;l=l.split(" - "),l[0]=`<strong>${l[0]}</strong>`,l=l.join(" - "),l=l.replaceAll(" ","&nbsp;"),i(`<span class="texto">${l}</span>`).appendTo(d),i('<span class="btn btn-sm btn-delete text-danger"><i class="far fa-trash-alt"></i></span>').appendTo(d).click(e=>{const n=e.target.closest(".item-rc").getAttribute("pk");t.A.delete(`/api/loa/emendaloaregistrocontabil/${n}/`).then(a=>{r.trigger("change"),e.target.closest(".item-rc").remove(),g(),p.src=`${o}/view/?page=1&u=${Date.now()}`}).catch(e=>{s.isString(e.response)||s.isString(e.response.data)?i(`<div class="alert alert-danger">\n                        ${e.message}\n                        </div>`).appendTo(a):s.forOwn(e.response.data,function(e,n){r.find(`input[name=despesa_${n}], input[name=${n}_despesa]`).addClass("is-invalid"),i(`<div class="alert alert-danger">\n                        ${s.isString(e)?e:e[0]}\n                        </div>`).appendTo(a)})})})})})};g();const f=r.find('input[name="ano_loa"')[0].value,v=r.find(".busca-render"),h=r.find('input[name="busca_despesa"]'),_=r.find("#add_registro"),$=r.find("#clean_form_search");$.click(e=>{_[0].data=null,r.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid")}),_.click(e=>{let a=_[0].data,d={};d.emendaloa=n,d.despesa=a,d.codigo=r.find('input[name="despesa_codigo"]').val(),d.orgao=r.find('input[name="despesa_orgao"]').val(),d.unidade=r.find('input[name="despesa_unidade"]').val(),d.especificacao=r.find('input[name="despesa_especificacao"]').val(),d.natureza=r.find('input[name="despesa_natureza"]').val(),d.fonte=r.find('input[name="despesa_fonte"]').val(),d.valor=r.find('input[name="valor_despesa"]').val(),v.html("");const l=i('<div class="inner"></div>');t.A.post("/api/loa/emendaloaregistrocontabil/create_for_emendaloa_update/",d).then(e=>{_[0].data=null,r.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid"),i('<div class="alert alert-info>Registro de Despesa Adicionado com sucesso.</div>').appendTo(l),g(),p.src=`${o}/view/?page=1&u=${Date.now()}`,r.trigger("change")}).catch(e=>{s.isString(e.response)||s.isString(e.response.data)?i(`<div class="alert alert-danger">\n              ${e.message}\n              </div>`).appendTo(l):s.forOwn(e.response.data,function(e,a){r.find(`input[name=despesa_${a}], input[name=${a}_despesa]`).addClass("is-invalid"),i(`<div class="alert alert-danger">\n              ${s.isString(e)?e:e[0]}\n              </div>`).appendTo(l)})}).finally(()=>{l.appendTo(v)})}),h.keyup(e=>{if(""===e.target.value.trim())return _[0].data=null,r.find('input[name^="despesa_"]').attr("readonly",!1),r.find('input[name^="despesa_"], input[name$="_despesa"]').removeClass("is-invalid"),void v.html("");t.A.get(`/api/loa/despesaconsulta/search/?page_size=10&ano=${f}&q=${e.target.value}`).then(a=>{v.html("");const n=i('<div class="inner"></div>');if(n.appendTo(v),s.isEmpty(a.data.results))_[0].data=null,r.find('input[name^="despesa_"]').attr("readonly",!1),i('<div class="alert alert-warning">\n              Nenhuma despesa encontrada nos anexos da LOA com esta informação. Você pode ainda fazer o registro manualmente no formulário acima.\n            </div>').appendTo(n);else if(a.data.pagination.total_entries>10){let e=`<div class="alert alert-warning">\n              <em>Mostrando 10 primeiros resultados de ${a.data.pagination.total_entries}.<br>Informe mais termos no campo de busca para reduzir os resultados.</em>\n            </div>`;i(e).appendTo(n)}let t=e.target.value.trim().split(" ");s.each(a.data.results,(e,a)=>{let o=`\n                Órgão...: ${e.cod_orgao} - ${e.esp_orgao}<br>\n                Und Orç.: ${e.cod_unidade} - ${e.esp_unidade}<br>\n                Código..: ${e.codigo} - ${e.especificacao}<br>\n                Natureza: ${e.cod_natureza} - ${e.esp_natureza} // Fonte: ${e.cod_fonte}<br>\n                Val.Orç.: ${e.str_valor} | Saldo: ${e.str_saldo}`;s.each(t,(e,a)=>{const n=new RegExp(`(${e})`,"ig");o=o.replace(n,'<strong class="highlight">$1</strong>')});let d=`<div class="small item" pk="${e.id}">\n                ${o}\n              </div>`,l=i(d).appendTo(n);l.click(a=>{r.find('input[name="despesa_codigo"]').val(e.codigo),r.find('input[name="despesa_orgao"]').val(e.cod_orgao),r.find('input[name="despesa_unidade"]').val(e.cod_unidade),r.find('input[name="despesa_especificacao"]').val(e.especificacao),r.find('input[name="despesa_natureza"]').val(e.cod_natureza),r.find('input[name="despesa_fonte"]').val(e.cod_fonte),r.find('input[name^="despesa_"]').attr("readonly",!0);let n=a.currentTarget.getAttribute("pk");_[0].data=n,v.html("")})})}).catch(()=>{})}),r.keypress(e=>{if(13===e.keyCode){if(e.preventDefault(),e.target===h[0]){const e=v.find(".inner"),a=e.children();1===a.length&&a.trigger("click")}return!1}}),r.find('select[name="fase"]').change(e=>{const a=e.target;"10"===a.value?a.classList.add("is-invalid"):a.classList.remove("is-invalid")}),r.change(function(e){let a={},n=e.target.name,i=e.target.value;if(""===n)return;let s="/";p.style.opacity=.35;let d=e.target.getAttribute("parlamentar_id");if(null!==d)a["valor"]=i,a["parlamentar_id"]=d,s="/updatevalorparlamentar/";else{if("lineHeight"===n)return void(p.src=`${o}/view/?page=1&lineHeight=${i}&u=${Date.now()}`);if("espacoAssinatura"===n)return void(p.src=`${o}/view/?page=1&espacoAssinatura=${e.target.checked}&u=${Date.now()}`);"parl_assinantes"===n?(s="/update_parlassinantes/",a["parlamentar_id"]=i,a["checked"]=e.target.checked):"valor"===n?(s="/updatevaloremenda/",a["valor"]=i):a[n]=i}t.A.patch(`${o}${s}`,a).then(e=>{r.find('input[name="lineHeight"]').val(e.data.metadata.style.lineHeight),r.find('input[name="valor"]').val(e.data.valor),"tipo"===n&&window.location.reload(),g(!0),p.src=`${o}/view/?page=1&u=${Date.now()}`}).catch(e=>{window.location.reload()})}),r.trigger("change")},e.AgrupamentoCRUD=function(){const a=i(".container-loa");a.hasClass("agrupamento-update")&&e.AgrupamentoCrudUPDATE(a)},e.AgrupamentoCrudUPDATE=function(e){const a=window.location.href.matchAll(/agrupamento\/(\d+)\//g).next().value[1],n=e.find("form"),r=`/api/loa/agrupamento/${a}`,o=n.find(".registro-render"),d=function(){o.html(""),i('<div class="inner"></div>').appendTo(o),i('<div class="footer"></div>').appendTo(o)};d();const l=function(){const e=o.find(".inner");t.A.get(`/api/loa/agrupamentoregistrocontabil/?agrupamento=${a}&get_all=true`).then(a=>{s.each(a.data,(a,s)=>{if(e.find(`.item-rc[pk="${a.id}"]`).length>0)return;const r=i(`<div class="item-rc" pk="${a.id}"></div>`);r.appendTo(e);let o=a.__str__,d=o.search(/(\d)%/g),c=0;while(d>0&&d<6&&c<10)o=" "+o,d=o.search(/(\d)%/g),c+=1;o=o.split(" - "),o[0]=`<strong>${o[0]}</strong>`,o=o.join(" - "),o=o.replaceAll(" ","&nbsp;"),i(`<span class="texto">${o}</span>`).appendTo(r),i('<span class="btn btn-sm btn-delete text-danger"><i class="far fa-trash-alt"></i></span>').appendTo(r).click(e=>{const a=e.target.closest(".item-rc").getAttribute("pk");t.A.delete(`/api/loa/agrupamentoregistrocontabil/${a}/`).then(a=>{n.trigger("change"),e.target.closest(".item-rc").remove(),l()})})})})};l();const c=n.find('input[name="ano_loa"')[0].value,p=n.find(".busca-render"),u=n.find('input[name="busca_despesa"]'),m=n.find("#add_registro"),g=n.find("#clean_form_search");g.click(e=>{m[0].data=null,n.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid")}),m.click(e=>{let r=m[0].data,o={};o.agrupamento=a,o.despesa=r,o.codigo=n.find('input[name="despesa_codigo"]').val(),o.orgao=n.find('input[name="despesa_orgao"]').val(),o.unidade=n.find('input[name="despesa_unidade"]').val(),o.especificacao=n.find('input[name="despesa_especificacao"]').val(),o.natureza=n.find('input[name="despesa_natureza"]').val(),o.fonte=n.find('input[name="despesa_fonte"]').val(),o.percentual=n.find('input[name="perc_despesa"]').val(),p.html("");const d=i('<div class="inner"></div>');t.A.post("/api/loa/agrupamentoregistrocontabil/create_for_agrupamento_update/",o).then(e=>{m[0].data=null,n.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid"),n.find('input[name="perc_despesa"]').val("100,00"),i('<div class="alert alert-info>Registro de Despesa Adicionado com sucesso.</div>').appendTo(d),l(),n.trigger("change")}).catch(e=>{s.isString(e.response)||s.isString(e.response.data)?i(`<div class="alert alert-danger">\n              ${e.message}\n              </div>`).appendTo(d):s.forOwn(e.response.data,function(e,a){n.find(`input[name=despesa_${a}], input[name=${a}_despesa]`).addClass("is-invalid"),i(`<div class="alert alert-danger">\n              ${s.isString(e)?e:e[0]}\n              </div>`).appendTo(d)})}).finally(()=>{d.appendTo(p)})}),u.keyup(e=>{if(n.find('input[name^="despesa_"], input[name$="_despesa"]').removeClass("is-invalid"),""===e.target.value.trim())return m[0].data=null,n.find('input[name^="despesa_"]').attr("readonly",!1),void p.html("");t.A.get(`/api/loa/despesaconsulta/search/?page_size=5&ano=${c}&q=${e.target.value}`).then(a=>{p.html("");const t=i('<div class="inner"></div>');t.appendTo(p),s.isEmpty(a.data.results)&&(m[0].data=null,n.find('input[name^="despesa_"]').attr("readonly",!1),i('<div class="alert alert-warning">\n              Nenhuma despesa encontrada nos anexos da LOA com esta informação. Você pode ainda fazer o registro manualmente no formulário acima.\n            </div>').appendTo(t));let r=e.target.value.trim().split(" ");s.each(a.data.results,(e,a)=>{let o=`\n                Órgão...: ${e.cod_orgao} - ${e.esp_orgao}<br>\n                Und Orç.: ${e.cod_unidade} - ${e.esp_unidade}<br>\n                Código..: ${e.codigo} - ${e.especificacao}<br>\n                Natureza: ${e.cod_natureza} - ${e.esp_natureza} // Fonte: ${e.cod_fonte}<br>\n                Val.Orç.: ${e.str_valor} | Saldo: ${e.str_saldo}`;s.each(r,(e,a)=>{const n=new RegExp(`(${e})`,"ig");o=o.replace(n,'<strong class="highlight">$1</strong>')});let d=`<div class="small item" pk="${e.id}">\n                ${o}\n              </div>`,l=i(d).appendTo(t);l.click(a=>{n.find('input[name="despesa_codigo"]').val(e.codigo),n.find('input[name="despesa_orgao"]').val(e.cod_orgao),n.find('input[name="despesa_unidade"]').val(e.cod_unidade),n.find('input[name="despesa_especificacao"]').val(e.especificacao),n.find('input[name="despesa_natureza"]').val(e.cod_natureza),n.find('input[name="despesa_fonte"]').val(e.cod_fonte),n.find('input[name^="despesa_"]').attr("readonly",!0);let t=a.currentTarget.getAttribute("pk");m[0].data=t,p.html("")})})}).catch(()=>{})});const f=n.find(".emendaloa-selecteds"),v=n.find(".busca-render-emendaloa"),h=n.find('input[name="busca_emendaloa"]'),_=function(){t.A.get(`/api/loa/agrupamento/${a}/emendas/?&get_all=true`).then(e=>{f.html("");const n=i('<div class="inner"></div>');n.appendTo(f),s.each(e.data,(e,r)=>{const o=i('<div class="inner-item"></div>').appendTo(n);let d=[];0===e.tipo?s.each(e.str_parlamentares,(e,a)=>{e=e.split(" - "),d.push(e[1])}):d=e.str_parlamentares,d=d.join("<br>");let l=`<div class="item-emendaloa" pk="${e.id}">\n                Valor da Emenda ${0!==e.tipo?"Impositiva":"Modificativa"}: <strong>R$ ${e.str_valor}</strong><br>\n                <strong>${e.indicacao}</strong><br>\n                <a href="${e.link_detail_backend}/edit" target="_blank">${e.finalidade}</a><br>\n                <small>${d}</small><br>\n                <span class="fase ${10===e.fase?"bg-danger":12===e.fase?"bg-warning":"bg-green"}">${e.str_fase}</span>\n              </div>`;i(l).appendTo(o);const c=i('<div class="inner-actions"></div>').appendTo(o);i(`<span class="btn btn-delete text-danger" pk="${e.id}" title="Remover Emenda do Agrupamento."><i class="far fa-trash-alt"></i></span>`).appendTo(c).click(e=>{let s=e.currentTarget.getAttribute("pk"),r={};r.agrupamento=a,r.emendaloa=s,t.A.post("/api/loa/agrupamentoemendaloa/delete/",r).then(e=>{_()}).catch(e=>{v.find(".alert").remove(),n.prepend(i(`<div class="alert alert-danger">\n                    ${e.message}\n                    </div>`))})})})})};_(),h.keyup(e=>{if(e.ctrlKey)return;if(""===e.target.value.trim())return void v.html("");if(e.target.value.trim().length<3)return void v.html("Digite ao menos três letras");let n=e.target.value.trim().split(" ").filter(e=>e.length>=3);t.A.get(`/api/loa/emendaloa/search/?&get_all=true&ano=${c}&q=${n.join(" ")}`).then(e=>{v.html("");const r=i('<div class="inner"></div>');r.appendTo(v),s.each(e.data,(e,o)=>{if(f.find(`.item-emendaloa[pk="${e.id}"]`).length>0)return;const d=i('<div class="inner-item"></div>').appendTo(r);let l=[];0===e.tipo?s.each(e.str_parlamentares,(e,a)=>{e=e.split(" - "),l.push(e[1])}):l=e.str_parlamentares,l=l.join("<br>");let c=`<div class="item-emendaloa" pk="${e.id}">\n                Valor da Emenda ${0!==e.tipo?"Impositiva":"Modificativa"}: <strong>R$ ${e.str_valor}</strong><br>\n                <strong>${e.indicacao}</strong><br>\n                <a href="${e.link_detail_backend}/edit" target="_blank">${e.finalidade}</a><br>\n                <small>${l}</small><br>\n                <span class="fase ${10===e.fase?"bg-danger":12===e.fase?"bg-warning":"bg-green"}">${e.str_fase}</span>\n              </div>`;if(s.each(n,(e,a)=>{const n=new RegExp(`(${e})`,"ig");c=c.replace(n,'<strong class="highlight">$1</strong>')}),i(c).appendTo(d),10===e.fase)return;const p=i('<div class="inner-actions"></div>').appendTo(d);i(`<span class="btn text-blue" pk="${e.id}" title="Adicionar Emenda ao Agrupamento."><i class="far fa-arrow-alt-circle-right"></i></i></span>`).appendTo(p).click(e=>{let n=e.currentTarget.getAttribute("pk"),s={};s.agrupamento=a,s.emendaloa=n,s.emendaloa__fase=15,t.A.post("/api/loa/agrupamentoemendaloa/",s).then(e=>{v.find(`.item-emendaloa[pk="${e.data.emendaloa}"]`).parent().remove(),_()}).catch(e=>{v.find(".alert").remove(),r.prepend(i(`<div class="pt-2"><div class="alert alert-danger">\n                    ${e.response.data[0]}\n                    </div></div>`))})})})})}),n.keypress(e=>{if(13===e.keyCode){if(e.preventDefault(),e.target===u[0]){const e=p.find(".inner"),a=e.children();1===a.length&&a.trigger("click")}return!1}}),n.find('select[name="fase"]').change(e=>{const a=e.target;"10"===a.value?a.classList.add("is-invalid"):a.classList.remove("is-invalid")}),n.change(function(e){let a={},n=e.target.name,i=e.target.value,s="/";a[n]=i,t.A.patch(`${r}${s}`,a).then(e=>{l()}).catch(e=>{})}),n.trigger("change")},e.init=function(){e.LoaCRUD(),e.EmendaLoaCRUD(),e.AgrupamentoCRUD()},e.init()},i(document).ready(function(){i(".container-loa").length>0&&window.AppLOA()})}},a={};function n(t){var i=a[t];if(void 0!==i)return i.exports;var s=a[t]={id:t,loaded:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(a,t,i,s){if(!t){var r=1/0;for(c=0;c<e.length;c++){t=e[c][0],i=e[c][1],s=e[c][2];for(var o=!0,d=0;d<t.length;d++)(!1&s||r>=s)&&Object.keys(n.O).every(function(e){return n.O[e](t[d])})?t.splice(d--,1):(o=!1,s<r&&(r=s));if(o){e.splice(c--,1);var l=i();void 0!==l&&(a=l)}}return a}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[t,i,s]}}(),function(){n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,{a:a}),a}}(),function(){n.d=function(e,a){for(var t in a)n.o(a,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={341:0};n.O.j=function(a){return 0===e[a]};var a=function(a,t){var i,s,r=t[0],o=t[1],d=t[2],l=0;if(r.some(function(a){return 0!==e[a]})){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(d)var c=d(n)}for(a&&a(t);l<r.length;l++)s=r[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},t=self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=n.O(void 0,[1603,5914,8023,5386,1774],function(){return n(2992)});t=n.O(t)})();