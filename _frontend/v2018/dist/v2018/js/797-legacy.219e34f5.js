"use strict";(self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[]).push([[797],{797:function(t,e,s){s.r(e),s.d(e,{default:function(){return T}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sessaoplenaria-list"},[e("form-sessao-list",{attrs:{pagination:t.pagination},on:{nextPage:t.nextPage,previousPage:t.previousPage,currentPage:t.currentPage,changeFilter:t.changeFilter}}),e("div",{staticClass:"inner-list"},[t._l(t.sessoes,function(t,s){return e("sessao-plenaria-item-list",{key:s+1,attrs:{sessao:t}})}),0===t.sessoes.length&&t.init?e("div",{staticClass:"empty-list"},[t._v(" Não foram encontradas Sessões Plenárias com seus critérios de busca! ")]):t._e(),t.init?t._e():e("div",{staticClass:"empty-list"},[t._v(" Carregando listagem... ")])],2)],1)},i=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-sessao-list"},[e("year-exists-in-model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"sessaoplenaria",label:"Filtre por Ano"},on:{change:function(e){return t.form_filter.year=e}}}),e("month-select",{staticClass:"form-opacity",on:{change:function(e){return t.form_filter.month=e}}}),e("model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"tiposessaoplenaria",label:"Filtre por Tipo de Sessão",choice:"nome",ordering:"nome"},on:{change:function(e){return t.form_filter.tipo=e}}}),e("pagination",{attrs:{pagination:t.pagination},on:{nextPage:t.nextPage,previousPage:t.previousPage,currentPage:t.currentPage}})],1)},o=[],l=function(){var t=this,e=t._self._c;return e("div",[e("b-form-select",{attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},r=[],c={name:"year-exists-in-model-select",props:["app","model","label"],data:function(){return{selected:null,options:[{value:null,text:this.label}]}},watch:{selected:function(t,e){this.$emit("change",t)}},methods:{fetch:function(){var t=this;this.utils.getYearsChoiceList(this.app,this.model).then(function(e){t.options=e.data,t.options.unshift({value:null,text:t.label})}).catch(function(e){return t.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de anos",time:5})})}},created:function(){this.fetch()}},u=c,h=s(1656),p=(0,h.A)(u,l,r,!1,null,null,null),m=p.exports,f=s(1580),d=function(){var t=this,e=t._self._c;return e("div",[e("b-form-select",{attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},g=[],_={name:"month-select",data:function(){return{selected:null,options:[{value:null,text:"Filtre por mês..."},{value:1,text:"Janeiro"},{value:2,text:"Fevereiro"},{value:3,text:"Março"},{value:4,text:"Abril"},{value:5,text:"Maio"},{value:6,text:"Junho"},{value:7,text:"Julho"},{value:8,text:"Agosto"},{value:9,text:"Setembro"},{value:10,text:"Outubro"},{value:11,text:"Novembro"},{value:12,text:"Dezembro"}]}},watch:{selected:function(t,e){this.$emit("change",t)}}},v=_,x=(0,h.A)(v,d,g,!1,null,null,null),P=x.exports,b=s(2274),S={name:"form-sessao-list",props:["pagination"],components:{YearExistsInModelSelect:m,MonthSelect:P,ModelSelect:b.A,Pagination:f.A},data:function(){return{form_filter:{year:null,month:null,tipo:null}}},watch:{"form_filter.year":function(t){this.$emit("changeFilter",this.form_filter)},"form_filter.month":function(t){this.$emit("changeFilter",this.form_filter)},"form_filter.tipo":function(t){this.$emit("changeFilter",this.form_filter)}},methods:{currentPage:function(t){this.$emit("currentPage",t)},nextPage:function(){this.$emit("nextPage")},previousPage:function(){this.$emit("previousPage")}}},y=S,C=(0,h.A)(y,n,o,!1,null,null,null),L=C.exports,F=function(){var t=this,e=t._self._c;return e("router-link",{class:"sessao-plenaria-item-list",attrs:{to:{name:"sessao_plenaria_online_link",params:{id:t.sessao.id}}}},[e("h3",{staticClass:"tit"},[t._v(" "+t._s(t.titulo)+" ")]),e("div",{staticClass:"subtitulo"},[e("span",[t._v(t._s(t.subtitulo))]),e("span",{staticClass:"separator"},[t._v(" – ")]),e("span",[t._v(t._s(t.date_text))])])])},A=[],M=s(7180),k=(s(8706),s(5353)),$=s(2543),w={name:"sessao-plenaria-item-list",props:["sessao"],data:function(){return{app:["sessao","parlamentares"],model:["sessaoplenaria","sessaolegislativa","tiposessaoplenaria","legislatura"],data_inicio:new Date,sessao_legislativa:{numero:""},tipo:{nome:""},legislatura:{numero:""},metadata:{sessao_legislativa:{app:"parlamentares",model:"sessaolegislativa",id:this.sessao.sessao_legislativa},legislatura:{app:"parlamentares",model:"legislatura",id:this.sessao.legislatura},tipo:{app:"sessao",model:"tiposessaoplenaria",id:this.sessao.tipo}}}},watch:{sessao:function(t){this.updateSessao(),this.fetch()}},computed:(0,M.A)((0,M.A)({},(0,k.aH)({cache:function(t){return t.cache}})),{},{titulo:function(){var t=this.sessao,e=this.tipo,s=this.data_inicio,a="".concat(t.numero,"ª ").concat(e.nome);return 1===e.tipo_numeracao&&(a+=" da ".concat(s.getDate()>15?2:1,"ª Quinzena do mês de ").concat(this.month_text(s.getMonth()))),2===e.tipo_numeracao&&(a+=" do mês de ".concat(this.month_text(s.getMonth()))),e.tipo_numeracao<=10&&(a+=" de ".concat(s.getFullYear())),a},subtitulo:function(){return"".concat(this.sessao_legislativa.numero,"ª Sessão Legislativa da\n              ").concat(this.legislatura.numero,"ª Legislatura")},date_text:function(){return"".concat(this.data_inicio.getDate()," de\n              ").concat(this.month_text(this.data_inicio.getMonth())," de\n              ").concat(this.data_inicio.getFullYear()," – ").concat(this.sessao.hora_inicio)}}),methods:{fetch:function(t){var e=this,s=$.clone(e.metadata);$.mapKeys(s,function(t,a){var i=s[a];e.getObject(i).then(function(t){e[a]=t})})},updateSessao:function(){this.data_inicio=this.stringToDate(this.sessao.data_inicio,"yyyy-mm-dd","-"),this.metadata.sessao_legislativa.id=this.sessao.sessao_legislativa,this.metadata.tipo.id=this.sessao.tipo,this.metadata.legislatura.id=this.sessao.legislatura}},mounted:function(){this.updateSessao(),this.fetch()}},D=w,N=(0,h.A)(D,F,A,!1,null,null,null),Y=N.exports,j={name:"sessao-list",components:{FormSessaoList:L,SessaoPlenariaItemList:Y},data:function(){return{init:!1,app:["sessao"],model:["sessaoplenaria","tiposessaoplenaria"],ordering:"-data_inicio, -hora_inicio, -id",sessoes:[],pagination:{},form_filter:{year:null,month:null,tipo:null}}},methods:{currentPage:function(t){this.fetchSessaoList(t)},nextPage:function(){return null!==this.pagination.next_page?this.fetchSessaoList(this.pagination.next_page):null},previousPage:function(){return null!==this.pagination.previous_page?this.fetchSessaoList(this.pagination.previous_page):null},changeFilter:function(t){this.form_filter=t,this.fetchSessaoList(1)},fetch:function(t){this.fetchSessaoList(1)},fetchSessaoList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;null===t&&(t=e.pagination.page);var s="",a=this.form_filter;return null!==a.year&&(s+="&year=".concat(a.year)),null!==a.month&&(s+="&month=".concat(a.month)),null!==a.tipo&&(s+="&tipo=".concat(a.tipo)),e.utils.getModelOrderedList(e.app[0],e.model[0],e.ordering,null===t?1:t,s).then(function(t){e.init=!0,e.sessoes=[],e.$nextTick().then(function(){e.sessoes=t.data.results,e.pagination=t.data.pagination})}).catch(function(s){if(1!==t)return e.fetchSessaoList(1).catch(function(){e.init=!0,e.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de Sessões.",time:5})})})}},created:function(){var t=this;t.fetchSessaoList(1)}},J=j,O=(0,h.A)(J,a,i,!1,null,null,null),T=O.exports}}]);