"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[231],{3231:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-fluid container-arqtree"},[t("div",{staticClass:"row"},[t("div",{attrs:{id:"col-classes"}},[t("div",{staticClass:"arqtree-inner"},[t("div",{staticClass:"arqtree-titulo"},[t("span",{staticClass:"collapse-all",on:{click:e.clickCollapseAll}},[t("i",{staticClass:"fas fa-chevron-left"}),t("i",{staticClass:"fas fa-chevron-left"})]),t("h1",[e._v("ArqView")])]),t("node-layout",{ref:"noderoot",attrs:{level:0}})],1)]),t("div",{attrs:{id:"col-docs"}},[t("router-view",{key:e.$route.fullPath,ref:"selectednode",on:{checkIsOpenedNodesTree:e.checkIsOpenedNodesTree}})],1)])])},r=[],i=(n(4114),n(3110),n(8335),function(){var e=this,t=e._self._c;return t("div",{class:["node-element",null!==e.node&&0===e.node.count_childs?"type-content":"",null!==e.node&&e.node.id===parseInt(e.nodechild_params)?"active":""]},[e.node?t("div",{class:["node-titulo",`level-${e.level}`]},[t("span",{staticClass:"spacer"}),0!==e.node.count_childs?t("span",{staticClass:"toggle",on:{click:e.clickToggle}},[e.is_opened&&e.childs?e._e():t("i",{staticClass:"fas fa-chevron-right"}),e.is_opened&&e.childs?t("i",{staticClass:"fas fa-chevron-down"}):e._e()]):e._e(),t("span",{staticClass:"content"},[t("router-link",{attrs:{to:{name:"arqchildroute",params:{node:e.node_params,nodechild:e.node.id}}},nativeOn:{click:function(t){return e.clickRoute.apply(null,arguments)}}},[e._v(" "+e._s(e.node.titulo)+" "),e.node.checkcheck?t("i",{staticClass:"fas fa-xs fa-lock text-light-blue",attrs:{title:"ArqClasse Arquivada."}}):e._e()]),t("div",{staticClass:"btn-group btn-group-sm el-actions"},[t("a",{staticClass:"btn btn-link",attrs:{href:`/arqadmin/classe/${e.node.id}`,target:"_blank"}},[t("i",{staticClass:"fas fa-edit"})]),t("a",{staticClass:"btn btn-link",attrs:{href:`/arq/${e.node.id}/${e.node.id}`}},[t("i",{staticClass:"fas fa-expand"})])]),t("small",{staticClass:"box-descricao",domProps:{innerHTML:e._s(e.descricao_html)}})],1)]):e._e(),e._l(e.childs,function(n,s){return t("node-layout",{key:`class-${s}`,attrs:{elemento:n,parent:e.elemento,level:e.level+1}})})],2)}),o=[],a=n(2543),l={name:"node-layout",props:["parent","elemento","level"],data(){return{childs:{},is_opened:!1,node_params:this.$route.params.node,nodechild_params:this.$route.params.nodechild,node:null,node_key_localstorage:"portalcmj_arqnode_tree_opened",click_title:!1,ARQCLASSE_FISICA:100,ARQCLASSE_LOGICA:200}},mounted(){this.reload()},computed:{descricao_html:function(){let e=this.node.descricao;return e=e.replace("\r\n","<br>"),e=e.replace("\n","<br>"),`<strong>${this.node.conta}</strong> - <strong>${this.node.titulo}</strong><br><i>${e}</i>`}},watch:{is_opened:function(e,t){e?(this.fetch(1,`&get_all=True&parent=${this.node.id}`),localStorage.addArrayOfIds(this.node_key_localstorage,this.node.id)):(this.$set(this,"childs",{}),a.isEmpty(this.node)||localStorage.delItemArrayOfIds(this.node_key_localstorage,this.node.id))},$route:function(e,t){const n=this;n.node_params=e.params.node,n.nodechild_params=e.params.nodechild,n.$nextTick().then(function(){n.openIfInArrayOfIds()})}},methods:{clickRoute(){this.clickToggle()},clickToggle(){this.is_opened=!this.is_opened},openIfInArrayOfIds(){a.isEmpty(this.node)||this.is_opened||!localStorage.inArrayOfIds(this.node_key_localstorage,this.node.id)||(this.is_opened=!0,this.fetch(1,`&get_all=True&parent=${this.node.id}`))},reload(){const e=this;e.node=e.elemento||null,"root"===e.node_params&&void 0===e.elemento?e.fetch(1,"&get_all=True&parent__isnull=True"):void 0===this.elemento?e.fetchElemento(e.node_params).then(()=>{e.fetch(1,`&get_all=True&parent=${e.node_params}`).then(()=>{e.clickToggle()})}):e.openIfInArrayOfIds()},fetch(e=1,t=""){const n=this;return n.$set(n,"childs",{}),n.utils.getModelOrderedList("arq","arqclasse","titulo",e,t).then(e=>{a.each(e.data,function(e,t){n.$set(n.childs,e.id,e)})}).catch(e=>n.sendMessage({alert:"danger",message:"Não foi possível recuperar os sub itens...",time:5}))},fetchElemento(e){const t=this;return t.utils.getModel("arq","arqclasse",e).then(e=>(t.node=e.data,e)).catch(e=>t.sendMessage({alert:"danger",message:"Não foi possível recuperar node...",time:5}))}}},c=l,d=n(845),u=(0,d.A)(c,i,o,!1,null,null,null),h=u.exports,f="undefined"!==typeof window?window:null,p=null===f,m=p?void 0:f.document,g="addEventListener",v="removeEventListener",y="getBoundingClientRect",_="_a",S="_b",z="_c",k="horizontal",b=function(){return!1},C=p?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var t=m.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",A=function(e){return"string"===typeof e||e instanceof String},$=function(e){if(A(e)){var t=m.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},O=function(e,t,n){var s=e[t];return void 0!==s?s:n},I=function(e,t,n,s){if(t){if("end"===s)return 0;if("center"===s)return e/2}else if(n){if("start"===s)return 0;if("center"===s)return e/2}return e},E=function(e,t){var n=m.createElement("div");return n.className="gutter gutter-"+t,n},w=function(e,t,n){var s={};return A(t)?s[e]=t:s[e]=C+"("+t+"% - "+n+"px)",s},q=function(e,t){var n;return n={},n[e]=t+"px",n},x=function(e,t){if(void 0===t&&(t={}),p)return{};var n,s,r,i,o,a,l=e;Array.from&&(l=Array.from(l));var c=$(l[0]),d=c.parentNode,u=getComputedStyle?getComputedStyle(d):null,h=u?u.flexDirection:null,C=O(t,"sizes")||l.map(function(){return 100/l.length}),A=O(t,"minSize",100),x=Array.isArray(A)?A:l.map(function(){return A}),T=O(t,"maxSize",1/0),M=Array.isArray(T)?T:l.map(function(){return T}),N=O(t,"expandToMin",!1),L=O(t,"gutterSize",10),U=O(t,"gutterAlign","center"),D=O(t,"snapOffset",30),R=Array.isArray(D)?D:l.map(function(){return D}),j=O(t,"dragInterval",1),F=O(t,"direction",k),B=O(t,"cursor",F===k?"col-resize":"row-resize"),H=O(t,"gutter",E),J=O(t,"elementStyle",w),P=O(t,"gutterStyle",q);function Q(e,t,s,r){var i=J(n,t,s,r);Object.keys(i).forEach(function(t){e.style[t]=i[t]})}function G(e,t,s){var r=P(n,t,s);Object.keys(r).forEach(function(t){e.style[t]=r[t]})}function V(){return a.map(function(e){return e.size})}function W(e){return"touches"in e?e.touches[0][s]:e[s]}function X(e){var t=a[this.a],n=a[this.b],s=t.size+n.size;t.size=e/this.size*s,n.size=s-e/this.size*s,Q(t.element,t.size,this[S],t.i),Q(n.element,n.size,this[z],n.i)}function Y(e){var n,s=a[this.a],r=a[this.b];this.dragging&&(n=W(e)-this.start+(this[S]-this.dragOffset),j>1&&(n=Math.round(n/j)*j),n<=s.minSize+s.snapOffset+this[S]?n=s.minSize+this[S]:n>=this.size-(r.minSize+r.snapOffset+this[z])&&(n=this.size-(r.minSize+this[z])),n>=s.maxSize-s.snapOffset+this[S]?n=s.maxSize+this[S]:n<=this.size-(r.maxSize-r.snapOffset+this[z])&&(n=this.size-(r.maxSize+this[z])),X.call(this,n),O(t,"onDrag",b)(V()))}function K(){var e=a[this.a].element,t=a[this.b].element,s=e[y](),o=t[y]();this.size=s[n]+o[n]+this[S]+this[z],this.start=s[r],this.end=s[i]}function Z(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var n=e[o];return 0===n?null:(n-=F===k?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),n)}function ee(e){var t=Z(d);if(null===t)return e;if(x.reduce(function(e,t){return e+t},0)>t)return e;var n=0,s=[],r=e.map(function(r,i){var o=t*r/100,a=I(L,0===i,i===e.length-1,U),l=x[i]+a;return o<l?(n+=l-o,s.push(0),l):(s.push(o-l),o)});return 0===n?e:r.map(function(e,r){var i=e;if(n>0&&s[r]-n>0){var o=Math.min(n,s[r]-n);n-=o,i=e-o}return i/t*100})}function te(){var e=this,n=a[e.a].element,s=a[e.b].element;e.dragging&&O(t,"onDragEnd",b)(V()),e.dragging=!1,f[v]("mouseup",e.stop),f[v]("touchend",e.stop),f[v]("touchcancel",e.stop),f[v]("mousemove",e.move),f[v]("touchmove",e.move),e.stop=null,e.move=null,n[v]("selectstart",b),n[v]("dragstart",b),s[v]("selectstart",b),s[v]("dragstart",b),n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",s.style.userSelect="",s.style.webkitUserSelect="",s.style.MozUserSelect="",s.style.pointerEvents="",e.gutter.style.cursor="",e.parent.style.cursor="",m.body.style.cursor=""}function ne(e){if(!("button"in e)||0===e.button){var n=this,s=a[n.a].element,r=a[n.b].element;n.dragging||O(t,"onDragStart",b)(V()),e.preventDefault(),n.dragging=!0,n.move=Y.bind(n),n.stop=te.bind(n),f[g]("mouseup",n.stop),f[g]("touchend",n.stop),f[g]("touchcancel",n.stop),f[g]("mousemove",n.move),f[g]("touchmove",n.move),s[g]("selectstart",b),s[g]("dragstart",b),r[g]("selectstart",b),r[g]("dragstart",b),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",n.gutter.style.cursor=B,n.parent.style.cursor=B,m.body.style.cursor=B,K.call(n),n.dragOffset=W(e)-n.end}}F===k?(n="width",s="clientX",r="left",i="right",o="clientWidth"):"vertical"===F&&(n="height",s="clientY",r="top",i="bottom",o="clientHeight"),C=ee(C);var se=[];function re(e){var t=e.i===se.length,n=t?se[e.i-1]:se[e.i];K.call(n);var s=t?n.size-e.minSize-n[z]:e.minSize+n[S];X.call(n,s)}function ie(e){var t=ee(e);t.forEach(function(e,n){if(n>0){var s=se[n-1],r=a[s.a],i=a[s.b];r.size=t[n-1],i.size=e,Q(r.element,r.size,s[S],r.i),Q(i.element,i.size,s[z],i.i)}})}function oe(e,t){se.forEach(function(s){if(!0!==t?s.parent.removeChild(s.gutter):(s.gutter[v]("mousedown",s[_]),s.gutter[v]("touchstart",s[_])),!0!==e){var r=J(n,s.a.size,s[S]);Object.keys(r).forEach(function(e){a[s.a].element.style[e]="",a[s.b].element.style[e]=""})}})}return a=l.map(function(e,t){var n,s={element:$(e),size:C[t],minSize:x[t],maxSize:M[t],snapOffset:R[t],i:t};if(t>0&&(n={a:t-1,b:t,dragging:!1,direction:F,parent:d},n[S]=I(L,t-1===0,!1,U),n[z]=I(L,!1,t===l.length-1,U),"row-reverse"===h||"column-reverse"===h)){var r=n.a;n.a=n.b,n.b=r}if(t>0){var i=H(t,F,s.element);G(i,L,t),n[_]=ne.bind(n),i[g]("mousedown",n[_]),i[g]("touchstart",n[_]),d.insertBefore(i,s.element),n.gutter=i}return Q(s.element,s.size,I(L,0===t,t===l.length-1,U),t),t>0&&se.push(n),s}),a.forEach(function(e){var t=e.element[y]()[n];t<e.minSize&&(N?re(e):e.minSize=t)}),{setSizes:ie,getSizes:V,collapse:function(e){re(a[e])},destroy:oe,parent:d,pairs:se}},T=x,M=n(2543),N={name:"admin-layout",components:{NodeLayout:h},data(){return{node_key_localstorage:"portalcmj_arqnode_tree_opened",check_opened:0}},watch:{$route:function(e,t){"arqchildroute"===e.name&&e.params.node!==t.params.node&&(this.$refs.noderoot.node_params=e.params.node,this.$refs.noderoot.nodechild_params=e.params.nodechild,this.$refs.noderoot.reload())}},methods:{checkIsOpenedNodesTree(){this.check_opened+=1},clickCollapseAll(){if(this.$refs.noderoot.is_opened)localStorage.clearArrayOfIds(this.node_key_localstorage),this.$refs.noderoot.is_opened=!1;else{const e=this.$refs.noderoot.node;let t="";t=null!==e&&null!==e.parent?e.parent:"root";let n=this.$refs.selectednode;if(M.isEmpty(n)||M.isEmpty(n.classe)||null==n.classe.parent)if(!M.isEmpty(e)&&e.id!==t||void 0!==this.$route.params.nodechild){let e="arqadminroute",n={node:t};"root"!==t&&(n["nodechild"]=t,e="arqchildroute"),this.$router.push({name:e,params:n})}else localStorage.clearArrayOfIds(this.node_key_localstorage),this.$refs.noderoot.reload(),this.sendMessage({alert:"danger",message:"Topo atingido!",time:2});else{let e="arqchildroute",s={node:t,nodechild:n.classe.parent};localStorage.delItemArrayOfIds(this.node_key_localstorage,n.classe.parent),this.$router.push({name:e,params:s})}}}},mounted(){let e=localStorage.getItem("split-sizes");e?(e=JSON.parse(e),e[0]+e[1]>100&&(e=[35,65])):e=[35,65],T(["#col-classes","#col-docs"],{minSize:350,sizes:e,onDragEnd:function(e){localStorage.setItem("split-sizes",JSON.stringify(e))}})}},L=N,U=(0,d.A)(L,s,r,!1,null,null,null),D=U.exports}}]);
//# sourceMappingURL=231.42d6770d.js.map