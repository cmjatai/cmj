"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[797],{20797:function(e,t,a){a.r(t),a.d(t,{default:function(){return J}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sessaoplenaria-list"},[t("form-sessao-list",{attrs:{pagination:e.pagination},on:{nextPage:e.nextPage,previousPage:e.previousPage,currentPage:e.currentPage,changeFilter:e.changeFilter}}),t("div",{staticClass:"inner-list"},[e._l(e.sessoes,function(e,a){return t("sessao-plenaria-item-list",{key:a+1,attrs:{sessao:e}})}),0===e.sessoes.length&&e.init?t("div",{staticClass:"empty-list"},[e._v(" Não foram encontradas Sessões Plenárias com seus critérios de busca! ")]):e._e(),e.init?e._e():t("div",{staticClass:"empty-list"},[e._v(" Carregando listagem... ")])],2)],1)},i=[],n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-sessao-list"},[t("year-exists-in-model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"sessaoplenaria",label:"Filtre por Ano"},on:{change:function(t){return e.form_filter.year=t}}}),t("month-select",{staticClass:"form-opacity",on:{change:function(t){return e.form_filter.month=t}}}),t("model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"tiposessaoplenaria",label:"Filtre por Tipo de Sessão",choice:"nome",ordering:"nome"},on:{change:function(t){return e.form_filter.tipo=t}}}),t("pagination",{attrs:{pagination:e.pagination},on:{nextPage:e.nextPage,previousPage:e.previousPage,currentPage:e.currentPage}})],1)},o=[],l=function(){var e=this,t=e._self._c;return t("div",[t("b-form-select",{attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},r=[],c={name:"year-exists-in-model-select",props:["app","model","label"],data:function(){return{selected:null,options:[{value:null,text:this.label}]}},watch:{selected:function(e,t){this.$emit("change",e)}},methods:{fetch:function(){var e=this;this.utils.getYearsChoiceList(this.app,this.model).then(function(t){e.options=t.data,e.options.unshift({value:null,text:e.label})}).catch(function(t){return e.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de anos",time:5})})}},created:function(){this.fetch()}},u=c,p=a(81656),h=(0,p.A)(u,l,r,!1,null,null,null),d=h.exports,f=a(41580),g=function(){var e=this,t=e._self._c;return t("div",[t("b-form-select",{attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},m=[],v={name:"month-select",data:function(){return{selected:null,options:[{value:null,text:"Filtre por mês..."},{value:1,text:"Janeiro"},{value:2,text:"Fevereiro"},{value:3,text:"Março"},{value:4,text:"Abril"},{value:5,text:"Maio"},{value:6,text:"Junho"},{value:7,text:"Julho"},{value:8,text:"Agosto"},{value:9,text:"Setembro"},{value:10,text:"Outubro"},{value:11,text:"Novembro"},{value:12,text:"Dezembro"}]}},watch:{selected:function(e,t){this.$emit("change",e)}}},_=v,x=(0,p.A)(_,g,m,!1,null,null,null),P=x.exports,b=a(92274),y={name:"form-sessao-list",props:["pagination"],components:{YearExistsInModelSelect:d,MonthSelect:P,ModelSelect:b.A,Pagination:f.A},data:function(){return{form_filter:{year:null,month:null,tipo:null}}},watch:{"form_filter.year":function(e){this.$emit("changeFilter",this.form_filter)},"form_filter.month":function(e){this.$emit("changeFilter",this.form_filter)},"form_filter.tipo":function(e){this.$emit("changeFilter",this.form_filter)}},methods:{currentPage:function(e){this.$emit("currentPage",e)},nextPage:function(){this.$emit("nextPage")},previousPage:function(){this.$emit("previousPage")}}},S=y,C=(0,p.A)(S,n,o,!1,null,null,null),M=C.exports,A=function(){var e=this,t=e._self._c;return t("router-link",{class:"sessao-plenaria-item-list",attrs:{to:{name:"sessao_plenaria_online_link",params:{id:e.sessao.id}}}},[t("h3",{staticClass:"tit"},[e._v(" "+e._s(e.titulo)+" ")]),t("div",{staticClass:"subtitulo"},[t("span",[e._v(e._s(e.subtitulo))]),t("span",{staticClass:"separator"},[e._v(" – ")]),t("span",[e._v(e._s(e.date_text))])])])},L=[],k=a(7180),w=(a(28706),a(95353)),F=a(2543),$={name:"sessao-plenaria-item-list",props:["sessao"],data:function(){return{app:["sessao","parlamentares"],model:["sessaoplenaria","sessaolegislativa","tiposessaoplenaria","legislatura"],data_inicio:new Date,sessao_legislativa:{numero:""},tipo:{nome:""},legislatura:{numero:""},metadata:{sessao_legislativa:{app:"parlamentares",model:"sessaolegislativa",id:this.sessao.sessao_legislativa},legislatura:{app:"parlamentares",model:"legislatura",id:this.sessao.legislatura},tipo:{app:"sessao",model:"tiposessaoplenaria",id:this.sessao.tipo}}}},watch:{sessao:function(e){this.updateSessao(),this.fetch()}},computed:(0,k.A)((0,k.A)({},(0,w.aH)({cache:function(e){return e.cache}})),{},{titulo:function(){var e=this.sessao,t=this.tipo,a=this.data_inicio,s="".concat(e.numero,"ª ").concat(t.nome);return 1===t.tipo_numeracao&&(s+=" da ".concat(a.getDate()>15?2:1,"ª Quinzena do mês de ").concat(this.month_text(a.getMonth()))),2===t.tipo_numeracao&&(s+=" do mês de ".concat(this.month_text(a.getMonth()))),t.tipo_numeracao<=10&&(s+=" de ".concat(a.getFullYear())),s},subtitulo:function(){return"".concat(this.sessao_legislativa.numero,"ª Sessão Legislativa da\n              ").concat(this.legislatura.numero,"ª Legislatura")},date_text:function(){return"".concat(this.data_inicio.getDate()," de\n              ").concat(this.month_text(this.data_inicio.getMonth())," de\n              ").concat(this.data_inicio.getFullYear()," – ").concat(this.sessao.hora_inicio)}}),methods:{fetch:function(e){var t=this,a=F.clone(t.metadata);F.mapKeys(a,function(e,s){var i=a[s];t.getObject(i).then(function(e){t[s]=e})})},updateSessao:function(){this.data_inicio=this.stringToDate(this.sessao.data_inicio,"yyyy-mm-dd","-"),this.metadata.sessao_legislativa.id=this.sessao.sessao_legislativa,this.metadata.tipo.id=this.sessao.tipo,this.metadata.legislatura.id=this.sessao.legislatura}},mounted:function(){this.updateSessao(),this.fetch()}},q=$,D=(0,p.A)(q,A,L,!1,null,null,null),N=D.exports,O={name:"sessao-list",components:{FormSessaoList:M,SessaoPlenariaItemList:N},data:function(){return{init:!1,app:["sessao"],model:["sessaoplenaria","tiposessaoplenaria"],ordering:"-data_inicio, -hora_inicio, -id",sessoes:[],pagination:{},form_filter:{year:null,month:null,tipo:null}}},methods:{currentPage:function(e){this.fetchSessaoList(e)},nextPage:function(){return null!==this.pagination.next_page?this.fetchSessaoList(this.pagination.next_page):null},previousPage:function(){return null!==this.pagination.previous_page?this.fetchSessaoList(this.pagination.previous_page):null},changeFilter:function(e){this.form_filter=e,this.fetchSessaoList(1)},fetch:function(e){this.fetchSessaoList(1)},fetchSessaoList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;null===e&&(e=t.pagination.page);var a="",s=this.form_filter;return null!==s.year&&(a+="&year=".concat(s.year)),null!==s.month&&(a+="&month=".concat(s.month)),null!==s.tipo&&(a+="&tipo=".concat(s.tipo)),t.utils.getModelOrderedList(t.app[0],t.model[0],t.ordering,null===e?1:e,a).then(function(e){t.init=!0,t.sessoes=[],t.$nextTick().then(function(){t.sessoes=e.data.results,t.pagination=e.data.pagination})}).catch(function(a){if(1!==e)return t.fetchSessaoList(1).catch(function(){t.init=!0,t.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de Sessões.",time:5})})})}},created:function(){var e=this;e.fetchSessaoList(1)}},Y=O,z=(0,p.A)(Y,s,i,!1,null,null,null),J=z.exports},41580:function(e,t,a){a.d(t,{A:function(){return c}});var s=function(){var e=this,t=e._self._c;return 0!==e.pagination.total_entries?t("div",{staticClass:"widget-pagination d-flex justify-content-between align-items-center"},[t("span",{class:["arrow",null!==e.pagination.previous_page?"hover-circle":"disabled"],on:{click:e.previousPage}},[t("i",{staticClass:"fas fa-chevron-left"})]),t("div",{staticClass:"pages"},[e._v(" "+e._s(e.pagination.start_index)+"–"+e._s(e.pagination.end_index)+" de "+e._s(e.pagination.total_entries)+" "),t("div",{staticClass:"inner"},[t("b-pagination",{attrs:{align:"right","total-rows":e.pagination.total_entries,"per-page":18},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),t("span",{class:["arrow",null!==e.pagination.next_page?"hover-circle":"disabled"],on:{click:e.nextPage}},[t("i",{staticClass:"fas fa-chevron-right"})])]):e._e()},i=[],n={name:"pagination",props:["pagination"],data:function(){return{currentPage:this.pagination.page}},watch:{currentPage:function(e,t){e!==t&&this.$emit("currentPage",e)},pagination:function(e){this.currentPage=e.page}},methods:{nextPage:function(){null!==this.pagination.next_page&&this.$emit("nextPage")},previousPage:function(){null!==this.pagination.previous_page&&this.$emit("previousPage")}}},o=n,l=a(81656),r=(0,l.A)(o,s,i,!1,null,null,null),c=r.exports},92274:function(e,t,a){a.d(t,{A:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",[t("b-form-select",{attrs:{options:e.options,"select-size":e.height},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},i=[],n=(a(44114),a(2543)),o={name:"model-select",props:["value","app","model","label","limit","ordering","choice","height","extra_query","required"],data:function(){return{selected:this.value,options:[]}},watch:{selected:function(e,t){this.$emit("change",e)},value:function(e,t){this.selected=e}},methods:{fetch:function(e){this.fetchModel()},fetchModel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;1===e&&(t.height&&1!==this.height?t.options=[]:void 0!==t.required&&t.required||(t.selected=t.value?t.value:null,t.options=[{value:t.selected,text:this.label?this.label:"---------------"}]));var a=t.isString(t.extra_query)?t.extra_query:"";t.utils.getModelOrderedList(t.app,t.model,t.ordering,e,a).then(function(e){n.each(e.data.results,function(e,a){t.options.push({value:e,text:e[t.choice]}),t.refreshState({app:t.app,model:t.model,value:e,id:e.id})}),null!==e.data.pagination.next_page&&t.fetchModel(e.data.pagination.next_page)}).catch(function(e){return t.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})})}},created:function(){this.fetchModel()}},l=o,r=a(81656),c=(0,r.A)(l,s,i,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=797-legacy.da2f3b5c.js.map