"use strict";(self["webpackChunkPortalCMJ_Frontend_v2018"]=self["webpackChunkPortalCMJ_Frontend_v2018"]||[]).push([[583],{61701:function(e,t,a){var s=a(46518),n=a(69565),i=a(79306),o=a(28551),r=a(1767),l=a(19462),c=a(96319),u=a(9539),d=a(30684),p=a(84549),f=a(96395),v=!f&&!d("map",function(){}),h=!f&&!v&&p("map",TypeError),_=f||v||h,m=l(function(){var e=this.iterator,t=o(n(this.next,e)),a=this.done=!!t.done;if(!a)return c(e,this.mapper,[t.value,this.counter++],!0)});s({target:"Iterator",proto:!0,real:!0,forced:_},{map:function(e){o(this);try{i(e)}catch(t){u(this,"throw",t)}return h?n(h,this,e):new m(r(this),{mapper:e})}})},62010:function(e,t,a){var s=a(43724),n=a(10350).EXISTS,i=a(79504),o=a(62106),r=Function.prototype,l=i(r.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=i(c.exec),d="name";s&&!n&&o(r,d,{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(e){return""}}})},62062:function(e,t,a){var s=a(46518),n=a(59213).map,i=a(70597),o=i("map");s({target:"Array",proto:!0,forced:!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},76583:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});a(52675),a(89463),a(28706),a(2008),a(62062),a(62010),a(18111),a(61701),a(26099);var s=function(){var e=this,t=e._self._c;return t("div",{class:["row","painelset-evento-list-item",{"evento-finalizado":e.evento&&e.evento.end_real}]},[t("div",{staticClass:"col"},[t("h3",{staticClass:"text-blue"},[e._v(e._s(e.evento.name))]),t("strong",[e.evento.start_real?t("span",[e._v("Iniciado em: "+e._s(e.start_real()))]):t("span",[e._v("Data e Hora Prevista: "+e._s(e.start_previsto()))]),t("span",[e._v("  |  Duração Estimada: "+e._s(e.evento.duration))]),e.evento.end_real?t("span",[t("br"),e._v("Finalizado em: "+e._s(e.end_real()))]):e._e()]),t("br"),e.evento.description?t("span",[e._v(" "+e._s(e.evento.description)+" ")]):e._e()]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"btn-group"},[e.has_perm&&e.evento.start_real&&!e.evento.end_real?t("a",{staticClass:"btn btn-danger",attrs:{href:"#",title:"Encerrar Evento"},on:{click:function(t){return t.preventDefault(),e.finish(t)}}},[t("i",{staticClass:"fas fa-stop-circle"})]):e._e(),e.has_perm&&!e.evento.end_real?t("a",{staticClass:"btn btn-secondary",attrs:{href:"#",title:"Editar Evento"},on:{click:function(t){return t.preventDefault(),e.edit(t)}}},[t("i",{staticClass:"fas fa-edit"})]):e._e(),e.has_perm&&e.evento.end_real?t("a",{staticClass:"btn btn-success",attrs:{href:"#",title:"Duplicar Evento"},on:{click:function(t){return t.preventDefault(),e.copy(t)}}},[t("i",{staticClass:"fas fa-copy"})]):e._e(),e.has_perm&&!e.evento.end_real?t("a",{staticClass:"btn btn-primary",attrs:{href:"#",title:"Execução do Evento"},on:{click:function(t){return t.preventDefault(),e.admin(t)}}},[t("i",{staticClass:"fas fa-toolbox"})]):e._e()])]),t("div",{staticClass:"col-12 mt-2"},[t("div",{staticClass:"paineis pt-2"},[t("strong",[e._v("Painéis:")]),t("i",{staticClass:"fas fa-info-circle",attrs:{title:"Clique no nome do painel para abrir em uma nova aba."}}),e.has_perm&&!e.evento.end_real?t("div",{staticClass:"btn-group btn-group-sm d-inline-flex pl-1 mb-n2"},[t("a",{staticClass:"btn btn-info",attrs:{href:"/api/painelset/evento/".concat(e.evento.id,"/export.yaml?t=").concat(Date.now()),title:"Exportar Paineis do Evento em YAML"}},[t("i",{staticClass:"fas fa-file-download"})]),t("button",{staticClass:"btn btn-warning",attrs:{title:"Resetar Paineis para Padrão"},on:{click:function(t){return t.preventDefault(),e.resetToDefaults(t)}}},[t("i",{staticClass:"fas fa-undo-alt"})]),t("button",{staticClass:"btn btn-primary",attrs:{title:"Adicionar novo painel ao evento"},on:{click:function(t){return e.createPainel(t)}}},[t("i",{staticClass:"fas fa-plus-circle"})])]):e._e(),t("ul",e._l(e.paineis,function(a){var s,n;return t("li",{key:"painel-".concat(a.id),staticClass:"py-2"},[t("div",{staticClass:"d-flex w-100 align-items-center"},[t("a",{attrs:{href:"/painelset/painel/".concat(a.id),target:"_blank"}},[e._v(" "+e._s(a.name)+" "),a.principal?t("small",{attrs:{title:"Painel Principal"}},[t("i",{staticClass:"fas fa-star"})]):e._e()]),t("br"),e.has_perm?t("button",{staticClass:"btn btn-link mr-2 text-danger",attrs:{title:"Remover Painel do Evento"},on:{click:function(t){return e.deletePainel(a.id)}}},[t("i",{staticClass:"fas fa-minus-circle"})]):e._e()]),t("div",{staticClass:"sessao_list"},[t("span",{staticClass:"text-nowrap"},[e._v("   - Sessão Vinculada: ")]),e.sessao_cache[a.id]?t("a",{attrs:{href:"".concat(null===(s=e.sessao_cache[a.id])||void 0===s?void 0:s.link_detail_backend),target:"_blank"}},[t("i",{staticClass:"fas fa-external-link-alt"}),e.has_perm?e._e():t("span",[e._v(" "+e._s(null===(n=e.sessao_cache[a.id])||void 0===n?void 0:n.__str__))])]):e._e(),e.has_perm?t("div",{staticClass:"d-inline-block"},[e.evento.end_real?e._e():t("select",{directives:[{name:"model",rawName:"v-model",value:a.sessao,expression:"painel.sessao"}],staticClass:"form-control form-control-sm",attrs:{id:"painel-sessao",name:"sessao_plenaria"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(a,"sessao",t.target.multiple?s:s[0])},function(t){e.utils.patchModel("painelset","painel",a.id,{sessao:a.sessao}).then(function(){e.refresh()})}]}},[t("option",{domProps:{value:null}},[e._v("-- Nenhuma --")]),e._l(e.sessaoList,function(a){return t("option",{key:"sessao-option-".concat(a.id),domProps:{value:a.id}},[e._v(" "+e._s(a.__str__)+" ("+e._s(a.data_inicio)+" - "+e._s(a.data_fim||"")+") ")])})],2)]):e._e()])])}),0)])])])},n=[],i=(a(74423),a(44114),a(7588),a(27495),a(21699),a(25440),a(23500),a(2543)),o={name:"painelset-evento-list-item",props:{evento:{type:Object,required:!0}},data:function(){return{sessao_cache:{},paineis:{}}},computed:{sessaoList:function(){var e;return i.orderBy((null===(e=this.data_cache)||void 0===e?void 0:e.sessao_sessaoplenaria)||[],["data_inicio"],["desc"])},has_perm:function(){return this.permissions.includes("painelset.change_evento")}},mounted:function(){var e=this;e.refresh()},methods:{refresh:function(){var e=this,t=this;t.utils.fetch({app:"painelset",model:"painel",query_string:"evento=".concat(t.evento.id)}).then(function(a){t.paineis=a.data.results,a.data.results.forEach(function(a){null!=a.sessao&&e.utils.fetch({app:"sessao",model:"sessaoplenaria",id:a.sessao}).then(function(e){t.$set(t.sessao_cache,a.id,e.data)})})})},admin:function(){this.evento&&this.$router.push({name:"painelset_admin_link",params:{id:this.evento.id}})},edit:function(){this.evento&&window.open(this.evento.link_detail_backend,"_blank")},copy:function(){var e=this;this.evento&&this.fetchSync({app:"painelset",model:"evento",id:this.evento.id,action:"copy",method:"PATCH"}).then(function(){e.sendMessage({alert:"success",message:"Evento copiado com sucesso.",time:5})}).catch(function(){e.sendMessage({alert:"danger",message:"Erro ao copiar evento. Verifique se o evento já foi finalizado.",time:10})})},createPainel:function(){var e=this;this.evento&&this.utils.postModel("painelset","painel",{name:"Painel do evento ".concat(this.evento.name),description:"Painel criado automaticamente para o evento ".concat(this.evento.name),evento:this.evento.id}).then(function(){e.refresh(),e.sendMessage({alert:"success",message:"Painel criado com sucesso.",time:5})}).catch(function(){e.sendMessage({alert:"danger",message:"Erro ao criar painel. Verifique se o evento já foi finalizado.",time:10})})},deletePainel:function(e){var t=this;e&&this.utils.deleteModel("painelset","painel",e).then(function(){t.refresh(),t.sendMessage({alert:"success",message:"Painel deletado com sucesso.",time:5})}).catch(function(){t.sendMessage({alert:"danger",message:"Erro ao deletar painel. Verifique se o evento já foi finalizado.",time:10})})},finish:function(){this.evento&&this.fetchSync({app:"painelset",model:"evento",id:this.evento.id,action:"finish",method:"PATCH"})},resetToDefaults:function(){var e=this;this.evento&&this.utils.patchModelAction("painelset","evento",this.evento.id,"reset_to_defaults").then(function(){e.refresh(),e.sendMessage({alert:"success",message:"Paineis resetados para configuração padrão com sucesso.",time:5})}).catch(function(){e.sendMessage({alert:"danger",message:"Erro ao resetar paineis para configuração padrão.",time:10})})},start_real:function(){return this.evento.start_real?this.evento.start_real.replace("T"," ").substring(0,19):""},start_previsto:function(){return this.evento.start_previsto?this.evento.start_previsto.replace("T"," ").substring(0,19):""},end_real:function(){return this.evento.end_real?this.evento.end_real.replace("T"," ").substring(0,19):""}}},r=o,l=a(81656),c=(0,l.A)(r,s,n,!1,null,null,null),u=c.exports}}]);