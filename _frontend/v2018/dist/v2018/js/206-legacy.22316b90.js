"use strict";(self["webpackChunkPortalCMJ_Frontend_v2018"]=self["webpackChunkPortalCMJ_Frontend_v2018"]||[]).push([[206],{62010:function(e,t,n){var r=n(43724),s=n(10350).EXISTS,o=n(79504),i=n(62106),a=Function.prototype,l=o(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(c.exec),u="name";r&&!s&&i(a,u,{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(e){return""}}})},67206:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-fluid container-arqtree"},[t("div",{staticClass:"row"},[t("div",{attrs:{id:"col-classes"}},[t("div",{staticClass:"arqtree-inner"},[t("div",{staticClass:"arqtree-titulo"},[t("span",{staticClass:"collapse-all",on:{click:e.clickCollapseAll}},[t("i",{staticClass:"fas fa-chevron-left"}),t("i",{staticClass:"fas fa-chevron-left"})]),t("h1",[e._v("ArqView")])]),t("node-layout",{ref:"noderoot",attrs:{level:0}})],1)]),t("div",{attrs:{id:"col-docs"}},[t("router-view",{key:e.$route.fullPath,ref:"selectednode",on:{checkIsOpenedNodesTree:e.checkIsOpenedNodesTree}})],1)])])},s=[],o=(n(44114),n(62010),n(33110),n(79432),n(58335),n(28706),function(){var e=this,t=e._self._c;return t("div",{class:["node-element",null!==e.node&&0===e.node.count_childs?"type-content":"",null!==e.node&&e.node.id===parseInt(e.nodechild_params)?"active":""]},[e.node?t("div",{class:["node-titulo","level-".concat(e.level)]},[t("span",{staticClass:"spacer"}),0!==e.node.count_childs?t("span",{staticClass:"toggle",on:{click:e.clickToggle}},[e.is_opened&&e.childs?e._e():t("i",{staticClass:"fas fa-chevron-right"}),e.is_opened&&e.childs?t("i",{staticClass:"fas fa-chevron-down"}):e._e()]):e._e(),t("span",{staticClass:"content"},[t("router-link",{attrs:{to:{name:"arqchildroute",params:{node:e.node_params,nodechild:e.node.id}}},nativeOn:{click:function(t){return e.clickRoute.apply(null,arguments)}}},[e._v(" "+e._s(e.node.titulo)+" "),e.node.checkcheck?t("i",{staticClass:"fas fa-xs fa-lock text-light-blue",attrs:{title:"ArqClasse Arquivada."}}):e._e()]),t("div",{staticClass:"btn-group btn-group-sm el-actions"},[t("a",{staticClass:"btn btn-link",attrs:{href:"/arqadmin/classe/".concat(e.node.id),target:"_blank"}},[t("i",{staticClass:"fas fa-edit"})]),t("a",{staticClass:"btn btn-link",attrs:{href:"/arq/".concat(e.node.id,"/").concat(e.node.id)}},[t("i",{staticClass:"fas fa-expand"})])]),t("small",{staticClass:"box-descricao",domProps:{innerHTML:e._s(e.descricao_html)}})],1)]):e._e(),e._l(e.childs,function(n,r){return t("node-layout",{key:"class-".concat(r),attrs:{elemento:n,parent:e.elemento,level:e.level+1}})})],2)}),i=[],a=(n(27495),n(25440),n(2543)),l={name:"node-layout",props:["parent","elemento","level"],data:function(){return{childs:{},is_opened:!1,node_params:this.$route.params.node,nodechild_params:this.$route.params.nodechild,node:null,node_key_localstorage:"portalcmj_arqnode_tree_opened",click_title:!1,ARQCLASSE_FISICA:100,ARQCLASSE_LOGICA:200}},mounted:function(){this.reload()},computed:{descricao_html:function(){var e=this.node.descricao;return e=e.replace("\r\n","<br>"),e=e.replace("\n","<br>"),"<strong>".concat(this.node.conta,"</strong> - <strong>").concat(this.node.titulo,"</strong><br><i>").concat(e,"</i>")}},watch:{is_opened:function(e,t){e?(this.fetch(1,"&get_all=True&parent=".concat(this.node.id)),localStorage.addArrayOfIds(this.node_key_localstorage,this.node.id)):(this.$set(this,"childs",{}),a.isEmpty(this.node)||localStorage.delItemArrayOfIds(this.node_key_localstorage,this.node.id))},$route:function(e,t){var n=this;n.node_params=e.params.node,n.nodechild_params=e.params.nodechild,n.$nextTick().then(function(){n.openIfInArrayOfIds()})}},methods:{clickRoute:function(){this.clickToggle()},clickToggle:function(){this.is_opened=!this.is_opened},openIfInArrayOfIds:function(){a.isEmpty(this.node)||this.is_opened||!localStorage.inArrayOfIds(this.node_key_localstorage,this.node.id)||(this.is_opened=!0,this.fetch(1,"&get_all=True&parent=".concat(this.node.id)))},reload:function(){var e=this;e.node=e.elemento||null,"root"===e.node_params&&void 0===e.elemento?e.fetch(1,"&get_all=True&parent__isnull=True"):void 0===this.elemento?e.fetchElemento(e.node_params).then(function(){e.fetch(1,"&get_all=True&parent=".concat(e.node_params)).then(function(){e.clickToggle()})}):e.openIfInArrayOfIds()},fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;return n.$set(n,"childs",{}),n.utils.getModelOrderedList("arq","arqclasse","titulo",e,t).then(function(e){a.each(e.data,function(e,t){n.$set(n.childs,e.id,e)})}).catch(function(e){return n.sendMessage({alert:"danger",message:"Não foi possível recuperar os sub itens...",time:5})})},fetchElemento:function(e){var t=this;return t.utils.getModel("arq","arqclasse",e).then(function(e){return t.node=e.data,e}).catch(function(e){return t.sendMessage({alert:"danger",message:"Não foi possível recuperar node...",time:5})})}}},c=l,d=n(81656),u=(0,d.A)(c,o,i,!1,null,null,null),h=u.exports,f="undefined"!==typeof window?window:null,p=null===f,m=p?void 0:f.document,g="addEventListener",v="removeEventListener",y="getBoundingClientRect",_="_a",S="_b",z="_c",k="horizontal",b=function(){return!1},C=p?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var t=m.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",A=function(e){return"string"===typeof e||e instanceof String},O=function(e){if(A(e)){var t=m.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},I=function(e,t,n){var r=e[t];return void 0!==r?r:n},E=function(e,t,n,r){if(t){if("end"===r)return 0;if("center"===r)return e/2}else if(n){if("start"===r)return 0;if("center"===r)return e/2}return e},w=function(e,t){var n=m.createElement("div");return n.className="gutter gutter-"+t,n},q=function(e,t,n){var r={};return A(t)?r[e]=t:r[e]=C+"("+t+"% - "+n+"px)",r},x=function(e,t){var n;return n={},n[e]=t+"px",n},$=function(e,t){if(void 0===t&&(t={}),p)return{};var n,r,s,o,i,a,l=e;Array.from&&(l=Array.from(l));var c=O(l[0]),d=c.parentNode,u=getComputedStyle?getComputedStyle(d):null,h=u?u.flexDirection:null,C=I(t,"sizes")||l.map(function(){return 100/l.length}),A=I(t,"minSize",100),$=Array.isArray(A)?A:l.map(function(){return A}),T=I(t,"maxSize",1/0),M=Array.isArray(T)?T:l.map(function(){return T}),N=I(t,"expandToMin",!1),L=I(t,"gutterSize",10),F=I(t,"gutterAlign","center"),U=I(t,"snapOffset",30),D=Array.isArray(U)?U:l.map(function(){return U}),R=I(t,"dragInterval",1),j=I(t,"direction",k),J=I(t,"cursor",j===k?"col-resize":"row-resize"),P=I(t,"gutter",w),B=I(t,"elementStyle",q),H=I(t,"gutterStyle",x);function Q(e,t,r,s){var o=B(n,t,r,s);Object.keys(o).forEach(function(t){e.style[t]=o[t]})}function X(e,t,r){var s=H(n,t,r);Object.keys(s).forEach(function(t){e.style[t]=s[t]})}function G(){return a.map(function(e){return e.size})}function V(e){return"touches"in e?e.touches[0][r]:e[r]}function W(e){var t=a[this.a],n=a[this.b],r=t.size+n.size;t.size=e/this.size*r,n.size=r-e/this.size*r,Q(t.element,t.size,this[S],t.i),Q(n.element,n.size,this[z],n.i)}function Y(e){var n,r=a[this.a],s=a[this.b];this.dragging&&(n=V(e)-this.start+(this[S]-this.dragOffset),R>1&&(n=Math.round(n/R)*R),n<=r.minSize+r.snapOffset+this[S]?n=r.minSize+this[S]:n>=this.size-(s.minSize+s.snapOffset+this[z])&&(n=this.size-(s.minSize+this[z])),n>=r.maxSize-r.snapOffset+this[S]?n=r.maxSize+this[S]:n<=this.size-(s.maxSize-s.snapOffset+this[z])&&(n=this.size-(s.maxSize+this[z])),W.call(this,n),I(t,"onDrag",b)(G()))}function K(){var e=a[this.a].element,t=a[this.b].element,r=e[y](),i=t[y]();this.size=r[n]+i[n]+this[S]+this[z],this.start=r[s],this.end=r[o]}function Z(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var n=e[i];return 0===n?null:(n-=j===k?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),n)}function ee(e){var t=Z(d);if(null===t)return e;if($.reduce(function(e,t){return e+t},0)>t)return e;var n=0,r=[],s=e.map(function(s,o){var i=t*s/100,a=E(L,0===o,o===e.length-1,F),l=$[o]+a;return i<l?(n+=l-i,r.push(0),l):(r.push(i-l),i)});return 0===n?e:s.map(function(e,s){var o=e;if(n>0&&r[s]-n>0){var i=Math.min(n,r[s]-n);n-=i,o=e-i}return o/t*100})}function te(){var e=this,n=a[e.a].element,r=a[e.b].element;e.dragging&&I(t,"onDragEnd",b)(G()),e.dragging=!1,f[v]("mouseup",e.stop),f[v]("touchend",e.stop),f[v]("touchcancel",e.stop),f[v]("mousemove",e.move),f[v]("touchmove",e.move),e.stop=null,e.move=null,n[v]("selectstart",b),n[v]("dragstart",b),r[v]("selectstart",b),r[v]("dragstart",b),n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",e.gutter.style.cursor="",e.parent.style.cursor="",m.body.style.cursor=""}function ne(e){if(!("button"in e)||0===e.button){var n=this,r=a[n.a].element,s=a[n.b].element;n.dragging||I(t,"onDragStart",b)(G()),e.preventDefault(),n.dragging=!0,n.move=Y.bind(n),n.stop=te.bind(n),f[g]("mouseup",n.stop),f[g]("touchend",n.stop),f[g]("touchcancel",n.stop),f[g]("mousemove",n.move),f[g]("touchmove",n.move),r[g]("selectstart",b),r[g]("dragstart",b),s[g]("selectstart",b),s[g]("dragstart",b),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",n.gutter.style.cursor=J,n.parent.style.cursor=J,m.body.style.cursor=J,K.call(n),n.dragOffset=V(e)-n.end}}j===k?(n="width",r="clientX",s="left",o="right",i="clientWidth"):"vertical"===j&&(n="height",r="clientY",s="top",o="bottom",i="clientHeight"),C=ee(C);var re=[];function se(e){var t=e.i===re.length,n=t?re[e.i-1]:re[e.i];K.call(n);var r=t?n.size-e.minSize-n[z]:e.minSize+n[S];W.call(n,r)}function oe(e){var t=ee(e);t.forEach(function(e,n){if(n>0){var r=re[n-1],s=a[r.a],o=a[r.b];s.size=t[n-1],o.size=e,Q(s.element,s.size,r[S],s.i),Q(o.element,o.size,r[z],o.i)}})}function ie(e,t){re.forEach(function(r){if(!0!==t?r.parent.removeChild(r.gutter):(r.gutter[v]("mousedown",r[_]),r.gutter[v]("touchstart",r[_])),!0!==e){var s=B(n,r.a.size,r[S]);Object.keys(s).forEach(function(e){a[r.a].element.style[e]="",a[r.b].element.style[e]=""})}})}return a=l.map(function(e,t){var n,r={element:O(e),size:C[t],minSize:$[t],maxSize:M[t],snapOffset:D[t],i:t};if(t>0&&(n={a:t-1,b:t,dragging:!1,direction:j,parent:d},n[S]=E(L,t-1===0,!1,F),n[z]=E(L,!1,t===l.length-1,F),"row-reverse"===h||"column-reverse"===h)){var s=n.a;n.a=n.b,n.b=s}if(t>0){var o=P(t,j,r.element);X(o,L,t),n[_]=ne.bind(n),o[g]("mousedown",n[_]),o[g]("touchstart",n[_]),d.insertBefore(o,r.element),n.gutter=o}return Q(r.element,r.size,E(L,0===t,t===l.length-1,F),t),t>0&&re.push(n),r}),a.forEach(function(e){var t=e.element[y]()[n];t<e.minSize&&(N?se(e):e.minSize=t)}),{setSizes:oe,getSizes:G,collapse:function(e){se(a[e])},destroy:ie,parent:d,pairs:re}},T=$,M=n(2543),N={name:"admin-layout",components:{NodeLayout:h},data:function(){return{node_key_localstorage:"portalcmj_arqnode_tree_opened",check_opened:0}},watch:{$route:function(e,t){"arqchildroute"===e.name&&e.params.node!==t.params.node&&(this.$refs.noderoot.node_params=e.params.node,this.$refs.noderoot.nodechild_params=e.params.nodechild,this.$refs.noderoot.reload())}},methods:{checkIsOpenedNodesTree:function(){this.check_opened+=1},clickCollapseAll:function(){if(this.$refs.noderoot.is_opened)localStorage.clearArrayOfIds(this.node_key_localstorage),this.$refs.noderoot.is_opened=!1;else{var e=this.$refs.noderoot.node,t="";t=null!==e&&null!==e.parent?e.parent:"root";var n=this.$refs.selectednode;if(M.isEmpty(n)||M.isEmpty(n.classe)||null==n.classe.parent)if(!M.isEmpty(e)&&e.id!==t||void 0!==this.$route.params.nodechild){var r="arqadminroute",s={node:t};"root"!==t&&(s["nodechild"]=t,r="arqchildroute"),this.$router.push({name:r,params:s})}else localStorage.clearArrayOfIds(this.node_key_localstorage),this.$refs.noderoot.reload(),this.sendMessage({alert:"danger",message:"Topo atingido!",time:2});else{var o="arqchildroute",i={node:t,nodechild:n.classe.parent};localStorage.delItemArrayOfIds(this.node_key_localstorage,n.classe.parent),this.$router.push({name:o,params:i})}}}},mounted:function(){var e=localStorage.getItem("split-sizes");e?(e=JSON.parse(e),e[0]+e[1]>100&&(e=[35,65])):e=[35,65],T(["#col-classes","#col-docs"],{minSize:350,sizes:e,onDragEnd:function(e){localStorage.setItem("split-sizes",JSON.stringify(e))}})}},L=N,F=(0,d.A)(L,r,s,!1,null,null,null),U=F.exports}}]);