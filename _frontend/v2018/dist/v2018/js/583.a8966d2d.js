"use strict";(self["webpackChunkPortalCMJ_Frontend_v2018"]=self["webpackChunkPortalCMJ_Frontend_v2018"]||[]).push([[583],{684:function(e){e.exports=function(e,t){var a="function"==typeof Iterator&&Iterator.prototype[e];if(a)try{a.call({next:null},t).next()}catch(s){return!0}}},1385:function(e,t,a){var s=a(9539);e.exports=function(e,t,a){for(var n=e.length-1;n>=0;n--)if(void 0!==e[n])try{a=s(e[n].iterator,t,a)}catch(i){t="throw",a=i}if("throw"===t)throw a;return a}},1701:function(e,t,a){var s=a(6518),n=a(9565),i=a(9306),r=a(8551),o=a(1767),l=a(9462),c=a(6319),u=a(9539),d=a(684),p=a(4549),v=a(6395),h=!v&&!d("map",function(){}),f=!v&&!h&&p("map",TypeError),_=v||h||f,m=l(function(){var e=this.iterator,t=r(n(this.next,e)),a=this.done=!!t.done;if(!a)return c(e,this.mapper,[t.value,this.counter++],!0)});s({target:"Iterator",proto:!0,real:!0,forced:_},{map:function(e){r(this);try{i(e)}catch(t){u(this,"throw",t)}return f?n(f,this,e):new m(o(this),{mapper:e})}})},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,a){var s=a(6840);e.exports=function(e,t,a){for(var n in t)s(e,n,t[n],a);return e}},6319:function(e,t,a){var s=a(8551),n=a(9539);e.exports=function(e,t,a,i){try{return i?t(s(a)[0],a[1]):t(a)}catch(r){n(e,"throw",r)}}},8964:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});a(8111),a(1701);var s=function(){var e=this,t=e._self._c;return t("div",{class:["row","painelset-evento-list-item",{"evento-finalizado":e.evento&&e.evento.end_real}]},[t("div",{staticClass:"col"},[t("h3",{staticClass:"text-blue"},[e._v(e._s(e.evento.name))]),t("strong",[e.evento.start_real?t("span",[e._v("Iniciado em: "+e._s(e.start_real()))]):t("span",[e._v("Data e Hora Prevista: "+e._s(e.start_previsto()))]),t("span",[e._v("  |  Duração Estimada: "+e._s(e.evento.duration))]),e.evento.end_real?t("span",[t("br"),e._v("Finalizado em: "+e._s(e.end_real()))]):e._e()]),t("br"),e.evento.description?t("span",[e._v(" "+e._s(e.evento.description)+" ")]):e._e()]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"btn-group"},[e.has_perm&&e.evento.start_real&&!e.evento.end_real?t("a",{staticClass:"btn btn-danger",attrs:{href:"#",title:"Encerrar Evento"},on:{click:function(t){return t.preventDefault(),e.finish(t)}}},[t("i",{staticClass:"fas fa-stop-circle"})]):e._e(),e.has_perm&&!e.evento.end_real?t("a",{staticClass:"btn btn-secondary",attrs:{href:"#",title:"Editar Evento"},on:{click:function(t){return t.preventDefault(),e.edit(t)}}},[t("i",{staticClass:"fas fa-edit"})]):e._e(),e.has_perm&&e.evento.end_real?t("a",{staticClass:"btn btn-success",attrs:{href:"#",title:"Duplicar Evento"},on:{click:function(t){return t.preventDefault(),e.copy(t)}}},[t("i",{staticClass:"fas fa-copy"})]):e._e(),e.has_perm&&!e.evento.end_real?t("a",{staticClass:"btn btn-primary",attrs:{href:"#",title:"Execução do Evento"},on:{click:function(t){return t.preventDefault(),e.admin(t)}}},[t("i",{staticClass:"fas fa-toolbox"})]):e._e()])]),t("div",{staticClass:"col-12 mt-2"},[t("div",{staticClass:"paineis pt-2"},[t("strong",[e._v("Painéis:")]),t("i",{staticClass:"fas fa-info-circle",attrs:{title:"Clique no nome do painel para abrir em uma nova aba."}}),e.has_perm&&!e.evento.end_real?t("div",{staticClass:"btn-group btn-group-sm d-inline-flex pl-1 mb-n2"},[t("a",{staticClass:"btn btn-info",attrs:{href:`/api/painelset/evento/${e.evento.id}/export.yaml?t=${Date.now()}`,title:"Exportar Paineis do Evento em YAML"}},[t("i",{staticClass:"fas fa-file-download"})]),t("button",{staticClass:"btn btn-warning",attrs:{title:"Resetar Paineis para Padrão"},on:{click:function(t){return t.preventDefault(),e.resetToDefaults(t)}}},[t("i",{staticClass:"fas fa-undo-alt"})]),t("button",{staticClass:"btn btn-primary",attrs:{title:"Adicionar novo painel ao evento"},on:{click:function(t){return e.createPainel(t)}}},[t("i",{staticClass:"fas fa-plus-circle"})])]):e._e(),t("ul",e._l(e.paineis,function(a){return t("li",{key:`painel-${a.id}`,staticClass:"py-2"},[t("div",{staticClass:"d-flex w-100 align-items-center"},[t("a",{attrs:{href:`/painelset/painel/${a.id}`,target:"_blank"}},[e._v(" "+e._s(a.name)+" "),a.principal?t("small",{attrs:{title:"Painel Principal"}},[t("i",{staticClass:"fas fa-star"})]):e._e()]),t("br"),e.has_perm?t("button",{staticClass:"btn btn-link mr-2 text-danger",attrs:{title:"Remover Painel do Evento"},on:{click:function(t){return e.deletePainel(a.id)}}},[t("i",{staticClass:"fas fa-minus-circle"})]):e._e()]),t("div",{staticClass:"sessao_list"},[t("span",{staticClass:"text-nowrap"},[e._v("   - Sessão Vinculada: ")]),e.sessao_cache[a.id]?t("a",{attrs:{href:`${e.sessao_cache[a.id]?.link_detail_backend}`,target:"_blank"}},[t("i",{staticClass:"fas fa-external-link-alt"}),e.has_perm?e._e():t("span",[e._v(" "+e._s(e.sessao_cache[a.id]?.__str__))])]):e._e(),e.has_perm?t("div",{staticClass:"d-inline-block"},[e.evento.end_real?e._e():t("select",{directives:[{name:"model",rawName:"v-model",value:a.sessao,expression:"painel.sessao"}],staticClass:"form-control form-control-sm",attrs:{id:"painel-sessao",name:"sessao_plenaria"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(a,"sessao",t.target.multiple?s:s[0])},function(t){e.utils.patchModel("painelset","painel",a.id,{sessao:a.sessao}).then(()=>{e.refresh()})}]}},[t("option",{domProps:{value:null}},[e._v("-- Nenhuma --")]),e._l(e.sessaoList,function(a){return t("option",{key:`sessao-option-${a.id}`,domProps:{value:a.id}},[e._v(" "+e._s(a.__str__)+" ("+e._s(a.data_inicio)+" - "+e._s(a.data_fim||"")+") ")])})],2)]):e._e()])])}),0)])])])},n=[],i=(a(4114),a(7588),a(2543)),r={name:"painelset-evento-list-item",props:{evento:{type:Object,required:!0}},data(){return{sessao_cache:{},paineis:{}}},computed:{sessaoList:function(){return i.orderBy(this.data_cache?.sessao_sessaoplenaria||[],["data_inicio"],["desc"])},has_perm:function(){return this.permissions.includes("painelset.change_evento")}},mounted:function(){const e=this;e.refresh()},methods:{refresh(){const e=this;e.utils.fetch({app:"painelset",model:"painel",query_string:`evento=${e.evento.id}`}).then(t=>{e.paineis=t.data.results,t.data.results.forEach(t=>{null!=t.sessao&&this.utils.fetch({app:"sessao",model:"sessaoplenaria",id:t.sessao}).then(a=>{e.$set(e.sessao_cache,t.id,a.data)})})})},admin(){this.evento&&this.$router.push({name:"painelset_admin_link",params:{id:this.evento.id}})},edit(){this.evento&&window.open(this.evento.link_detail_backend,"_blank")},copy(){this.evento&&this.fetchSync({app:"painelset",model:"evento",id:this.evento.id,action:"copy",method:"PATCH"}).then(()=>{this.sendMessage({alert:"success",message:"Evento copiado com sucesso.",time:5})}).catch(()=>{this.sendMessage({alert:"danger",message:"Erro ao copiar evento. Verifique se o evento já foi finalizado.",time:10})})},createPainel(){this.evento&&this.utils.postModel("painelset","painel",{name:`Painel do evento ${this.evento.name}`,description:`Painel criado automaticamente para o evento ${this.evento.name}`,evento:this.evento.id}).then(()=>{this.refresh(),this.sendMessage({alert:"success",message:"Painel criado com sucesso.",time:5})}).catch(()=>{this.sendMessage({alert:"danger",message:"Erro ao criar painel. Verifique se o evento já foi finalizado.",time:10})})},deletePainel(e){e&&this.utils.deleteModel("painelset","painel",e).then(()=>{this.refresh(),this.sendMessage({alert:"success",message:"Painel deletado com sucesso.",time:5})}).catch(()=>{this.sendMessage({alert:"danger",message:"Erro ao deletar painel. Verifique se o evento já foi finalizado.",time:10})})},finish(){this.evento&&this.fetchSync({app:"painelset",model:"evento",id:this.evento.id,action:"finish",method:"PATCH"})},resetToDefaults(){this.evento&&this.utils.patchModelAction("painelset","evento",this.evento.id,"reset_to_defaults").then(()=>{this.refresh(),this.sendMessage({alert:"success",message:"Paineis resetados para configuração padrão com sucesso.",time:5})}).catch(()=>{this.sendMessage({alert:"danger",message:"Erro ao resetar paineis para configuração padrão.",time:10})})},start_real(){return this.evento.start_real?this.evento.start_real.replace("T"," ").substring(0,19):""},start_previsto(){return this.evento.start_previsto?this.evento.start_previsto.replace("T"," ").substring(0,19):""},end_real(){return this.evento.end_real?this.evento.end_real.replace("T"," ").substring(0,19):""}}},o=r,l=a(1656),c=(0,l.A)(o,s,n,!1,null,null,null),u=c.exports},9462:function(e,t,a){var s=a(9565),n=a(2360),i=a(6699),r=a(6279),o=a(8227),l=a(1181),c=a(5966),u=a(7657).IteratorPrototype,d=a(2529),p=a(9539),v=a(1385),h=o("toStringTag"),f="IteratorHelper",_="WrapForValidIterator",m="normal",g="throw",b=l.set,C=function(e){var t=l.getterFor(e?_:f);return r(n(u),{next:function(){var a=t(this);if(e)return a.nextHandler();if(a.done)return d(void 0,!0);try{var s=a.nextHandler();return a.returnHandlerResult?s:d(s,a.done)}catch(n){throw a.done=!0,n}},return:function(){var a=t(this),n=a.iterator;if(a.done=!0,e){var i=c(n,"return");return i?s(i,n):d(void 0,!0)}if(a.inner)try{p(a.inner.iterator,m)}catch(r){return p(n,g,r)}if(a.openIters)try{v(a.openIters,m)}catch(r){return p(n,g,r)}return n&&p(n,m),d(void 0,!0)}})},y=C(!0),x=C(!1);i(x,h,"Iterator Helper"),e.exports=function(e,t,a){var s=function(s,n){n?(n.iterator=s.iterator,n.next=s.next):n=s,n.type=t?_:f,n.returnHandlerResult=!!a,n.nextHandler=e,n.counter=0,n.done=!1,b(this,n)};return s.prototype=t?y:x,s}}}]);
//# sourceMappingURL=583.a8966d2d.js.map