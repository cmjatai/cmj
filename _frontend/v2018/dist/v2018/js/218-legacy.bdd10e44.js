"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[218],{16034:function(t,e,a){var i=a(46518),n=a(32357).values;i({target:"Object",stat:!0},{values:function(t){return n(t)}})},32357:function(t,e,a){var i=a(43724),n=a(79039),o=a(79504),s=a(42787),r=a(71072),l=a(25397),c=a(48773).f,d=o(c),u=o([].push),p=i&&n(function(){var t=Object.create(null);return t[2]=2,!d(t,2)}),m=function(t){return function(e){var a,n=l(e),o=r(n),c=p&&null===s(n),m=o.length,h=0,f=[];while(m>h)a=o[h++],i&&!(c?a in n:d(n,a))||u(f,t?[a,n[a]]:n[a]);return f}};t.exports={entries:m(!0),values:m(!1)}},38255:function(t,e,a){a.d(e,{A:function(){return u}});a(74423),a(21699);var i=function(){var t=this,e=t._self._c;return e("div",{class:["cronometro-component",t.css_class]},[t.cronometro?e("div",{class:["croncard",t.display,t.cronometro.state,t.cronometro.remaining_time<0?"exceeded":""]},[e("div",{staticClass:"inner"},[e("div",{class:["display-time",t.display,t.cronometro.state,t.cronometro.remaining_time<0?"exceeded":""],style:{fontSize:t.display_size}},[t._v(" "+t._s(t.displayTime)+" ")]),e("div",{staticClass:"inner-rodape"},["elapsed"===t.display?e("div",[e("small",[t._v("Tempo Decorrido")])]):"remaining"===t.display?e("div",[t.cronometro.remaining_time<0?e("small",[t._v("Tempo Excedido")]):e("small",[t._v("Tempo Restante")])]):"last_paused"===t.display?e("div",[e("small",[t._v("Tempo de Suspensão")])]):t._e()])]),t.css_class_controls?e("div",{class:["controls",t.css_class_controls]},[e("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"First group"}},[t.controls.includes("toggleDisplay")?e("a",{staticClass:"btn btn-outline-dark btn-toggle",attrs:{title:"Alternar exibição"},on:{click:function(e){return e.stopPropagation(),t.toogleDisplay.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-exchange-alt",attrs:{"aria-hidden":"true"}})]):t._e(),"stopped"===t.cronometro.state&&t.controls.includes("start")?e("a",{staticClass:"btn btn-outline-dark btn-start",on:{click:function(e){return e.stopPropagation(),t.startCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-play",attrs:{"aria-hidden":"true"}})]):t._e(),"running"===t.cronometro.state&&t.controls.includes("pause")?e("a",{staticClass:"btn btn-outline-dark btn-pause",on:{click:function(e){return e.stopPropagation(),t.pauseCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-pause",attrs:{"aria-hidden":"true"}})]):t._e(),"paused"===t.cronometro.state&&t.controls.includes("resume")?e("a",{staticClass:"btn btn-outline-dark btn-resume",on:{click:function(e){return e.stopPropagation(),t.resumeCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-play",attrs:{"aria-hidden":"true"}})]):t._e(),["running","paused"].includes(t.cronometro.state)&&t.controls.includes("stop")?e("a",{staticClass:"btn btn-outline-dark btn-stop",on:{click:function(e){return e.stopPropagation(),t.stopCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-stop",attrs:{"aria-hidden":"true"}})]):t._e(),t.controls.includes("add1m")?e("a",{staticClass:"btn btn-outline-dark btn-negative btn-add1m",attrs:{title:"Reduzir 1 minuto"},on:{click:function(e){return e.stopPropagation(),t.addTime(-60)}}},[t._v(" -1m ")]):t._e(),t.controls.includes("add30s")?e("a",{staticClass:"btn btn-outline-dark btn-negative btn-add30s",attrs:{title:"Reduzir 30 segundos"},on:{click:function(e){return e.stopPropagation(),t.addTime(-30)}}},[t._v(" -30s ")]):t._e(),t.controls.includes("add30s")?e("a",{staticClass:"btn btn-outline-dark btn-add30s",attrs:{title:"Adicionar 30 segundos"},on:{click:function(e){return e.stopPropagation(),t.addTime(30)}}},[t._v(" +30s ")]):t._e(),t.controls.includes("add1m")?e("a",{staticClass:"btn btn-outline-dark btn-add1m",attrs:{title:"Adicionar 1 minuto"},on:{click:function(e){return e.stopPropagation(),t.addTime(60)}}},[t._v(" +1m ")]):t._e(),t.controls.includes("add3m")?e("a",{staticClass:"btn btn-outline-dark btn-add3m",attrs:{title:"Adicionar 3 minutos"},on:{click:function(e){return e.stopPropagation(),t.addTime(180)}}},[t._v(" +3m ")]):t._e(),t.controls.includes("add5m")?e("a",{staticClass:"btn btn-outline-dark btn-add5m",attrs:{title:"Adicionar 5 minutos"},on:{click:function(e){return e.stopPropagation(),t.addTime(300)}}},[t._v(" +5m ")]):t._e()])]):t._e()]):e("div",[e("p",[t._v("Carregando cronômetro...")])])])},n=[],o=a(78042),s=(a(50113),a(48598),a(62062),a(18111),a(20116),a(2892),a(26099),a(16034),a(38781),a(95353)),r={name:"cronometro-base",props:{cronometro_id:{type:Number,required:!0},css_class:{type:String,default:""},css_class_controls:{type:String,default:""},display_initial:{type:String,default:"elapsed",validator:function(t){return["elapsed","remaining","last_paused"].includes(t)}},display_format:{type:String,default:"hh:mm:ss"},display_size:{type:String,default:"1.5em"},auto_start:{type:Boolean,default:!1},auto_stop:{type:Boolean,default:!1},controls:{type:Array,default:function(){return["start","pause","resume","stop","add30s","add1m","add3m","add5m","toggleDisplay"]}}},data:function(){return{display:this.display_initial,modesDisplay:["elapsed","remaining","last_paused"],timerInterval:1500,controlsDisplay:this.controls}},mounted:function(){},methods:(0,o.A)((0,o.A)({},s.Ay.mapActions("store__sync",["sendSyncMessage"])),{},{toogleDisplay:function(){var t=this.modesDisplay.indexOf(this.display),e=(t+1)%this.modesDisplay.length,a=this.modesDisplay[e];"last_paused"===a&&"paused"!==this.cronometro.state&&(a="elapsed"),this.display=a},addTime:function(t){this.sendSyncMessage({type:"command",command:"add_time",app:"painelset",model:"cronometro",params:{id:this.cronometro_id,seconds:t}})},startCronometro:function(){this.sendSyncMessage({type:"command",command:"start",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display=this.display_initial,this.$emit("cronometro_start")},pauseCronometro:function(){this.sendSyncMessage({type:"command",command:"pause",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display="last_paused",this.$emit("cronometro_pause")},resumeCronometro:function(){this.sendSyncMessage({type:"command",command:"resume",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display=this.display_initial,this.$emit("cronometro_resume")},stopCronometro:function(){this.sendSyncMessage({type:"command",command:"stop",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display="elapsed"},secondsToTime:function(t,e,a){var i=Math.round(t[e]||t[a]||0),n=i<0?"-":"";i<0&&(i*=-1);var o=Math.floor(i/3600),s=Math.floor(i%3600/60),r=i%60,l="";return"hh:mm:ss"===this.display_format?l=[o,s,r].map(function(t){return t<10?"0"+t:t}).join(":"):"mm:ss"===this.display_format?l=[s+60*o,r].map(function(t){return t<10?"0"+t:t}).join(":"):"ss"===this.display_format&&(l=(r+60*s+3600*o).toString()),n&&(l=n+l),l||"00:00:00"}}),computed:{cronometro:function(){var t,e=this;return null!==(t=this.data_cache)&&void 0!==t&&t.painelset_cronometro?Object.values(this.data_cache.painelset_cronometro).find(function(t){return t.id===e.cronometro_id}):null},displayTime:function(){return"elapsed"===this.display?this.elapsedTime:"remaining"===this.display?this.remainingTime:"last_paused"===this.display?this.lastPausedTime:"00:00:00"},lastPausedTime:function(){return this.secondsToTime(this.cronometro,"last_paused_time")},elapsedTime:function(){return this.secondsToTime(this.cronometro,"elapsed_time")},remainingTime:function(){return this.secondsToTime(this.cronometro,"remaining_time","accumulated_time")},accumulatedTime:function(){return this.secondsToTime(this.cronometro,"accumulated_time")}}},l=r,c=a(845),d=(0,c.A)(l,i,n,!1,null,null,null),u=d.exports},39469:function(t,e,a){var i=a(46518),n=Math.hypot,o=Math.abs,s=Math.sqrt,r=!!n&&n(1/0,NaN)!==1/0;i({target:"Math",stat:!0,arity:2,forced:r},{hypot:function(t,e){var a,i,n=0,r=0,l=arguments.length,c=0;while(r<l)a=o(arguments[r++]),c<a?(i=c/a,n=n*i*i+1,c=a):a>0?(i=a/c,n+=i*i):n+=a;return c===1/0?1/0:c*s(n)}})},60218:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sessaoplenaria-module online-module"},[e("router-view"),e("popover-palavra")],1)},n=[],o=a(78042),s=a(95353),r=function(){var t=this,e=t._self._c;return t.individuos?e("div",{staticClass:"popover-palavra",on:{touchstart:function(e){t.touching=!0},touchmove:function(e){return t.movePopover(e)},touchend:function(e){t.touching=!1},mouseup:function(e){t.touching=!1},mousemove:function(e){return t.movePopover(e)},mousedown:function(e){t.touching=!0}}},t._l(t.individuos,function(a){return e("div",{key:"popover-individuo-".concat(a.id),class:["popover-individuo",a.com_a_palavra?"com_a_palavra":"aparteante"]},[e("div",{staticClass:"popover-header"},[e("div",{staticClass:"arrow"}),a.com_a_palavra?e("h3",{staticClass:"popover-title"},[e("i",{staticClass:"fas fa-expand-alt"}),e("span",[t._v(" Com a palavra ")])]):t._e(),a.aparteado?e("h3",{staticClass:"popover-title"},[t._v("Em aparte")]):t._e()]),e("div",{staticClass:"popover-body"},[a?e("div",{staticClass:"individuo-info"},[e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(a.nome))]),a.cronometro?e("div",{staticClass:"timer mt-1"},[e("cronometro-base",{key:"cronometro-popover-".concat(a.cronometro),ref:"cronometro-popover-".concat(a.cronometro),refInFor:!0,attrs:{cronometro_id:a.cronometro,css_class_controls:"d-none",css_class:"cron-popover-palavra",display_initial:"remaining",display_format:"mm:ss",display_size:"2em",controls:[]}})],1):t._e()]),t.fotografiaUrl(a)?e("div",{staticClass:"foto me-2",style:{backgroundImage:"url("+t.fotografiaUrl(a)+")"}}):e("div",{staticClass:"foto me-2"},[e("i",{staticClass:"fas fa-user"})])]):t._e()])])}),0):t._e()},l=[],c=(a(50113),a(44114),a(18111),a(20116),a(39469),a(26099),a(16034),a(38255)),d={name:"popover-palavra",components:{CronometroBase:c.A},data:function(){return{touching:!1,moving:!1}},watch:{wsConnected:{immediate:!0,handler:function(t){var e=this;t||this.$nextTick(function(){e.invalidateCacheModels({app:"painelset",models:["individuo","cronometro"]})})}}},computed:{individuo_com_a_palavra:function(){var t;return null!==(t=this.data_cache)&&void 0!==t&&t.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(function(t){return t.com_a_palavra}):null},individuo_aparteante:function(){var t;return null!==(t=this.data_cache)&&void 0!==t&&t.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(function(t){return t.aparteado}):null},individuos:function(){var t=[];return this.individuo_aparteante&&t.push(this.individuo_aparteante),this.individuo_com_a_palavra&&t.push(this.individuo_com_a_palavra),t}},mounted:function(){this.registerModels({app:"painelset",models:["individuo","cronometro"]})},methods:(0,o.A)((0,o.A)({},s.Ay.mapActions("store__sync",["invalidateCacheModels"])),{},{fotografiaUrl:function(t){return t.parlamentar?"/api/parlamentares/parlamentar/"+t.parlamentar+"/fotografia.c96.png":t.fotografia?"/api/painelset/individuo/"+t.id+"/fotografia.c96.png":null},movePopover:function(t){if(this.touching){var e=this.$el,a=e.getBoundingClientRect();if(t.touches&&t.touches.length>1){t.preventDefault();var i=Math.hypot(t.touches[0].clientX-t.touches[1].clientX,t.touches[0].clientY-t.touches[1].clientY),n=Math.min(Math.max(i/10,10),100);e.style.fontSize="".concat(n,"px")}else{var o=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,r=window.innerWidth-o-a.width/2,l=window.innerHeight-s-a.height/2,c=Math.max(0,Math.min(r,window.innerWidth-a.width)),d=Math.max(0,Math.min(l,window.innerHeight-a.height));e.style.right="".concat(c,"px"),e.style.bottom="".concat(d,"px")}}}})},u=d,p=a(845),m=(0,p.A)(u,r,l,!1,null,null,null),h=m.exports,f=a(2543),v={name:"sessaoplenaria-module",components:{PopoverPalavra:h},data:function(){return{ws:"/ws/time-refresh/",models_init_cache:{base:["autor"],sessao:["tiposessaoplenaria",{model:"expedientesessao",full_pages:!1,ordering:"-sessao_plenaria"}],materia:["tipomaterialegislativa","statustramitacao"],parlamentares:["legislatura",{model:"sessaolegislativa",full_pages:!1,ordering:"-data_inicio"}]}}},mounted:function(){this.setSideleftVisivel(!0),this.setSiderightVisivel(!1),this.initCache()},methods:(0,o.A)((0,o.A)({},s.Ay.mapActions(["setSideleftVisivel","setSiderightVisivel"])),{},{fetchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this;i.utils.getModelOrderedList(e,i.isString(a)?a:a.model,i.isString(a)?"":a.ordering,null===t?1:t).then(function(t){f.each(t.data.results,function(t,n){i.refreshState({app:e,model:i.isString(a)?a:a.model,id:t.id,value:t})}),i.$nextTick().then(function(){null!==t.data.pagination.next_page&&(i.isString(a)||a.full_pages)&&i.fetchList(t.data.pagination.next_page,e,a)})})},initCache:function(){var t=this;f.mapKeys(t.models_init_cache,function(e,a){f.each(e,function(e){t.fetchList(1,a,e)})})}})},_=v,g=(0,p.A)(_,i,n,!1,null,null,null),y=g.exports},62062:function(t,e,a){var i=a(46518),n=a(59213).map,o=a(70597),s=o("map");i({target:"Array",proto:!0,forced:!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=218-legacy.bdd10e44.js.map