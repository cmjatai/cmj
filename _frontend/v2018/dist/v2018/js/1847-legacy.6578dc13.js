"use strict";(self["webpackChunkPortalCMJ_Frontend_v2018"]=self["webpackChunkPortalCMJ_Frontend_v2018"]||[]).push([[1847],{1847:function(e,t,o){o.r(t),o.d(t,{default:function(){return v}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-fluid container-arqtree"},[t("div",{staticClass:"row"},[t("div",{attrs:{id:"col-classes"}},[t("div",{staticClass:"arqtree-inner"},[t("div",{staticClass:"arqtree-titulo"},[t("span",{staticClass:"collapse-all",on:{click:e.clickCollapseAll}},[t("i",{staticClass:"fas fa-chevron-left"}),t("i",{staticClass:"fas fa-chevron-left"})]),t("h1",[e._v("ArqView")])]),t("node-layout",{ref:"noderoot",attrs:{level:0}})],1)]),t("div",{attrs:{id:"col-docs"}},[t("router-view",{key:e.$route.fullPath,ref:"selectednode",on:{checkIsOpenedNodesTree:e.checkIsOpenedNodesTree}})],1)])])},n=[],a=(o(4114),o(2010),o(3110),o(9432),o(8335),o(8706),function(){var e=this,t=e._self._c;return t("div",{class:["node-element",null!==e.node&&0===e.node.count_childs?"type-content":"",null!==e.node&&e.node.id===parseInt(e.nodechild_params)?"active":""]},[e.node?t("div",{class:["node-titulo","level-".concat(e.level)]},[t("span",{staticClass:"spacer"}),0!==e.node.count_childs?t("span",{staticClass:"toggle",on:{click:e.clickToggle}},[e.is_opened&&e.childs?e._e():t("i",{staticClass:"fas fa-chevron-right"}),e.is_opened&&e.childs?t("i",{staticClass:"fas fa-chevron-down"}):e._e()]):e._e(),t("span",{staticClass:"content"},[t("router-link",{attrs:{to:{name:"arqchildroute",params:{node:e.node_params,nodechild:e.node.id}}},nativeOn:{click:function(t){return e.clickRoute.apply(null,arguments)}}},[e._v(" "+e._s(e.node.titulo)+" "),e.node.checkcheck?t("i",{staticClass:"fas fa-xs fa-lock text-light-blue",attrs:{title:"ArqClasse Arquivada."}}):e._e()]),t("div",{staticClass:"btn-group btn-group-sm el-actions"},[t("a",{staticClass:"btn btn-link",attrs:{href:"/arqadmin/classe/".concat(e.node.id),target:"_blank"}},[t("i",{staticClass:"fas fa-edit"})]),t("a",{staticClass:"btn btn-link",attrs:{href:"/arq/".concat(e.node.id,"/").concat(e.node.id)}},[t("i",{staticClass:"fas fa-expand"})])]),t("small",{staticClass:"box-descricao",domProps:{innerHTML:e._s(e.descricao_html)}})],1)]):e._e(),e._l(e.childs,function(o,s){return t("node-layout",{key:"class-".concat(s),attrs:{elemento:o,parent:e.elemento,level:e.level+1}})})],2)}),r=[],l=(o(7495),o(5440),o(2543)),i={name:"node-layout",props:["parent","elemento","level"],data:function(){return{childs:{},is_opened:!1,node_params:this.$route.params.node,nodechild_params:this.$route.params.nodechild,node:null,node_key_localstorage:"portalcmj_arqnode_tree_opened",click_title:!1,ARQCLASSE_FISICA:100,ARQCLASSE_LOGICA:200}},mounted:function(){this.reload()},computed:{descricao_html:function(){var e=this.node.descricao;return e=e.replace("\r\n","<br>"),e=e.replace("\n","<br>"),"<strong>".concat(this.node.conta,"</strong> - <strong>").concat(this.node.titulo,"</strong><br><i>").concat(e,"</i>")}},watch:{is_opened:function(e,t){e?(this.fetch(1,"&get_all=True&parent=".concat(this.node.id)),localStorage.addArrayOfIds(this.node_key_localstorage,this.node.id)):(this.$set(this,"childs",{}),l.isEmpty(this.node)||localStorage.delItemArrayOfIds(this.node_key_localstorage,this.node.id))},$route:function(e,t){var o=this;o.node_params=e.params.node,o.nodechild_params=e.params.nodechild,o.$nextTick().then(function(){o.openIfInArrayOfIds()})}},methods:{clickRoute:function(){this.clickToggle()},clickToggle:function(){this.is_opened=!this.is_opened},openIfInArrayOfIds:function(){l.isEmpty(this.node)||this.is_opened||!localStorage.inArrayOfIds(this.node_key_localstorage,this.node.id)||(this.is_opened=!0,this.fetch(1,"&get_all=True&parent=".concat(this.node.id)))},reload:function(){var e=this;e.node=e.elemento||null,"root"===e.node_params&&void 0===e.elemento?e.fetch(1,"&get_all=True&parent__isnull=True"):void 0===this.elemento?e.fetchElemento(e.node_params).then(function(){e.fetch(1,"&get_all=True&parent=".concat(e.node_params)).then(function(){e.clickToggle()})}):e.openIfInArrayOfIds()},fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=this;return o.$set(o,"childs",{}),o.utils.getModelOrderedList("arq","arqclasse","titulo",e,t).then(function(e){l.each(e.data,function(e,t){o.$set(o.childs,e.id,e)})}).catch(function(e){return o.sendMessage({alert:"danger",message:"Não foi possível recuperar os sub itens...",time:5})})},fetchElemento:function(e){var t=this;return t.utils.getModel("arq","arqclasse",e).then(function(e){return t.node=e.data,e}).catch(function(e){return t.sendMessage({alert:"danger",message:"Não foi possível recuperar node...",time:5})})}}},c=i,d=o(1656),h=(0,d.A)(c,a,r,!1,null,null,null),u=h.exports,p=o(7291),f=o(2543),_={name:"admin-layout",components:{NodeLayout:u},data:function(){return{node_key_localstorage:"portalcmj_arqnode_tree_opened",check_opened:0}},watch:{$route:function(e,t){"arqchildroute"===e.name&&e.params.node!==t.params.node&&(this.$refs.noderoot.node_params=e.params.node,this.$refs.noderoot.nodechild_params=e.params.nodechild,this.$refs.noderoot.reload())}},methods:{checkIsOpenedNodesTree:function(){this.check_opened+=1},clickCollapseAll:function(){if(this.$refs.noderoot.is_opened)localStorage.clearArrayOfIds(this.node_key_localstorage),this.$refs.noderoot.is_opened=!1;else{var e=this.$refs.noderoot.node,t="";t=null!==e&&null!==e.parent?e.parent:"root";var o=this.$refs.selectednode;if(f.isEmpty(o)||f.isEmpty(o.classe)||null==o.classe.parent)if(!f.isEmpty(e)&&e.id!==t||void 0!==this.$route.params.nodechild){var s="arqadminroute",n={node:t};"root"!==t&&(n["nodechild"]=t,s="arqchildroute"),this.$router.push({name:s,params:n})}else localStorage.clearArrayOfIds(this.node_key_localstorage),this.$refs.noderoot.reload(),this.sendMessage({alert:"danger",message:"Topo atingido!",time:2});else{var a="arqchildroute",r={node:t,nodechild:o.classe.parent};localStorage.delItemArrayOfIds(this.node_key_localstorage,o.classe.parent),this.$router.push({name:a,params:r})}}}},mounted:function(){var e=localStorage.getItem("split-sizes");e?(e=JSON.parse(e),e[0]+e[1]>100&&(e=[35,65])):e=[35,65],(0,p.A)(["#col-classes","#col-docs"],{minSize:350,sizes:e,onDragEnd:function(e){localStorage.setItem("split-sizes",JSON.stringify(e))}})}},m=_,g=(0,d.A)(m,s,n,!1,null,null,null),v=g.exports}}]);