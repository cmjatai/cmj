(function(a){function e(e){for(var t,r,c=e[0],s=e[1],d=e[2],p=0,u=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(a[t]=s[t]);l&&l(e);while(u.length)u.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var a,e=0;e<o.length;e++){for(var n=o[e],t=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(t=!1)}t&&(o.splice(e--,1),a=r(r.s=n[0]))}return a}var t={},i={loa:0},o=[];function r(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return a[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=a,r.c=t,r.d=function(a,e,n){r.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:n})},r.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,e){if(1&e&&(a=r(a)),8&e)return a;if(4&e&&"object"===typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)r.d(n,t,function(e){return a[e]}.bind(null,t));return n},r.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return r.d(e,"a",e),e},r.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},r.p="/static/v2018/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var l=s;o.push([5,"chunk-vendors"]),n()})({5:function(a,e,n){a.exports=n("8930")},8930:function(a,e,n){"use strict";n.r(e),function(a,e){var t=n("c7eb"),i=n("1da1"),o=n("3835"),r=n("b85c"),c=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("99af"),n("4de4"),n("7db0"),n("caad"),n("a15b"),n("14d9"),n("b0c0"),n("e9f5"),n("910d"),n("f665"),n("7d54"),n("e9c4"),n("b64b"),n("d3b7"),n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("2532"),n("a1f0"),n("5319"),n("5b81"),n("841c"),n("498a"),n("159b"),n("ddb0"),n("d02c"),n("cee4"));c["a"].defaults.xsrfCookieName="csrftoken",c["a"].defaults.xsrfHeaderName="X-CSRFToken",window.AppLOA=function(){var n;if(!(this instanceof window.AppLOA))return n||(n=new window.AppLOA),n;n=this,window.AppLOA=function(){return n},n.LoaCRUD=function(){var e=a(".container-loa");e.hasClass("loa-detail")&&n.LoaCrudDETAIL(e)},n.LoaCrudDETAIL=function(a){},n.EmendaLoaCRUD=function(){var e=a(".container-loa");e.hasClass("emendaloa-update")?n.EmendaLoaCrudUPDATE(e):e.hasClass("emendaloa-create")?n.EmendaLoaCrudCREATE(e):e.hasClass("emendaloa-list")&&n.EmendaLoaCrudLIST(e)},n.isObjectEmpty=function(a){var n=!0;return e.forOwn(a,(function(a,e){Array.isArray(a)&&a.length>0?n=!1:Array.isArray(a)||["",null,void 0].includes(a)||(n=!1)})),n},n.EmendaLoaCrudLIST=function(t){var i,c=t.find("form"),s=new FormData(c[0]),d={},l=Object(r["a"])(s.entries());try{for(l.s();!(i=l.n()).done;){var p=Object(o["a"])(i.value,2),u=p[0],f=p[1];u in d?(Array.isArray(d[u])||(d[u]=[d[u]]),d[u].push(f)):""!==f&&(d[u]=f)}}catch(A){l.e(A)}finally{l.f()}delete d.agrupamento,delete d.tipo_agrupamento,delete d.pdf;var v=function(){var a=new FormData(c[0]),e=a.getAll("parlamentares"),n=a.getAll("fase"),t=a.get("finalidade"),i=a.getAll("tipo");return{parlamentares:e.length>0?e:[],fase:n.length>0?n:[],finalidade:""!==t?[t]:[],tipo:i.length>0?i:[]}};if(n.isObjectEmpty(d))try{var m=localStorage.getItem("portalcmj_emendaloa_filter");if(m){var g=JSON.parse(m);if(!n.isObjectEmpty(g)){e.forOwn(g,(function(n,t){e.forEach(c.find('input[name="'.concat(t,'"]')),(function(e){Array.isArray(n)&&n.includes(e.value)||n===e.value?(e.checked=!0,a('label[for="'.concat(e.id,'"] span')).addClass("active")):Array.isArray(n)?Array.isArray(n)&&n.length>0&&"text"===e.type&&(e.value=n[0]):e.value=n}))}));var h=v();n.isObjectEmpty(h)||(window.loadingCMJ("Atualizando listagem..."),c.submit())}}}catch(k){localStorage.removeItem("portalcmj_emendaloa_filter")}else{var _=v();localStorage.setItem("portalcmj_emendaloa_filter",JSON.stringify(_))}var b=function(a){var e=v();localStorage.setItem("portalcmj_emendaloa_filter",JSON.stringify(e)),window.loadingCMJ("Atualizando listagem..."),c.submit()},y=c.find('select[name="agrupamento"]'),w=c.find('input[type="radio"][name="tipo_agrupamento"]');y.change((function(a){""===a.target.value&&w.filter("[value=sem_registro]").prop("checked",!0)})).change(),w.change((function(a){var e=function(){y.addClass("bg-yellow"),setTimeout((function(){y.removeClass("bg-yellow"),setTimeout((function(){y.addClass("bg-yellow"),setTimeout((function(){y.removeClass("bg-yellow")}),400)}),400)}),400)};a.target.checked&&"sem_registro"===a.target.value?(y.find('option:not([value="model_unidadeorcamentaria"])').attr("disabled","disabled").addClass("d-none"),y.find('option[value=""]').removeAttr("disabled").removeClass("d-none"),y.val("").change(),e()):a.target.checked?(y.find("option").removeAttr("disabled").removeClass("d-none"),y.find('option[value=""]').removeAttr("disabled").addClass("d-none"),y[0].selectedIndex||(y[0].selectedIndex=2,e())):y.find("option").removeAttr("disabled").removeClass("d-none")})).change(),c.find('#div_id_parlamentares input[type="checkbox"]').change((function(a){b()})),c.find('button[type="button"]').click((function(a){b()})),c.find('input[type="submit"]').click((function(a){window.loadingCMJ("Gerando Listagem em PDF...")})),c.keypress((function(a){if(13===a.keyCode)return a.preventDefault(),!1}))},n.EmendaLoaCRUDToggleTipo=function(a){var e=a.find('select[name="tipo"]')[0],n=a.find("#div_id_parl_assinantes"),t=a.find("#div_id_parlamentares__valor"),i=a.find('input[name="valor"]')[0];"0"!==e.value?n.length>0&&(i.setAttribute("readonly","readonly"),n.find("input").prop("disabled",!0),n[0].classList.add("d-none")):t.length>0&&(i.removeAttribute("readonly"),t.find("input").prop("disabled",!0),t[0].classList.add("d-none")),a.find('select[name="tipo"]').change((function(a){var e=a.target;"0"===e.value?(t.find("input").prop("disabled",!0),t[0].classList.add("d-none"),n[0].classList.remove("d-none"),n.find("input").prop("disabled",!1),i.removeAttribute("readonly")):(n.find("input").prop("disabled",!0),n[0].classList.add("d-none"),t[0].classList.remove("d-none"),t.find("input").prop("disabled",!1),i.setAttribute("readonly","readonly"))}))},n.EmendaLoaCrudCREATE=function(a){var e=a.find("form");n.EmendaLoaCRUDToggleTipo(e)},n.EmendaLoaCrudUPDATE=function(){var o=Object(i["a"])(Object(t["a"])().mark((function o(r){var s,d,l,p,u,f,v,m,g,h,_,b,y,w,A;return Object(t["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=window.location.href.matchAll(/emendaloa\/(\d+)\//g).next().value[1],d=r.find("form"),l="/api/loa/emendaloa/".concat(s),p=null,u=function(){var a=Object(i["a"])(Object(t["a"])().mark((function a(){return Object(t["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",c["a"].get("".concat(l,"/")).then((function(a){p=a.data})));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),o.next=7,u();case 7:n.EmendaLoaCRUDToggleTipo(d),f=function(){return a(".container-preview").html('\n        <div class="inner-preview">\n          <a class="w-100" target="_blank" href="'.concat(l,'/view/">\n            <img src="').concat(l,"/view/?page=1&u=").concat(Date.now(),'"/>\n          </a>\n        </div>\n        <div class="btn-toolbar justify-content-between">\n          <div class="btn-group btn-group-sm">\n            <label for="id_lineHeight">\n              <span>Entrelinha (%)</span>\n              <input type="number"\n                name="lineHeight" value="').concat(p.metadata.style.lineHeight,'"\n                step="5"\n                min="100"\n                max="350"\n                class="numberinput form-control text-center"\n                id="id_lineHeight">\n            </label>\n          </div>\n          <div>\n            <label for="id_espacoAssinatura">\n            <input type="checkbox"\n              ').concat(p.metadata.style.espacoAssinatura?"checked":"",'\n              name="espacoAssinatura"\n              class="form-check-input"\n              id="id_espacoAssinatura">\n            <span>Incluir espaço para Assinaturas</span>\n            </label>\n          </div>\n        </div>\n      '))},v=f().find("img")[0],v.onload=function(a){v.style.opacity=1,u()},m=d.find(".registro-render"),g=function(){m.html(""),a('<div class="inner"></div>').appendTo(m),a('<div class="footer"></div>').appendTo(m)},g(),h=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=m.find(".inner"),i=m.find(".footer");c["a"].get("/api/loa/emendaloa/".concat(s,"/totais/")).then((function(e){i.html(""),a('\n            <div class="row">\n              <div class="col-12 totais">\n              TOTAIS:\n              </div>\n              <div class="col">\n                <span class="key">Inserções</span>\n                <span class="value">'.concat(e.data.soma_insercoes,'</span>\n              </div>\n              <div class="col">\n                <span class="key">Deduções</span>\n                <span class="value">').concat(e.data.soma_deducoes,'</span>\n              </div>\n              <div class="col text-').concat("0,00"===e.data.divergencia_registros?"blue":"red",'">\n                <span class="key">Inserções + Deduções</span>\n                <span class="value">').concat(e.data.divergencia_registros,'</span>\n              </div>\n              <div class="col text-').concat("0,00"===e.data.divergencia_emenda?"blue":"red",'">\n                <span class="key">Emenda - Inserções</span>\n                <span class="value">').concat(e.data.divergencia_emenda,"</span>\n              </div>\n            </div>\n            ")).appendTo(i)})),c["a"].get("/api/loa/emendaloaregistrocontabil/?emendaloa=".concat(s,"&get_all=true")).then((function(i){n&&t.html(""),e.each(i.data,(function(n,i){if(!(t.find('.item-rc[pk="'.concat(n.id,'"]')).length>0)){var o=a('<div class="item-rc" pk="'.concat(n.id,'"></div>'));o.appendTo(t);var r=n.__str__,s=r.search(/(\d) /g),p=0;while(s>0&&s<15&&p<20)r=r.replace(/^R\$/g,"R$ "),s=r.search(/(\d) /g),p+=1;r=r.split(" - "),r[0]="<strong>".concat(r[0],"</strong>"),r=r.join(" - "),r=r.replaceAll(" ","&nbsp;"),a('<span class="texto">'.concat(r,"</span>")).appendTo(o),a('<span class="btn btn-sm btn-delete text-danger"><i class="far fa-trash-alt"></i></span>').appendTo(o).click((function(n){var i=n.target.closest(".item-rc").getAttribute("pk");c["a"].delete("/api/loa/emendaloaregistrocontabil/".concat(i,"/")).then((function(a){d.trigger("change"),n.target.closest(".item-rc").remove(),h(),v.src="".concat(l,"/view/?page=1&u=").concat(Date.now())})).catch((function(n){e.isString(n.response)||e.isString(n.response.data)?a('<div class="alert alert-danger">\n                        '.concat(n.message,"\n                        </div>")).appendTo(t):e.forOwn(n.response.data,(function(n,i){d.find("input[name=despesa_".concat(i,"], input[name=").concat(i,"_despesa]")).addClass("is-invalid"),a('<div class="alert alert-danger">\n                        '.concat(e.isString(n)?n:n[0],"\n                        </div>")).appendTo(t)}))}))}))}}))}))},h(),_=d.find('input[name="ano_loa"')[0].value,b=d.find(".busca-render"),y=d.find('input[name="busca_despesa"]'),w=d.find("#add_registro"),A=d.find("#clean_form_search"),A.click((function(a){w[0].data=null,d.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid")})),w.click((function(n){var t=w[0].data,i={};i.emendaloa=s,i.despesa=t,i.codigo=d.find('input[name="despesa_codigo"]').val(),i.orgao=d.find('input[name="despesa_orgao"]').val(),i.unidade=d.find('input[name="despesa_unidade"]').val(),i.especificacao=d.find('input[name="despesa_especificacao"]').val(),i.natureza=d.find('input[name="despesa_natureza"]').val(),i.fonte=d.find('input[name="despesa_fonte"]').val(),i.valor=d.find('input[name="valor_despesa"]').val(),b.html("");var o=a('<div class="inner"></div>');c["a"].post("/api/loa/emendaloaregistrocontabil/create_for_emendaloa_update/",i).then((function(e){w[0].data=null,d.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid"),a('<div class="alert alert-info>Registro de Despesa Adicionado com sucesso.</div>').appendTo(o),h(),v.src="".concat(l,"/view/?page=1&u=").concat(Date.now()),d.trigger("change")})).catch((function(n){e.isString(n.response)||e.isString(n.response.data)?a('<div class="alert alert-danger">\n              '.concat(n.message,"\n              </div>")).appendTo(o):e.forOwn(n.response.data,(function(n,t){d.find("input[name=despesa_".concat(t,"], input[name=").concat(t,"_despesa]")).addClass("is-invalid"),a('<div class="alert alert-danger">\n              '.concat(e.isString(n)?n:n[0],"\n              </div>")).appendTo(o)}))})).finally((function(){o.appendTo(b)}))})),y.keyup((function(n){if(""===n.target.value.trim())return w[0].data=null,d.find('input[name^="despesa_"]').attr("readonly",!1),d.find('input[name^="despesa_"], input[name$="_despesa"]').removeClass("is-invalid"),void b.html("");c["a"].get("/api/loa/despesaconsulta/search/?page_size=10&ano=".concat(_,"&q=").concat(n.target.value)).then((function(t){b.html("");var i=a('<div class="inner"></div>');if(i.appendTo(b),e.isEmpty(t.data.results))w[0].data=null,d.find('input[name^="despesa_"]').attr("readonly",!1),a('<div class="alert alert-warning">\n              Nenhuma despesa encontrada nos anexos da LOA com esta informação. Você pode ainda fazer o registro manualmente no formulário acima.\n            </div>').appendTo(i);else if(t.data.pagination.total_entries>10){var o='<div class="alert alert-warning">\n              <em>Mostrando 10 primeiros resultados de '.concat(t.data.pagination.total_entries,".<br>Informe mais termos no campo de busca para reduzir os resultados.</em>\n            </div>");a(o).appendTo(i)}var r=n.target.value.trim().split(" ");e.each(t.data.results,(function(n,t){var o="\n                Órgão...: ".concat(n.cod_orgao," - ").concat(n.esp_orgao,"<br>\n                Und Orç.: ").concat(n.cod_unidade," - ").concat(n.esp_unidade,"<br>\n                Código..: ").concat(n.codigo," - ").concat(n.especificacao,"<br>\n                Natureza: ").concat(n.cod_natureza," - ").concat(n.esp_natureza," // Fonte: ").concat(n.cod_fonte,"<br>\n                Val.Orç.: ").concat(n.str_valor," | Saldo: ").concat(n.str_saldo);e.each(r,(function(a,e){var n=new RegExp("(".concat(a,")"),"ig");o=o.replace(n,'<strong class="highlight">$1</strong>')}));var c='<div class="small item" pk="'.concat(n.id,'">\n                ').concat(o,"\n              </div>"),s=a(c).appendTo(i);s.click((function(a){d.find('input[name="despesa_codigo"]').val(n.codigo),d.find('input[name="despesa_orgao"]').val(n.cod_orgao),d.find('input[name="despesa_unidade"]').val(n.cod_unidade),d.find('input[name="despesa_especificacao"]').val(n.especificacao),d.find('input[name="despesa_natureza"]').val(n.cod_natureza),d.find('input[name="despesa_fonte"]').val(n.cod_fonte),d.find('input[name^="despesa_"]').attr("readonly",!0);var e=a.currentTarget.getAttribute("pk");w[0].data=e,b.html("")}))}))})).catch((function(){}))})),d.keypress((function(a){if(13===a.keyCode){if(a.preventDefault(),a.target===y[0]){var e=b.find(".inner"),n=e.children();1===n.length&&n.trigger("click")}return!1}})),d.find('select[name="fase"]').change((function(a){var e=a.target;"10"===e.value?e.classList.add("is-invalid"):e.classList.remove("is-invalid")})),d.change((function(a){var e={},n=a.target.name,t=a.target.value;if(""!==n){var i="/";v.style.opacity=.35;var o=a.target.getAttribute("parlamentar_id");if(null!==o)e["valor"]=t,e["parlamentar_id"]=o,i="/updatevalorparlamentar/";else{if("lineHeight"===n)return void(v.src="".concat(l,"/view/?page=1&lineHeight=").concat(t,"&u=").concat(Date.now()));if("espacoAssinatura"===n)return void(v.src="".concat(l,"/view/?page=1&espacoAssinatura=").concat(a.target.checked,"&u=").concat(Date.now()));"parl_assinantes"===n?(i="/update_parlassinantes/",e["parlamentar_id"]=t,e["checked"]=a.target.checked):"valor"===n?(i="/updatevaloremenda/",e["valor"]=t):e[n]=t}c["a"].patch("".concat(l).concat(i),e).then((function(a){d.find('input[name="lineHeight"]').val(a.data.metadata.style.lineHeight),d.find('input[name="valor"]').val(a.data.valor),"tipo"===n&&window.location.reload(),h(!0),v.src="".concat(l,"/view/?page=1&u=").concat(Date.now())})).catch((function(a){window.location.reload()}))}})),d.trigger("change");case 28:case"end":return o.stop()}}),o)})));return function(a){return o.apply(this,arguments)}}(),n.AgrupamentoCRUD=function(){var e=a(".container-loa");e.hasClass("agrupamento-update")&&n.AgrupamentoCrudUPDATE(e)},n.AgrupamentoCrudUPDATE=function(n){var t=window.location.href.matchAll(/agrupamento\/(\d+)\//g).next().value[1],i=n.find("form"),o="/api/loa/agrupamento/".concat(t),r=i.find(".registro-render"),s=function(){r.html(""),a('<div class="inner"></div>').appendTo(r),a('<div class="footer"></div>').appendTo(r)};s();var d=function(){var n=r.find(".inner");c["a"].get("/api/loa/agrupamentoregistrocontabil/?agrupamento=".concat(t,"&get_all=true")).then((function(t){e.each(t.data,(function(e,t){if(!(n.find('.item-rc[pk="'.concat(e.id,'"]')).length>0)){var o=a('<div class="item-rc" pk="'.concat(e.id,'"></div>'));o.appendTo(n);var r=e.__str__,s=r.search(/(\d)%/g),l=0;while(s>0&&s<6&&l<10)r=" "+r,s=r.search(/(\d)%/g),l+=1;r=r.split(" - "),r[0]="<strong>".concat(r[0],"</strong>"),r=r.join(" - "),r=r.replaceAll(" ","&nbsp;"),a('<span class="texto">'.concat(r,"</span>")).appendTo(o),a('<span class="btn btn-sm btn-delete text-danger"><i class="far fa-trash-alt"></i></span>').appendTo(o).click((function(a){var e=a.target.closest(".item-rc").getAttribute("pk");c["a"].delete("/api/loa/agrupamentoregistrocontabil/".concat(e,"/")).then((function(e){i.trigger("change"),a.target.closest(".item-rc").remove(),d()}))}))}}))}))};d();var l=i.find('input[name="ano_loa"')[0].value,p=i.find(".busca-render"),u=i.find('input[name="busca_despesa"]'),f=i.find("#add_registro"),v=i.find("#clean_form_search");v.click((function(a){f[0].data=null,i.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid")})),f.click((function(n){var o=f[0].data,r={};r.agrupamento=t,r.despesa=o,r.codigo=i.find('input[name="despesa_codigo"]').val(),r.orgao=i.find('input[name="despesa_orgao"]').val(),r.unidade=i.find('input[name="despesa_unidade"]').val(),r.especificacao=i.find('input[name="despesa_especificacao"]').val(),r.natureza=i.find('input[name="despesa_natureza"]').val(),r.fonte=i.find('input[name="despesa_fonte"]').val(),r.percentual=i.find('input[name="perc_despesa"]').val(),p.html("");var s=a('<div class="inner"></div>');c["a"].post("/api/loa/agrupamentoregistrocontabil/create_for_agrupamento_update/",r).then((function(e){f[0].data=null,i.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid"),i.find('input[name="perc_despesa"]').val("100,00"),a('<div class="alert alert-info>Registro de Despesa Adicionado com sucesso.</div>').appendTo(s),d(),i.trigger("change")})).catch((function(n){e.isString(n.response)||e.isString(n.response.data)?a('<div class="alert alert-danger">\n              '.concat(n.message,"\n              </div>")).appendTo(s):e.forOwn(n.response.data,(function(n,t){i.find("input[name=despesa_".concat(t,"], input[name=").concat(t,"_despesa]")).addClass("is-invalid"),a('<div class="alert alert-danger">\n              '.concat(e.isString(n)?n:n[0],"\n              </div>")).appendTo(s)}))})).finally((function(){s.appendTo(p)}))})),u.keyup((function(n){if(i.find('input[name^="despesa_"], input[name$="_despesa"]').removeClass("is-invalid"),""===n.target.value.trim())return f[0].data=null,i.find('input[name^="despesa_"]').attr("readonly",!1),void p.html("");c["a"].get("/api/loa/despesaconsulta/search/?page_size=5&ano=".concat(l,"&q=").concat(n.target.value)).then((function(t){p.html("");var o=a('<div class="inner"></div>');o.appendTo(p),e.isEmpty(t.data.results)&&(f[0].data=null,i.find('input[name^="despesa_"]').attr("readonly",!1),a('<div class="alert alert-warning">\n              Nenhuma despesa encontrada nos anexos da LOA com esta informação. Você pode ainda fazer o registro manualmente no formulário acima.\n            </div>').appendTo(o));var r=n.target.value.trim().split(" ");e.each(t.data.results,(function(n,t){var c="\n                Órgão...: ".concat(n.cod_orgao," - ").concat(n.esp_orgao,"<br>\n                Und Orç.: ").concat(n.cod_unidade," - ").concat(n.esp_unidade,"<br>\n                Código..: ").concat(n.codigo," - ").concat(n.especificacao,"<br>\n                Natureza: ").concat(n.cod_natureza," - ").concat(n.esp_natureza," // Fonte: ").concat(n.cod_fonte,"<br>\n                Val.Orç.: ").concat(n.str_valor," | Saldo: ").concat(n.str_saldo);e.each(r,(function(a,e){var n=new RegExp("(".concat(a,")"),"ig");c=c.replace(n,'<strong class="highlight">$1</strong>')}));var s='<div class="small item" pk="'.concat(n.id,'">\n                ').concat(c,"\n              </div>"),d=a(s).appendTo(o);d.click((function(a){i.find('input[name="despesa_codigo"]').val(n.codigo),i.find('input[name="despesa_orgao"]').val(n.cod_orgao),i.find('input[name="despesa_unidade"]').val(n.cod_unidade),i.find('input[name="despesa_especificacao"]').val(n.especificacao),i.find('input[name="despesa_natureza"]').val(n.cod_natureza),i.find('input[name="despesa_fonte"]').val(n.cod_fonte),i.find('input[name^="despesa_"]').attr("readonly",!0);var e=a.currentTarget.getAttribute("pk");f[0].data=e,p.html("")}))}))})).catch((function(){}))}));var m=i.find(".emendaloa-selecteds"),g=i.find(".busca-render-emendaloa"),h=i.find('input[name="busca_emendaloa"]'),_=function(){c["a"].get("/api/loa/agrupamento/".concat(t,"/emendas/?&get_all=true")).then((function(n){m.html("");var i=a('<div class="inner"></div>');i.appendTo(m),e.each(n.data,(function(n,o){var r=a('<div class="inner-item"></div>').appendTo(i),s=[];0===n.tipo?e.each(n.str_parlamentares,(function(a,e){a=a.split(" - "),s.push(a[1])})):s=n.str_parlamentares,s=s.join("<br>");var d='<div class="item-emendaloa" pk="'.concat(n.id,'">\n                Valor da Emenda ').concat(0!==n.tipo?"Impositiva":"Modificativa",": <strong>R$ ").concat(n.str_valor,"</strong><br>\n                <strong>").concat(n.indicacao,'</strong><br>\n                <a href="').concat(n.link_detail_backend,'/edit" target="_blank">').concat(n.finalidade,"</a><br>\n                <small>").concat(s,'</small><br>\n                <span class="fase ').concat(10===n.fase?"bg-danger":12===n.fase?"bg-warning":"bg-green",'">').concat(n.str_fase,"</span>\n              </div>");a(d).appendTo(r);var l=a('<div class="inner-actions"></div>').appendTo(r);a('<span class="btn btn-delete text-danger" pk="'.concat(n.id,'" title="Remover Emenda do Agrupamento."><i class="far fa-trash-alt"></i></span>')).appendTo(l).click((function(e){var n=e.currentTarget.getAttribute("pk"),o={};o.agrupamento=t,o.emendaloa=n,c["a"].post("/api/loa/agrupamentoemendaloa/delete/",o).then((function(a){_()})).catch((function(e){g.find(".alert").remove(),i.prepend(a('<div class="alert alert-danger">\n                    '.concat(e.message,"\n                    </div>")))}))}))}))}))};_(),h.keyup((function(n){if(!n.ctrlKey)if(""!==n.target.value.trim())if(n.target.value.trim().length<3)g.html("Digite ao menos três letras");else{var i=n.target.value.trim().split(" ").filter((function(a){return a.length>=3}));c["a"].get("/api/loa/emendaloa/search/?&get_all=true&ano=".concat(l,"&q=").concat(i.join(" "))).then((function(n){g.html("");var o=a('<div class="inner"></div>');o.appendTo(g),e.each(n.data,(function(n,r){if(!(m.find('.item-emendaloa[pk="'.concat(n.id,'"]')).length>0)){var s=a('<div class="inner-item"></div>').appendTo(o),d=[];0===n.tipo?e.each(n.str_parlamentares,(function(a,e){a=a.split(" - "),d.push(a[1])})):d=n.str_parlamentares,d=d.join("<br>");var l='<div class="item-emendaloa" pk="'.concat(n.id,'">\n                Valor da Emenda ').concat(0!==n.tipo?"Impositiva":"Modificativa",": <strong>R$ ").concat(n.str_valor,"</strong><br>\n                <strong>").concat(n.indicacao,'</strong><br>\n                <a href="').concat(n.link_detail_backend,'/edit" target="_blank">').concat(n.finalidade,"</a><br>\n                <small>").concat(d,'</small><br>\n                <span class="fase ').concat(10===n.fase?"bg-danger":12===n.fase?"bg-warning":"bg-green",'">').concat(n.str_fase,"</span>\n              </div>");if(e.each(i,(function(a,e){var n=new RegExp("(".concat(a,")"),"ig");l=l.replace(n,'<strong class="highlight">$1</strong>')})),a(l).appendTo(s),10!==n.fase){var p=a('<div class="inner-actions"></div>').appendTo(s);a('<span class="btn text-blue" pk="'.concat(n.id,'" title="Adicionar Emenda ao Agrupamento."><i class="far fa-arrow-alt-circle-right"></i></i></span>')).appendTo(p).click((function(e){var n=e.currentTarget.getAttribute("pk"),i={};i.agrupamento=t,i.emendaloa=n,i.emendaloa__fase=15,c["a"].post("/api/loa/agrupamentoemendaloa/",i).then((function(a){g.find('.item-emendaloa[pk="'.concat(a.data.emendaloa,'"]')).parent().remove(),_()})).catch((function(e){g.find(".alert").remove(),o.prepend(a('<div class="pt-2"><div class="alert alert-danger">\n                    '.concat(e.response.data[0],"\n                    </div></div>")))}))}))}}}))}))}else g.html("")})),i.keypress((function(a){if(13===a.keyCode){if(a.preventDefault(),a.target===u[0]){var e=p.find(".inner"),n=e.children();1===n.length&&n.trigger("click")}return!1}})),i.find('select[name="fase"]').change((function(a){var e=a.target;"10"===e.value?e.classList.add("is-invalid"):e.classList.remove("is-invalid")})),i.change((function(a){var e={},n=a.target.name,t=a.target.value,i="/";e[n]=t,c["a"].patch("".concat(o).concat(i),e).then((function(a){d()})).catch((function(a){}))})),i.trigger("change")},n.init=function(){n.LoaCRUD(),n.EmendaLoaCRUD(),n.AgrupamentoCRUD()},n.init()},a(document).ready((function(){a(".container-loa").length>0&&window.AppLOA()}))}.call(this,n("1157"),n("2ef0"))},d02c:function(a,e,n){}});
//# sourceMappingURL=loa.d5872774.js.map