"use strict";(self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[]).push([[797],{797:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sessaoplenaria-list"},[t("form-sessao-list",{attrs:{pagination:e.pagination},on:{nextPage:e.nextPage,previousPage:e.previousPage,currentPage:e.currentPage,changeFilter:e.changeFilter}}),t("div",{staticClass:"inner-list"},[e._l(e.sessoes,function(e,s){return t("sessao-plenaria-item-list",{key:s+1,attrs:{sessao:e}})}),0===e.sessoes.length&&e.init?t("div",{staticClass:"empty-list"},[e._v(" Não foram encontradas Sessões Plenárias com seus critérios de busca! ")]):e._e(),e.init?e._e():t("div",{staticClass:"empty-list"},[e._v(" Carregando listagem... ")])],2)],1)},i=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-sessao-list"},[t("year-exists-in-model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"sessaoplenaria",label:"Filtre por Ano"},on:{change:t=>e.form_filter.year=t}}),t("month-select",{staticClass:"form-opacity",on:{change:t=>e.form_filter.month=t}}),t("model-select",{staticClass:"form-opacity",attrs:{app:"sessao",model:"tiposessaoplenaria",label:"Filtre por Tipo de Sessão",choice:"nome",ordering:"nome"},on:{change:t=>e.form_filter.tipo=t}}),t("pagination",{attrs:{pagination:e.pagination},on:{nextPage:e.nextPage,previousPage:e.previousPage,currentPage:e.currentPage}})],1)},n=[],l=function(){var e=this,t=e._self._c;return t("div",[t("b-form-select",{attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},r=[],u={name:"year-exists-in-model-select",props:["app","model","label"],data(){return{selected:null,options:[{value:null,text:this.label}]}},watch:{selected:function(e,t){this.$emit("change",e)}},methods:{fetch(){this.utils.getYearsChoiceList(this.app,this.model).then(e=>{this.options=e.data,this.options.unshift({value:null,text:this.label})}).catch(e=>this.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de anos",time:5}))}},created:function(){this.fetch()}},c=u,h=s(1656),p=(0,h.A)(c,l,r,!1,null,null,null),m=p.exports,d=s(1580),g=function(){var e=this,t=e._self._c;return t("div",[t("b-form-select",{attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},f=[],_={name:"month-select",data(){return{selected:null,options:[{value:null,text:"Filtre por mês..."},{value:1,text:"Janeiro"},{value:2,text:"Fevereiro"},{value:3,text:"Março"},{value:4,text:"Abril"},{value:5,text:"Maio"},{value:6,text:"Junho"},{value:7,text:"Julho"},{value:8,text:"Agosto"},{value:9,text:"Setembro"},{value:10,text:"Outubro"},{value:11,text:"Novembro"},{value:12,text:"Dezembro"}]}},watch:{selected:function(e,t){this.$emit("change",e)}}},v=_,x=(0,h.A)(v,g,f,!1,null,null,null),P=x.exports,$=s(2274),b={name:"form-sessao-list",props:["pagination"],components:{YearExistsInModelSelect:m,MonthSelect:P,ModelSelect:$.A,Pagination:d.A},data(){return{form_filter:{year:null,month:null,tipo:null}}},watch:{"form_filter.year":function(e){this.$emit("changeFilter",this.form_filter)},"form_filter.month":function(e){this.$emit("changeFilter",this.form_filter)},"form_filter.tipo":function(e){this.$emit("changeFilter",this.form_filter)}},methods:{currentPage(e){this.$emit("currentPage",e)},nextPage(){this.$emit("nextPage")},previousPage(){this.$emit("previousPage")}}},S=b,y=(0,h.A)(S,o,n,!1,null,null,null),C=y.exports,L=function(){var e=this,t=e._self._c;return t("router-link",{class:"sessao-plenaria-item-list",attrs:{to:{name:"sessao_plenaria_online_link",params:{id:e.sessao.id}}}},[t("h3",{staticClass:"tit"},[e._v(" "+e._s(e.titulo)+" ")]),t("div",{staticClass:"subtitulo"},[t("span",[e._v(e._s(e.subtitulo))]),t("span",{staticClass:"separator"},[e._v(" – ")]),t("span",[e._v(e._s(e.date_text))])])])},F=[],M=s(5353),k=s(2543),A={name:"sessao-plenaria-item-list",props:["sessao"],data(){return{app:["sessao","parlamentares"],model:["sessaoplenaria","sessaolegislativa","tiposessaoplenaria","legislatura"],data_inicio:new Date,sessao_legislativa:{numero:""},tipo:{nome:""},legislatura:{numero:""},metadata:{sessao_legislativa:{app:"parlamentares",model:"sessaolegislativa",id:this.sessao.sessao_legislativa},legislatura:{app:"parlamentares",model:"legislatura",id:this.sessao.legislatura},tipo:{app:"sessao",model:"tiposessaoplenaria",id:this.sessao.tipo}}}},watch:{sessao:function(e){this.updateSessao(),this.fetch()}},computed:{...(0,M.aH)({cache:e=>e.cache}),titulo:function(){let e=this.sessao,t=this.tipo,s=this.data_inicio,a=`${e.numero}ª ${t.nome}`;return 1===t.tipo_numeracao&&(a+=` da ${s.getDate()>15?2:1}ª Quinzena do mês de ${this.month_text(s.getMonth())}`),2===t.tipo_numeracao&&(a+=` do mês de ${this.month_text(s.getMonth())}`),t.tipo_numeracao<=10&&(a+=` de ${s.getFullYear()}`),a},subtitulo:function(){return`${this.sessao_legislativa.numero}ª Sessão Legislativa da\n              ${this.legislatura.numero}ª Legislatura`},date_text:function(){return`${this.data_inicio.getDate()} de\n              ${this.month_text(this.data_inicio.getMonth())} de\n              ${this.data_inicio.getFullYear()} – ${this.sessao.hora_inicio}`}},methods:{fetch(e){let t=this,s=k.clone(t.metadata);k.mapKeys(s,function(e,a){let i=s[a];t.getObject(i).then(e=>{t[a]=e})})},updateSessao(){this.data_inicio=this.stringToDate(this.sessao.data_inicio,"yyyy-mm-dd","-"),this.metadata.sessao_legislativa.id=this.sessao.sessao_legislativa,this.metadata.tipo.id=this.sessao.tipo,this.metadata.legislatura.id=this.sessao.legislatura}},mounted:function(){this.updateSessao(),this.fetch()}},w=A,D=(0,h.A)(w,L,F,!1,null,null,null),N=D.exports,Y={name:"sessao-list",components:{FormSessaoList:C,SessaoPlenariaItemList:N},data(){return{init:!1,app:["sessao"],model:["sessaoplenaria","tiposessaoplenaria"],ordering:"-data_inicio, -hora_inicio, -id",sessoes:[],pagination:{},form_filter:{year:null,month:null,tipo:null}}},methods:{currentPage(e){this.fetchSessaoList(e)},nextPage(){return null!==this.pagination.next_page?this.fetchSessaoList(this.pagination.next_page):null},previousPage(){return null!==this.pagination.previous_page?this.fetchSessaoList(this.pagination.previous_page):null},changeFilter(e){this.form_filter=e,this.fetchSessaoList(1)},fetch(e){this.fetchSessaoList(1)},fetchSessaoList(e=null){let t=this;null===e&&(e=t.pagination.page);let s="",a=this.form_filter;return null!==a.year&&(s+=`&year=${a.year}`),null!==a.month&&(s+=`&month=${a.month}`),null!==a.tipo&&(s+=`&tipo=${a.tipo}`),t.utils.getModelOrderedList(t.app[0],t.model[0],t.ordering,null===e?1:e,s).then(e=>{t.init=!0,t.sessoes=[],t.$nextTick().then(function(){t.sessoes=e.data.results,t.pagination=e.data.pagination})}).catch(s=>{if(1!==e)return t.fetchSessaoList(1).catch(()=>{t.init=!0,t.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de Sessões.",time:5})})})}},created:function(){let e=this;e.fetchSessaoList(1)}},j=Y,J=(0,h.A)(j,a,i,!1,null,null,null),O=J.exports}}]);