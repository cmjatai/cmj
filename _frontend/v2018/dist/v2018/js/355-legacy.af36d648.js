"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[355],{16034:function(t,a,e){var i=e(46518),s=e(32357).values;i({target:"Object",stat:!0},{values:function(t){return s(t)}})},32357:function(t,a,e){var i=e(43724),s=e(79039),n=e(79504),o=e(42787),r=e(71072),c=e(25397),l=e(48773).f,d=n(l),u=n([].push),m=i&&s(function(){var t=Object.create(null);return t[2]=2,!d(t,2)}),p=function(t){return function(a){var e,s=c(a),n=r(s),l=m&&null===o(s),p=n.length,v=0,h=[];while(p>v)e=n[v++],i&&!(l?e in s:d(s,e))||u(h,t?[e,s[e]]:s[e]);return h}};t.exports={entries:p(!0),values:p(!1)}},34782:function(t,a,e){var i=e(46518),s=e(34376),n=e(33517),o=e(20034),r=e(35610),c=e(26198),l=e(25397),d=e(97040),u=e(78227),m=e(70597),p=e(67680),v=m("slice"),h=u("species"),f=Array,_=Math.max;i({target:"Array",proto:!0,forced:!v},{slice:function(t,a){var e,i,u,m=l(this),v=c(m),g=r(t,v),b=r(void 0===a?v:a,v);if(s(m)&&(e=m.constructor,n(e)&&(e===f||s(e.prototype))?e=void 0:o(e)&&(e=e[h],null===e&&(e=void 0)),e===f||void 0===e))return p(m,g,b);for(i=new(void 0===e?f:e)(_(b-g,0)),u=0;g<b;g++,u++)g in m&&d(i,u,m[g]);return i.length=u,i}})},77355:function(t,a,e){e.r(a),e.d(a,{default:function(){return X}});var i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"sessao-plenaria-online"},[t.sessao?[a("sessao-plenaria-topo",{attrs:{sessao:t.sessao}}),a("pauta-online",{attrs:{sessao:t.sessao}})]:t._e()],2)},s=[],n=e(7180),o=(e(44114),function(){var t=this,a=t._self._c;return a("div",{class:"sessao-plenaria-topo"},[a("div",{staticClass:"tit"},[t._v(" "+t._s(t.titulo)+" ")]),a("div",{staticClass:"subtitulo"},[a("span",[t._v(t._s(t.subtitulo))]),t._v(" – "),a("span",[t._v(t._s(t.date_text))])])])}),r=[],c=(e(28706),e(2543)),l={name:"sessao-plenaria-topo",props:["sessao"],data:function(){return{app:["sessao","parlamentares"],model:["sessaoplenaria","sessaolegislativa","tiposessaoplenaria","legislatura"],data_inicio:new Date,sessao_legislativa:{numero:""},tipo:{nome:""},legislatura:{numero:""},metadata:{sessao_legislativa:{app:"parlamentares",model:"sessaolegislativa",id:this.sessao.sessao_legislativa},legislatura:{app:"parlamentares",model:"legislatura",id:this.sessao.legislatura},tipo:{app:"sessao",model:"tiposessaoplenaria",id:this.sessao.tipo}}}},watch:{sessao:function(t){this.updateSessao(),this.fetch()}},computed:{titulo:function(){var t=this.sessao,a=this.tipo,e=this.data_inicio;return"".concat(t.numero,"ª ").concat(a.nome," da\n              ").concat(e.getDate()>15?2:1,"ª Quinzena do Mês de\n              ").concat(this.month_text(e.getMonth())," de\n              ").concat(e.getFullYear(),"\n              ")},subtitulo:function(){return"".concat(this.sessao_legislativa.numero,"ª Sessão Legislativa da\n              ").concat(this.legislatura.numero,"ª Legislatura")},date_text:function(){return"".concat(this.data_inicio.getDate()," de\n              ").concat(this.month_text(this.data_inicio.getMonth())," de\n              ").concat(this.data_inicio.getFullYear()," – ").concat(this.sessao.hora_inicio)}},methods:{fetch:function(t){var a=this;c.mapKeys(a.metadata,function(t,e){var i=a.metadata[e];a.getObject(i).then(function(t){a[e]=t})})},updateSessao:function(){this.data_inicio=this.stringToDate(this.sessao.data_inicio,"yyyy-mm-dd","-"),this.metadata.sessao_legislativa.id=this.sessao.sessao_legislativa,this.metadata.tipo.id=this.sessao.tipo,this.metadata.legislatura.id=this.sessao.legislatura}},mounted:function(){this.updateSessao(),this.fetch()}},d=l,u=e(81656),m=(0,u.A)(d,o,r,!1,null,null,null),p=m.exports,v=function(){var t=this,a=t._self._c;return a("div",{staticClass:"pauta-online"},[0===t.itens.ordemdia_list.length&&t.init?a("div",{staticClass:"empty-list"},[t._v(" Não existem Itens na Ordem do Dia com seus critérios de busca! ")]):t._e(),t.init?t._e():a("div",{staticClass:"empty-list"},[t._v(" Carregando listagem... ")]),a("div",{class:["item-expediente",t.nivel(t.NIVEL3,t.itens.expedientesessao_list.length>0)]},[a("div",{staticClass:"inner",domProps:{innerHTML:t._s(t.expediente(1))}})]),a("div",{staticClass:"container-expedientemateria"},[t.itensDoExpediente.length?a("div",{staticClass:"titulo-container"},[t._v("Matérias do Grande Expediente")]):t._e(),a("div",{staticClass:"inner"},t._l(t.itensDoExpediente,function(t){return a("item-de-pauta",{key:"exp".concat(t.id),attrs:{item:t,type:"expedientemateria"}})}),1)]),a("div",{class:["item-expediente",t.nivel(t.NIVEL3,t.itens.expedientesessao_list.length>0)]},[a("div",{staticClass:"inner",domProps:{innerHTML:t._s(t.expediente(3))}})]),a("div",{staticClass:"container-ordemdia"},[t.itensDaOrdemDia.length?a("div",{staticClass:"titulo-container"},[t._v("Matérias da Ordem do Dia")]):t._e(),a("div",{staticClass:"inner"},t._l(t.itensDaOrdemDia,function(t){return a("item-de-pauta",{key:"od".concat(t.id),attrs:{item:t,type:"ordemdia"}})}),1)]),a("div",{class:["item-expediente",t.nivel(t.NIVEL3,t.itens.expedientesessao_list.length>0)]},[a("div",{staticClass:"inner",domProps:{innerHTML:t._s(t.expediente(4))}})])])},h=[],f=(e(2008),e(18111),e(22489),e(26099),function(){var t=this,a=t._self._c;return a("div",{class:["item-de-pauta",t.type]},[a("div",{class:["empty-list",void 0===t.materia.id?"":"d-none"]},[t._v(" Carregando Matéria... ")]),t.votacaoAberta&&t.user&&t.user.votante?a("voto-parlamentar",{attrs:{item:t.item,type:t.type}}):t._e(),a("div",{staticClass:"status-votacao"},[t.registro&&!t.votacaoAberta&&4!=t.item.tipo_votacao?a("div",{staticClass:"votos"},[t.registro.numero_abstencoes?a("div",{staticClass:"voto-abs"},[a("span",{staticClass:"valor"},[t._v(t._s(t.registro.numero_abstencoes))]),a("span",{staticClass:"titulo"},[t._v("ABS")])]):t._e(),a("div",{staticClass:"voto-nao"},[a("span",{staticClass:"valor"},[t._v(t._s(t.registro.numero_votos_nao))]),a("span",{staticClass:"titulo"},[t._v("NÃO")])]),a("div",{staticClass:"voto-sim"},[a("span",{staticClass:"valor"},[t._v(t._s(t.registro.numero_votos_sim))]),a("span",{staticClass:"titulo"},[t._v("SIM")])])]):t._e(),a("div",{class:[t.statusVotacao]},[t.votacaoPedidoPrazoAberta?a("span",[t._v("VOTAÇÃO ABERTA PARA PEDIDO DE ADIAMENTO")]):t.votacaoAberta?a("span",[t._v("VOTAÇÃO ABERTA")]):t.item.resultado?a("span",[t._v(t._s(t.item.resultado))]):a("span",[t._v("Tramitando")])])]),a("materia-pauta",{attrs:{materia:t.materia,type:t.type}}),a("div",{class:["item-body"]}),a("div",{class:["item-body",void 0!==t.materia.id&&t.materia.anexadas.length>0?"col-anexadas":""]},[a("div",{staticClass:"col-1-body"},[a("div",{staticClass:"status-tramitacao"},[a("div",{class:["observacao",t.nivel(t.NIVEL3,t.observacao.length>0)],domProps:{innerHTML:t._s(t.observacao)}})]),a("div",{class:["sub-containers",0===t.itensLegislacaoCitada.length?"d-none":"container-legis-citada"]},[t._m(0),a("div",{staticClass:"inner"},t._l(t.itensLegislacaoCitada,function(e){return a("button",{key:"legiscit".concat(e.id),staticClass:"btn btn-link",attrs:{type:"button","data-toggle":"modal","data-target":"modal-legis-citada-".concat(e.id)},on:{click:function(a){t.modal_legis_citada=e}}},[t._v(" "+t._s(e.__str__)+" ")])}),0)]),a("div",{class:["sub-containers",t.nivel(t.NIVEL2,t.itensDocumentosAcessorios.length>0),0===t.itensDocumentosAcessorios.length?"d-none":"container-docs-acessorios"]},[t._m(1),a("div",{staticClass:"inner"},t._l(t.itensDocumentosAcessorios,function(e){return a("a",{key:"docsacc".concat(e.id),staticClass:"btn btn-link",attrs:{href:e.arquivo}},[t._v(" "+t._s(e.__str__)+" ")])}),0)])]),a("div",{staticClass:"col-2-body"},[a("div",{class:["sub-containers",t.nivel(t.NIVEL1,t.itensAnexados.length>0)]},[t._m(2),a("div",{staticClass:"inner"},t._l(t.itensAnexados,function(e){return a("div",{key:"".concat(t.type).concat(e.id)},[a("materia-pauta",{attrs:{materia:e,type:t.type}})],1)}),0)])])]),t.modal_legis_citada?a("norma-simple-modal-view",{attrs:{html_id:"modal-legis-citada-".concat(t.modal_legis_citada.id),modal_norma:null,idd:t.modal_legis_citada.norma}}):t._e()],1)}),_=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"title"},[a("span",[t._v(" Legislação Citada ")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"title"},[a("span",[t._v(" Documentos Acessórios ")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"title"},[a("span",[t._v(" Matérias Anexadas em Tramitação")])])}],g=e(20748),b=e(24634),x=(e(74423),e(34782),e(27495),e(21699),e(25440),function(){var t=this,a=t._self._c;return a("div",{class:["materia-pauta"],attrs:{id:"mp".concat(t.type,"-").concat(t.materia.id)}},[a("a",{staticClass:"epigrafe",attrs:{href:t.materia.link_detail_backend,target:"_blank"}},[t._v(t._s(t.tipo_string)+" nº "+t._s(t.materia.numero)+"/"+t._s(t.materia.ano))]),a("div",{class:["item-header",t.tipo_string?"":"d-none"]},[a("div",{key:"".concat(t.type,"-").concat(t.materia.id),staticClass:"link-file",attrs:{id:"".concat(t.type,"-").concat(t.materia.id)}},[a("a",{class:["btn btn-link","link-file-".concat(t.materia.id),t.blob?"":"d-none"],on:{click:t.clickFile}},[a("i",{staticClass:"far fa-2x fa-file-pdf"})]),a("small",{class:t.baixando?"":"d-none"},[t._v("Baixando"),a("br"),t._v("Arquivo")]),a("a",{class:["btn btn-link","link-file-".concat(t.materia.id)],attrs:{href:t.materia.texto_original,target:"_blank"}},[a("i",{staticClass:"far fa-2x fa-file-pdf"})]),a("hr"),a("div",{key:"pp-".concat(t.type,"-").concat(t.materia.id),staticClass:"page-preview",attrs:{id:"pp-".concat(t.type,"-").concat(t.materia.id)}},[a("div",{staticClass:"btn btn-preview",on:{click:t.togglePreview}},[a("i",{class:["fas fa-eye",t.preview?"d-block":"d-none"]}),a("i",{class:["far fa-eye-slash",t.preview?"d-none":"d-block"]})]),a("div",{class:["preview-online",t.preview?"d-block":"d-none"],attrs:{id:"pon-".concat(t.materia.id)}},[a("span",{staticClass:"p-5"},[t._v(" Carregando imagem da primeira página da matéria... ")]),a("div",{staticClass:"preview-direction"},[a("div",{staticClass:"inner-direction btn-group"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.materia._paginas>1,expression:"materia._paginas > 1"}],staticClass:"btn btn-secondary preview-previous",on:{click:function(a){return t.changePage(-1)}}},[t._m(0)]),a("div",{staticClass:"preview-currentpage"},[t._m(1),a("div",[a("span",{staticClass:"currentpage"},[t._v(t._s(t.preview_page))]),t._v(" de "),a("span",{staticClass:"totalpage"},[t._v(t._s(t.materia._paginas))])])]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.materia._paginas>1,expression:"materia._paginas > 1"}],staticClass:"btn btn-secondary preview-next",on:{click:function(a){return t.changePage(1)}}},[t._m(2)])])]),a("div",{staticClass:"btn btn-danger",on:{click:t.togglePreview}},[t._v("X")]),a("img",{staticClass:"img-fluid",attrs:{loading:"lazy",src:"".concat(t.materia.texto_original,"?page=").concat(t.preview_page,"&dpi=190&u=").concat(t.utimes),title:"",alt:"Preview da Primeira Página do Documento..."}}),t.preview_loading?a("div",{staticClass:"loading"},[a("div",{staticClass:"loader"})]):t._e()])])]),a("div",{staticClass:"data-header"},[a("div",{staticClass:"detail-header"},[a("div",{staticClass:"protocolo-data"},[a("span",[t._v(" Protocolo: "),a("strong",[t._v(t._s(t.materia.numero_protocolo))])]),a("span",[t._v(t._s(t.data_apresentacao))])]),a("div",{staticClass:"autoria"},t._l(t.autores_list,function(e,i){return a("span",{key:"au".concat(i)},[t._v(t._s(e.nome))])}),0)]),a("div",{staticClass:"ementa",domProps:{innerHTML:t._s(t.materia.ementa)}}),a("div",{staticClass:"status-tramitacao"},[a("div",{class:["ultima_tramitacao",t.nivel(t.NIVEL2,null!==t.tramitacao.ultima)]},[a("strong",[t._v("Situação:")]),t._v(" "+t._s(t.tramitacao.status.descricao)),a("br"),a("strong",[t._v("Ultima Ação:")]),t._v(" "+t._s(t.tramitacao.ultima.texto)+" ")])])])])])}),C=[function(){var t=this,a=t._self._c;return a("i",{staticClass:"fas fa-chevron-left",attrs:{"aria-hidden":"true"}},[a("span",[t._v("Página Anterior")])])},function(){var t=this,a=t._self._c;return a("small",[a("em",[t._v("Página Atual")])])},function(){var t=this,a=t._self._c;return a("i",{staticClass:"fas fa-chevron-right",attrs:{"aria-hidden":"true"}},[a("span",[t._v("Próxima Página")])])}],y=(e(47764),e(62953),e(3296),e(27208),e(48408),e(14603),e(47566),e(98721),e(2543)),w={name:"materia-pauta",props:["materia","type"],data:function(){return{app:["materia"],model:["materialegislativa","tramitacao","anexada","autoria"],autores:{},tramitacao:{ultima:{},status:{}},tipo_string:"",blob:null,baixando:!1,preview:!1,preview_page:1,preview_loading:!1,paginas_abertas:[],utimes:0}},watch:{materia:function(t){var a=this;a.refresh()}},computed:{data_apresentacao:function(){try{var t=this.stringToDate(this.materia.data_apresentacao,"yyyy-mm-dd","-");return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())}catch(a){return""}},autores_list:{get:function(){return y.orderBy(this.autores,"nome")}}},mounted:function(){var t=this;t.blob||void 0===t.materia.id||t.refresh(),t.$root.$on("closePreviews",function(a){t.materia.id!==a&&(t.preview=!1)})},methods:{changePage:function(t){var a=this;a.preview_page+t>0&&a.preview_page+t<=a.materia._paginas&&(a.preview_page+=t,a.utimes++,a.preview_page>1&&!a.paginas_abertas.includes(a.preview_page)&&(a.preview_loading=!0,setTimeout(function(){a.preview_loading=!1,a.paginas_abertas.push(a.preview_page)},3e3)))},togglePreview:function(){var t=this;t.preview=!t.preview,t.preview_loading=t.preview,setTimeout(function(){t.preview_loading=!1},1e3),t.preview&&(t.$root.$emit("closePreviews",t.materia.id),setTimeout(function(){var a=document.getElementById("mp".concat(t.type,"-").concat(t.materia.id)),e=document.getElementsByClassName("main")[0],i=0,s=a;do{i+=s.offsetTop,s=s.offsetParent}while(s&&"BODY"!==s.tagName);e.scrollTo({top:i-120,behavior:"smooth"})},1e3))},fetchUltimaTramitacao:function(){var t=this;return t.utils.getByMetadata({action:"ultima_tramitacao",app:"materia",model:"materialegislativa",id:t.materia.id}).then(function(a){t.tramitacao.ultima=a.data,void 0!==t.tramitacao.ultima.id&&t.getObject({action:"",app:"materia",model:"statustramitacao",id:t.tramitacao.ultima.status}).then(function(a){t.tramitacao.status=a})})},clickFile:function(t){var a=window.URL.createObjectURL(this.blob);window.location=a},fetch:function(t){var a=this;void 0!==a.materia&&a.materia.id===t.id&&t.model===a.model[0]&&this.refresh()},refresh:function(){var t=this;void 0!==t.materia&&void 0!==t.materia.id&&(t.getObject({app:"materia",model:"tipomaterialegislativa",id:t.materia.tipo}).then(function(a){t.tipo_string=a.descricao}),t.$set(t,"autores",{}),t.$nextTick().then(function(){y.each(t.materia.autores,function(a){t.getObject({app:"base",model:"autor",id:a}).then(function(a){t.$set(t.autores,a.id,a),t.fetchUltimaTramitacao()})})}))}}},A=w,k=(0,u.A)(A,x,C,!1,null,null,null),D=k.exports,M=function(){var t=this,a=t._self._c;return a("div",{class:["voto-parlamentar"]},[a("div",{staticClass:"inner-voto"},[a("a",{staticClass:"btn btn-lg btn-success",attrs:{href:"#"},on:{click:function(a){return t.sendVoto("Sim")}}},[t._v("SIM")]),a("a",{staticClass:"btn btn-lg btn-danger",attrs:{href:"#"},on:{click:function(a){return t.sendVoto("Não")}}},[t._v("NÃO")]),a("a",{staticClass:"btn btn-lg btn-warning",attrs:{href:"#"},on:{click:function(a){return t.sendVoto("Abstenção")}}},[t._v("Abstenção")])]),a("div",{staticClass:"voto-result"},[t.voto?a("div",[t._v(" Voto Computado: "),a("strong",[t._v(t._s(t.voto.voto))])]):a("div",[t._v(" Voto não Computado ")])])])},T=[],P=e(32362),L=(e(16034),{name:"voto-parlamentar",props:["item","type"],components:{},data:function(){return{app:["sessao"],model:["votoparlamentar"],itens:{votoparlamentar_list:{}}}},watch:{},computed:{voto:function(){var t=this,a="ordemdia"===t.type?"ordem":"expediente",e=Object.values(t.itens.votoparlamentar_list).filter(function(e){return e.parlamentar===t.user.votante.parlamentar_id&&e[a]===t.item.id});return e.length>0?e[0]:null}},mounted:function(){this.refresh()},methods:{refresh:function(){var t=this;t.fetchModelOrderedList("sessao","votoparlamentar","",1,"&"+("ordemdia"===t.type?"ordem":"expediente")+"="+t.item.id)},fetch:function(t){if("post_delete"!==t.action){if("sessao"===t.app&&"votoparlamentar"===t.model){var a=this;a.getObject(t).then(function(e){e.ordem!==a.item.id&&e.expediente!==a.item.id||a.$set(a.itens["".concat(t.model,"_list")],t.id,e)})}}else this.$delete(this.itens["".concat(t.model,"_list")],t.id)},sendVoto:function(t){var a=this,e="ordemdia"===a.type?"ordem":"expediente",i=(0,P.A)({parlamentar:a.user.votante.parlamentar_id,voto:t,user:a.user.id},e,a.item.id);a.voto?this.utils.patchModel("sessao","votoparlamentar",a.voto.id,i).then(function(t){}).catch(function(t){}):this.utils.postModel("sessao","votoparlamentar",i).then(function(t){}).catch(function(t){})}}}),O=L,V=(0,u.A)(O,M,T,!1,null,null,null),$=V.exports,N=e(76264),S=e(74692),E=e(2543),j={name:"item-de-pauta",props:["item","type"],components:{MateriaPauta:D,VotoParlamentar:$,NormaSimpleModalView:N.A},data:function(){return{app:["materia","norma","sessao"],model:["materialegislativa","tramitacao","anexada","autoria","legislacaocitada","documentoacessorio","registrovotacao","registroleitura","votoparlamentar"],materia:{},tramitacao:{ultima:{},status:{}},anexadas:{},legislacaocitada:{},documentoacessorio:{},modal_legis_citada:null,registro:null}},watch:{modal_legis_citada:function(t,a){var e=this;null!==t&&this.$nextTick().then(function(){S("#modal-legis-citada-".concat(t.id)).modal("show"),S("#modal-legis-citada-".concat(t.id)).on("hidden.bs.modal",function(t){e.modal_legis_citada=null})})},item:function(t,a){var e=this;this.$nextTick().then(function(){e.registro=null}).then(function(){e.fetchRegistroDeVoto()})}},computed:{data_apresentacao:function(){try{var t=this.stringToDate(this.materia.data_apresentacao,"yyyy-mm-dd","-");return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())}catch(a){return""}},observacao:function(){var t=this.item.observacao;return t=t.replace(/^\r\n/g,""),t=t.replace(/\r\n/g,"<br />"),t=t.replace(/\r/g," "),t=t.replace(/\n/g,"<br />"),t},itensAnexados:{get:function(){return E.orderBy(this.anexadas,["-tipo","data_apresentacao","id"])}},itensLegislacaoCitada:{get:function(){return E.orderBy(this.legislacaocitada,"norma")}},itensDocumentosAcessorios:{get:function(){return E.orderBy(this.documentoacessorio,"data")}},votacaoAberta:{get:function(){return this.item.votacao_aberta&&this.item.tipo_votacao<=2}},votacaoPedidoPrazoAberta:{get:function(){return this.item.votacao_aberta_pedido_prazo&&this.item.tipo_votacao<=2}},statusVotacao:{get:function(){var t="",a=this.item.resultado;return this.votacaoAberta?t="votacao-aberta":"Aprovado"===a?t="result-aprovado":"Rejeitado"===a?t="result-rejeitado":"Pedido de Vista"===a?t="result-vista":"Prazo Regimental"===a&&(t="result-prazo"),t}}},mounted:function(){this.refresh()},methods:{refresh:function(){var t=this;t.fetchMateria().then(function(a){E.each(t.materia.anexadas,function(a,e){t.fetchMateria({action:"post_save",app:t.app[0],model:t.model[0],id:a})})}),t.$nextTick().then(function(){}).then(function(){t.fetchLegislacaoCitada()}).then(function(){t.fetchDocumentoAcessorio()}).then(function(){t.fetchRegistroDeVoto()})},fetch:function(t){var a=this;void 0!==t&&("materia"===t.app&&"materialegislativa"===t.model?(t.id===a.item.materia||t.id in a.materia.anexadas)&&a.fetchMateria(t):"materia"===t.app&&"anexada"===t.model?(a.$set(a,"anexadas",{}),a.refreshState({action:"",app:a.app[0],model:a.model[0],id:a.item.materia}).then(function(t){a.refresh()})):"materia"===t.app&&"autoria"===t.model?a.refreshState({action:"",app:a.app[0],model:a.model[0],id:a.item.materia}).then(function(t){a.refresh()}):"materia"===t.app&&"tramitacao"===t.model?a.fetchUltimaTramitacao(t):"norma"===t.app&&"legislacaocitada"===t.model?a.fetchLegislacaoCitada():"materia"===t.app&&"documentoacessorio"===t.model?a.fetchDocumentoAcessorio():"sessao"===t.app&&["registrovotacao","registroleitura","votoparlamentar"].includes(t.model)&&a.fetchRegistroDeVoto(t))},fetchRegistroDeVoto:function(t){var a=this;return(0,b.A)((0,g.A)().m(function e(){var i,s,n,o;return(0,g.A)().w(function(e){while(1)switch(e.n){case 0:i=a,s=4===i.item.tipo_votacao?"registroleitura":"registrovotacao",n="expedientemateria"===i.type?"expediente":"ordem",i.item.resultado.length>0&&null===i.registro&&(o="&".concat(n,"=").concat(i.item.id,"&o=-id"),i.utils.getModelList("sessao",s,1,o).then(function(t){E.each(t.data.results.slice(0,1),function(t){i.registro=t,i.refreshState({app:"sessao",model:s,value:t,id:t.id})})}).catch(function(t){i.sendMessage({alert:"danger",message:"Não foi possível recuperar o Registro de Votos/Leitura.",time:5})})),i.nulls.includes(t)||i.nulls.includes(i.registro)||i.registro.id!==t.id||i.getObject(t).then(function(t){i.nulls.includes(t)?i.registro=null:t.materia===i.item.materia&&(i.registro=t)});case 1:return e.a(2)}},e)}))()},fetchDocumentoAcessorio:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="&materia=".concat(a.item.materia);a.utils.getModelList("materia","documentoacessorio",t,e).then(function(t){E.each(t.data.results,function(t){a.$set(a.documentoacessorio,t.id,t)}),null!==t.data.pagination.next_page&&a.$nextTick().then(function(){a.fetchDocumentoAcessorio(t.data.pagination.next_page)})}).catch(function(t){a.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de Documentos Acessórios.",time:5})})},fetchLegislacaoCitada:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="&materia=".concat(a.item.materia);a.utils.getModelList("norma","legislacaocitada",t,e).then(function(t){E.each(t.data.results,function(t){a.$set(a.legislacaocitada,t.id,t)}),null!==t.data.pagination.next_page&&a.$nextTick().then(function(){a.fetchLegislacaoCitada(t.data.pagination.next_page)})}).catch(function(t){a.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista de Legislação Citada.",time:5})})},fetchMateria:function(t){var a=this;return a.getObject({action:"",app:a.app[0],model:a.model[0],id:void 0!==t?t.id:a.item.materia}).then(function(t){return t.id===a.item.materia?a.materia=t:a.$set(a.anexadas,t.id,t),t})},fetchUltimaTramitacao:function(){var t=this;return t.utils.getByMetadata({action:"ultima_tramitacao",app:"materia",model:"materialegislativa",id:t.item.materia}).then(function(a){t.tramitacao.ultima=a.data,void 0!==t.tramitacao.ultima.id&&t.getObject({action:"",app:"materia",model:"statustramitacao",id:t.tramitacao.ultima.status}).then(function(a){t.tramitacao.status=a})})}}},I=j,B=(0,u.A)(I,f,_,!1,null,null,null),R=B.exports,z=e(2543),U={name:"pauta-online",props:["sessao"],components:{ItemDePauta:R},data:function(){return{itens:{expedientesessao_list:[],ordemdia_list:{},expedientemateria_list:{}},init:!1,app:["sessao"],model:["expedientemateria","ordemdia"]}},computed:{itensDaOrdemDia:{get:function(){return z.orderBy(z.filter(this.itens.ordemdia_list,function(t){return null===t.parent}),"numero_ordem")}},itensDoExpediente:{get:function(){return z.orderBy(this.itens.expedientemateria_list,"numero_ordem")}}},mounted:function(){var t=this;setTimeout(function(){t.fetchItens(),t.fetchExpedienteSessao()},1e3)},methods:{expediente:function(t){var a=this.itens.expedientesessao_list,e=z.filter(a,["tipo",t]);return e.length>0?e[0].conteudo:""},fetch:function(t){if("post_delete"!==t.action){var a=this;a.getObject(t).then(function(e){if(e.sessao_plenaria===a.sessao.id&&null===e.parent){var i=a.itens["".concat(t.model,"_list")],s=t.id;a.$nextTick().then(function(){a.$set(i,s,e)})}"post_save"===t.action&&t.created&&(t.app="materia",t.model="materialegislativa",t.id=e.materia,a.getObject(t).then(function(t){a.sendMessage({alert:"info",message:"<strong>".concat(t.__str__," adicionado a esta sessão.</strong><br><i>").concat(t.ementa,"</i>"),time:25})}))})}else this.$delete(this.itens["".concat(t.model,"_list")],t.id)},fetchItens:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.model,a=this;z.mapKeys(t,function(t,e){z.mapKeys(a.itens["".concat(t,"_list")],function(t,a){t.vue_validate=!1}),a.$nextTick().then(function(){a.fetchList(1,t)})})},fetchExpedienteSessao:function(){var t=this;return t.utils.getByMetadata({action:"expedientes",app:"sessao",model:"sessaoplenaria",id:t.sessao.id}).then(function(a){t.$set(t.itens,"expedientesessao_list",a.data.results)}).then(function(t){})},fetchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=this,i="&sessao_plenaria=".concat(this.sessao.id);e.utils.getModelOrderedList("sessao",a,"numero_ordem",null===t?1:t,i).then(function(t){e.init=!0,z.each(t.data.results,function(t,i){t.vue_validate=!0,t.id in e.itens["".concat(a,"_list")]?e.itens["".concat(a,"_list")][t.id]=t:e.$set(e.itens["".concat(a,"_list")],t.id,t)}),e.$nextTick().then(function(){null!==t.data.pagination.next_page?e.fetchList(t.data.pagination.next_page,a):z.mapKeys(e.itens["".concat(a,"_list")],function(t,i){t.vue_validate||e.$delete(e.itens["".concat(a,"_list")],t.id)})})}).catch(function(t){e.init=!0,e.sendMessage({alert:"danger",message:"Não foi possível recuperar a Ordem do Dia.",time:5})})}}},F=U,H=(0,u.A)(F,v,h,!1,null,null,null),Y=H.exports,K=e(95353),q={name:"sessao-plenaria-online",components:{SessaoPlenariaTopo:p,PautaOnline:Y},data:function(){return{sessao:null,idd:parseInt(this.$route.params.id),app:["sessao"],model:["sessaoplenaria"]}},beforeDestroy:function(){this.setNivelDetalheVisivel(!1)},mounted:function(){var t=this,a=this;a.setNivelDetalheVisivel(!0),a.setSideleftVisivel(!0),a.setSiderightVisivel(!0),a.$nextTick(function(){a.getObject({action:"",id:a.idd,app:a.app[0],model:a.model[0]}).then(function(a){t.sessao=a}).catch(function(){t.sessao=void 0!==t.cache.sessao&&void 0!==t.cache.sessao.sessaoplenaria&&void 0!==t.cache.sessao.sessaoplenaria[t.idd]?t.cache.sessao.sessaoplenaria[t.idd]:null})})},methods:(0,n.A)((0,n.A)({},K.Ay.mapActions(["setNivelDetalheVisivel","setSideleftVisivel","setSiderightVisivel"])),{},{fetch:function(t){var a=this;t.id===this.idd&&t.app===this.app[0]&&t.model===this.model[0]&&("post_delete"===t.action?setTimeout(function(){a.sendMessage({alert:"danger",message:"Sessão Plenária foi excluída",time:5}),a.$router.push({name:"sessao_list_link"})},500):this.sessao=this.cache.sessao.sessaoplenaria[this.idd])}})},G=q,Q=(0,u.A)(G,i,s,!1,null,null,null),X=Q.exports}}]);
//# sourceMappingURL=355-legacy.af36d648.js.map