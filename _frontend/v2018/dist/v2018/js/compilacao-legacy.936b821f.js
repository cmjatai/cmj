(function(){var t={406:function(t,e,i){"use strict";var o=i(74692),n=i.n(o);i(74692);window["$"]=n()},5216:function(t,e,i){"use strict";i(23792),i(3362),i(69085),i(9391),i(18111),i(7588),i(26099),i(23500),i(406),i(2008),i(50113),i(22489),i(20116),i(33110),i(79432),i(58335);var o=window.$;function n(t,e,i){var o=new Date,n=new Date;null!==i&&0!==i||(i=1),n.setTime(o.getTime()+864e5*i),document.cookie=t+"="+escape(e)+";expires="+n.toGMTString()}function a(t){var e=" "+document.cookie,i=e.indexOf(" "+t+"=");if(-1===i&&(i=e.indexOf(";"+t+"=")),-1===i||""===t)return"";var o=e.indexOf(";",i+1);return-1===o&&(o=e.length),unescape(e.substring(i+t.length+2,o))}function s(t){o(t).append('<div style="text-align:center;"><i style="font-size: 200%;" class="fa fa-refresh fa-spin"></i></div>')}function r(t){o(function(){var e={},i=o("body").children("#container_ds");i.length>0&&o(i).remove(),i=o('<div id="container_ds"/>'),o("body").prepend(i);var n=o('[data-sapl-ta="DispositivoSearch"]');n.each(function(){var n=o(this),a=n.attr("data-type-selection"),r=n.attr("data-field"),d=n.attr("data-function"),l=function(t){if("checkbox"===a){var e=n.find('input[name="ta_select_all"]');e.off(),e.on("change",function(t){o(this).closest("ul").find('input[name="'+r+'"]').prop("checked",this.checked)})}else{var i=n.find("input");i.off(),i.attr("type","hidden"),o('<a class="text-danger">').insertBefore(i).append(o('<span aria-hidden="true">&times;</span>')).on("click",function(){2===o(this).closest("ul").find("li").length?o(this).closest("ul").remove():o(this).closest("li").remove()})}};l();var c=function(t){var i=o('select[name="tipo_ta"]').val(),n=o('select[name="tipo_model"]').val(),l=o('input[name="num_ta"]').val(),c=o('input[name="ano_ta"]').val(),u=o('input[name="tipo_resultado"]:checked').val(),f=o('input[name="rotulo_dispositivo"]').val(),p=o('input[name="texto_dispositivo"]').val(),m=o('select[name="max_results"]').val(),v=o('input[name="texto_articulado_do_editor"]').val(),h="";f.length>0||p.length>0?(o('input[name="tipo_resultado"]').prop("disabled",!1),o('input[name="tipo_resultado"]').each(function(t,e){e.parentElement.classList.remove("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","1")):(o('input[name="tipo_resultado"]').filter('[value="False"]').prop("checked",!0),o('input[name="tipo_resultado"]').prop("disabled",!0),o('input[name="tipo_resultado"]').each(function(t,e){e.parentElement.classList.add("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","0.3"),u="False"),e={tipo_ta:i,tipo_model:n,num_ta:l,ano_ta:c,texto:p,rotulo:f,tipo_resultado:u,max_results:m,data_type_selection:a,data_field:r,data_function:d,texto_articulado_do_editor:v},window.localStorage.setItem("dispositivo_search_form_data",JSON.stringify(e)),h="/ta/search_fragment_form",o(".result-busca-dispositivo").html(""),s(".result-busca-dispositivo"),o.get(h,e).done(function(t){if(o(".result-busca-dispositivo").html(t),"checkbox"===a){var e=o(".result-busca-dispositivo").find('input[name="ta_select_all"]');e.off(),e.on("change",function(t){o(this).closest("ul").find('input[name="'+r+'"]').prop("checked",this.checked)})}})},u=function(t){var e=o('input[name="rotulo_dispositivo"]').val(),i=o('input[name="texto_dispositivo"]').val();e.length>0||i.length>0?(o('input[name="tipo_resultado"]').prop("disabled",!1),o('input[name="tipo_resultado"]').each(function(t,e){e.parentElement.classList.remove("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","1")):(o('input[name="tipo_resultado"]').filter('[value="False"]').prop("checked",!0),o('input[name="tipo_resultado"]').prop("disabled",!0),o('input[name="tipo_resultado"]').each(function(t,e){e.parentElement.classList.add("disabled")}),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","0.3"))},f=n.children("#buttonDs");f.length>0&&o(f).remove(),f=o('<div id="buttonDs" class="clearfix"/>'),n.prepend(f);var p=o("<button>").text(t["text_button"]).attr("type","button").attr("class","btn btn-sm btn-success btn-modal-open");f.append(p),p.on("click",function(){o.get(t["url_form"],function(s){i.html(s);var d=o("#modal-ds");d.find('select[name="tipo_ta"]').change(function(t){var i="";i="/ta/search_fragment_form?action=get_tipos&tipo_ta="+this.value,d.find('label[for="id_tipo_model"]').html("Tipos de "+this.children[this.selectedIndex].innerHTML);var n=d.find('select[name="tipo_model"]');n.empty(),o('<option value="">Carregando...</option>').appendTo(n),o.get(i).done(function(t){for(var i in n.empty(),t)for(var a in t[i])n.append(o("<option>").attr("value",a).text(t[i][a]));setTimeout(function(){o('select[name="tipo_model"]').val(e.tipo_model)},200)})}),d.find('input[name="texto_dispositivo"], input[name="rotulo_dispositivo"]').on("keyup",u),d.find(".btn-busca").click(c),d.find("#btn-modal-select").click(function(){var e=n.find("ul");"radio"===a&&e.remove();var i=d.find('[name="'+r+'"]:checked');i.closest("ul").find("input:not(:checked)").filter('[name!="ta_select_all"]').closest("li").remove(),i.closest("ul").each(function(){var t=n.find("#"+this.id);if(0!==t.length){var e=o(this).find("input");e.each(function(){t.find("#"+this.id).length>0||t.append(o(this).closest("li"))})}else n.append(this)}),l(),d.modal("hide"),"post_selected"in t&&t["post_selected"](t["params_post_selected"])});try{e=JSON.parse(window.localStorage.getItem("dispositivo_search_form_data")),o('input[name="num_ta"]').val(e.num_ta),o('input[name="ano_ta"]').val(e.ano_ta),o('input[name="rotulo_dispositivo"]').val(e.rotulo),o('input[name="texto_dispositivo"]').val(e.texto),o('select[name="max_results"]').val(e.max_results),o('input[name="tipo_resultado"]').filter('[value="'.concat(e.tipo_resultado,'"]')).attr("checked",!0)}catch(f){}setTimeout(function(){try{o('select[name="tipo_ta"]').val(e.tipo_ta),o('select[name="tipo_ta"]').trigger("change")}catch(f){}},200),d.modal("show")})}),"autostart"in t&&t["autostart"]&&p.trigger("click")})})}var d={SetCookie:n,ReadCookie:a,insertWaitAjax:s,DispositivoSearch:r},l=(i(27495),i(5746),i(74692)),c=window.$,u=i(37546);function f(t){"function"===typeof l&&t instanceof l&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function p(t,e){for(var i=null,o=c(".dptt"),n=0;n<o.length;n++)if(!c(o[n]).hasClass("displaynone")&&f(o[n])){i=n+1<o.length?o[n+1]:o[n];break}if(c(".cp .tipo-vigencias a").removeClass("active"),c(t).addClass("active"),c(".dptt.desativado").removeClass("displaynone"),c(".desativado > .dn").removeClass("displaynone"),c(".dptt.revogado").removeClass("displaynone"),c(".dtxt").removeClass("displaynone"),c(".dtxt.diff").remove(),c(".nota-alteracao").removeClass("displaynone"),e&&c('.dtxt[id^="da"').each(function(){if(!(c(this).html().search(/<\/\w+>/g)>0)){var t=c(this).attr("pk"),e=c(this).attr("pks"),i=c("#d"+e).contents().filter(function(){return this.nodeType===Node.TEXT_NODE}),o=c("#da"+t).contents().filter(function(){return this.nodeType===Node.TEXT_NODE}),n=u.diffWordsWithSpace(c(i).text(),c(o).text());if(n.length>0){c("#d"+e).closest(".desativado").addClass("displaynone");var a=c("#da"+t).clone();c("#da"+t).after(a),c("#da"+t).addClass("displaynone"),c(a).addClass("diff").html(""),n.forEach(function(t){var e=document.createElement("span"),i=t.value;t.removed?(c(e).addClass("desativado"),i+=" "):t.added&&c(e).addClass("added"),e.appendChild(document.createTextNode(i)),c(a).append(e)})}}}),i)try{c("html, body").animate({scrollTop:c(i).parent().offset().top-60},0)}catch(a){}}function m(t,e){for(var i=null,o=c(".dptt"),n=0;n<o.length;n++)if(!c(o[n]).hasClass("displaynone")&&f(o[n])){i=n+1<o.length?o[n+1]:o[n];break}if(c(".cp .tipo-vigencias a").removeClass("active"),c(t).addClass("active"),c(".dptt.desativado").addClass("displaynone"),c(".desativado > .dn").addClass("displaynone"),c(".nota-alteracao").removeClass("displaynone"),c(".dptt.revogado").removeClass("displaynone"),e||c(".nota-alteracao").addClass("displaynone"),i)try{c("html, body").animate({scrollTop:c(i).parent().offset().top-60},0)}catch(a){}}function v(t,e){m(t,e),c(".dptt.revogado").addClass("displaynone")}var h={isElementInViewport:f,textoMultiVigente:p,textoVigente:m,textoVigenteSemRevogados:v},g=window.$;function _(t,e){g("html, body").animate({scrollTop:g("#dne"+t).offset().top-window.innerHeight/5},300),window.refreshDatePicker(),g("#dne"+t+" #button-id-submit-form").click(b),g("#dne"+t+" .btn-close-container").click(function(){g(this).closest(".dne-nota").removeClass("dne-nota"),g(this).closest(".dne-form").html("")}),"nota"===e?g("#dne"+t+' select[name="tipo"]').change(function(e){var i="";i="text/"+t+"/nota/create?action=modelo_nota&id_tipo="+this.value,g.get(i).done(function(e){g("#dne"+t+' textarea[name="texto"]').val(e)})}):"vide"===e&&window.DispositivoSearch({url_form:"/ta/search_form",text_button:"Definir Dispositivo"})}function b(t){var e="",i="nota",o=null,n=g("#id_dispositivo").val();void 0===n&&(n=g("#id_dispositivo_base").val(),i="vide"),o=g("#id_pk").val(),e="text/"+n+"/"+i+"/",e+=null===o||""===o?"create":o+"/edit",g.post(e,g("#dne"+n+" form").serialize(),function(t){if("string"===typeof t)if(t.indexOf("<form")>=0)g("#dne"+n+" .dne-form").html(t),_(n,i);else{g("#dne"+n+" .dne-form").closest(".dpt").html(t),y();try{g("html, body").animate({scrollTop:g("#dne"+n).offset().top-window.innerHeight/3},300)}catch(e){}}})}function w(t){var e=g(t).attr("model"),i=g(t).closest(".dn").attr("pk"),o=g(t).attr("pk"),n="text/"+i+"/"+e+"/"+o+"/delete";g.get(n,function(t){g("#dne"+i+" .dne-form").closest(".dpt").html(t),y()})}function k(t){var e="",i=g(t).attr("model"),o=g(".dne-nota .dne-form").closest(".dne").attr("pk");if(null!=o&&(g("#dne"+o).removeClass("dne-nota"),g("#dne"+o+" .dne-form").html("")),t.className.indexOf("create")>=0)o=g(t).attr("pk"),e="text/"+o+"/"+i+"/create";else if(t.className.indexOf("edit")>=0){var n=g(t).attr("pk");o=g(t).closest(".dn").attr("pk"),e="text/"+o+"/"+i+"/"+n+"/edit"}g("#dne"+o).addClass("dne-nota"),g.get(e).done(function(t){g("#dne"+o+" .dne-form").html(t),_(o,i)}).fail(function(){y()})}function y(){g(".dne-nota").removeClass("dne-nota"),g(".dne-form").html(""),g(".dne .btn-action").off(),g(".dn .btn-action").off(),g(".dne .btn-action, .dn .btn-action").not(".btn-nota-delete").not(".btn-vide-delete").click(function(){k(this)}),g(".dn .btn-nota-delete, .dn .btn-vide-delete").click(function(){w(this)})}var C={onEventsDneExec:_,onSubmitEditNVForm:b,onDelete:w,onReadyNotasVides:y},x=(i(91512),i(2543)),S=i(74692);x.forEach(x.merge(x.merge(d,C),h),function(t,e){window[e]=t}),S(document).ready(function(){setTimeout(function(){var t=location.href.split("#");if(2===t.length)try{S("html, body").animate({scrollTop:S("#dptt"+t[1]).offset().top-window.innerHeight/9},0)}catch(e){}},100),S("#btn_font_menos").click(function(){S(".dpt").css("font-size","-=1")}),S("#btn_font_mais").click(function(){S(".dpt").css("font-size","+=1")}),S(".dpt.bloco_alteracao .dpt").each(function(){var t=parseInt(S(this).attr("nivel"));S(this).css("z-index",15-t)}),S(".cp-linha-vigencias > li:not(:first-child):not(:last-child) > a").click(function(t){S(".cp-linha-vigencias > li").removeClass("active"),S(this).closest("li").addClass("active"),t.preventDefault()}),S("main").click(function(t){t.target!==this&&t.target!==this.firstElementChild||S(".cp-linha-vigencias > li").removeClass("active")}),window.onReadyNotasVides()})},91512:function(t,e,i){var o=i(74692);i(28706),i(2008),i(50113),i(23418),i(62062),i(18111),i(22489),i(20116),i(61701),i(26099),i(47764);var n=window.$;window.DispositivoEdit=function(){var t,e="textarea";if(!(this instanceof window.DispositivoEdit))return t||(t=new window.DispositivoEdit),t;t=this,window.DispositivoEdit=function(){return t},t.bindActionsEditorType=function(i){e=this.getAttribute("editortype"),window.SetCookie("editortype",e,30);var o=n(this).closest(".dpt"),a=o.attr("pk");t.clearEditSelected(),t.triggerBtnDptEdit(a),i.preventDefault()},t.bindActionsClick=function(e){var i=this.getAttribute("pk"),o={action:this.getAttribute("action"),tipo_pk:this.getAttribute("tipo_pk"),perfil_pk:this.getAttribute("perfil_pk"),variacao:this.getAttribute("variacao"),pk_bloco:this.getAttribute("pk_bloco")},a=i+"/refresh";t.waitShow(),n.get(a,o).done(function(e){t.clearEditSelected(),null!=e.pk&&t.message(e)}).fail(t.waitHide).always(t.waitHide)},t.clearEditSelected=function(){n(".dpt-selected > .dpt-form").html(""),n(".dpt-actions, .dpt-actions-bottom").html(""),window.tinymce.remove(),n(".dpt-selected").removeClass("dpt-selected")},t.editDispositivo=function(e){var i=e.target.classList.contains("dpt-link")?e.target:e.target.parentElement.classList.contains("dpt-link")?e.target.parentElement:null;if(!(i&&i.getAttribute("href")&&i.getAttribute("href").length>0)){var o=n(this).closest(".dpt");if(o.hasClass("dpt-selected"))"editor-close"===this.getAttribute("action")&&t.clearEditSelected();else{t.clearEditSelected(),t.loadActionsEdit(o);var a=o.attr("formtype");o.on(a,t[a]),t.loadForm(o,a)}}},t.gc=function(){setTimeout(function(){n(".dpt:not(.dpt-selected) > .dpt-form").html("")},500)},t.get_form_base=function(){var e=n(this);e.addClass("dpt-selected");var i=e.children().filter(".dpt-form");i.find("form").submit(t.onSubmitEditFormBase),t.scrollTo(e),e.off("get_form_base");var o=e.find(".btn-fechar");o.on("click",function(e){t.clearEditSelected(),e.preventDefault()});var a=e.find(".btns-excluir");e.find(".dpt-actions-bottom").first().append(a),a.find(".btn-outline-danger").on("click",t.bindActionsClick)},t.get_form_alteracao=function(){var e=n(this);e.off("get_form_alteracao"),n(".dpt-actions, .dpt-actions-bottom").html("");var i=e.children().filter(".dpt-form").children().first(),o="".concat(i[0]["id_dispositivo_search_form"].value,"?ta_base_id=").concat(i[0]["id_texto_articulado_do_editor"].value);window.DispositivoSearch({url_form:o,text_button:"Selecionar",autostart:!0}),t.scrollTo(e),i.submit(t.onSubmitFormRegistraAlteracao);var a=e.find(".btn-fechar");a.on("click",function(i){t.clearEditSelected(),t.triggerBtnDptEdit(e.attr("pk")),i.preventDefault()})},t.get_form_inclusao=function(){var e=n(this);e.off("get_form_inclusao"),n(".dpt-actions, .dpt-actions-bottom").html("");var i=e.children().filter(".dpt-form").children().first(),o="".concat(i[0]["id_dispositivo_search_form"].value,"?ta_base_id=").concat(i[0]["id_texto_articulado_do_editor"].value);window.DispositivoSearch({url_form:o,text_button:"Selecionar",post_selected:t.allowed_inserts_registro_inclusao,params_post_selected:{pk_bloco:e.attr("pk")},autostart:!0}),t.scrollTo(e),i.submit(t.onSubmitFormRegistraInclusao);var a=e.find(".btn-fechar");a.on("click",function(i){t.clearEditSelected(),t.triggerBtnDptEdit(e.attr("pk")),i.preventDefault()})},t.get_form_revogacao=function(){var e=n(this);e.off("get_form_revogacao"),n(".dpt-actions, .dpt-actions-bottom").html("");var i=e.children().filter(".dpt-form").children().first(),o="".concat(i[0]["id_dispositivo_search_form"].value,"?ta_base_id=").concat(i[0]["id_texto_articulado_do_editor"].value);window.DispositivoSearch({url_form:o,text_button:"Selecionar",autostart:!0}),t.scrollTo(e),i.submit(t.onSubmitFormRegistraRevogacao);var a=e.find(".btn-fechar");a.on("click",function(){t.clearEditSelected(),t.triggerBtnDptEdit(e.attr("pk"))})},t.allowed_inserts_registro_inclusao=function(e){var i=n("#id"+e.pk_bloco+" input[name='dispositivo_base_para_inclusao']");if(0!==i.length){var o=i[0].value,a={action:"get_actions_allowed_inserts_registro_inclusao",pk_bloco:e.pk_bloco},s=o+"/refresh";t.waitShow(),n.get(s,a).done(function(e){n(".allowed_inserts").html(e),n(".allowed_inserts").find(".btn-action").on("click",t.bindActionsClick)}).fail(t.waitHide).always(t.waitHide)}},t.loadActionsEdit=function(i){var o=i.attr("pk"),a=o+"/refresh?action=get_actions";n.get(a).done(function(o){i.find(".dpt-actions").first().html(o),i.find(".btn-action").on("click",t.bindActionsClick),i.find(".btn-compila").on("click",t.loadFormsCompilacao),i.find(".btn-editor-type").on("click",t.bindActionsEditorType),"construct"===e&&(i.find(".btn-group-inserts").first().addClass("open show"),i.find(".btn-group-inserts ul").first().addClass("show")),i.find(".btn-group-inserts button").mouseenter(function(t){i.find(".btn-group-inserts ul").removeClass("show"),i.find(".btn-group-inserts").removeClass("open show"),n(this.parentElement).addClass("open show"),n(this.parentElement).find("ul").addClass("show")}),i.find(".btn-group-inserts").mouseleave(function(t){i.find(".btn-group-inserts ul").removeClass("show"),i.find(".btn-group-inserts").removeClass("open show")}),t.gc()})},t.loadForm=function(i,o){var a=i.attr("pk"),s=i.children().filter(".dpt-form");if(1===s.length){var r=a+"/refresh?action="+o;n.get(r).done(function(t){"construct"!==e&&(s.html(t),"tinymce"===e&&window.initTextRichEditor()),i.trigger(o)}).always(function(){t.waitHide()})}},t.loadFormsCompilacao=function(e){var i=n(this).closest(".dpt"),o=this.getAttribute("action");i.on(o,t[o]),t.loadForm(i,o)},t.modalMessage=function(t,e,i){return null!==t&&""!==t&&(n("#modal-message #message").html(t),n("#modal-message").modal("show"),n("#modal-message, #modal-message .alert button").off(),n("#modal-message .alert").removeClass("alert-success alert-info alert-warning alert-danger alert-danger"),n("#modal-message .alert").addClass(e),null!=i&&n("#modal-message").on("hidden.bs.modal",i),n("#modal-message .alert button").on("click",function(){n("#modal-message").modal("hide")}),!0)},t.message=function(e){if(void 0!==e.message)if(e.message.modal)t.modalMessage(e.message.value,"alert-"+e.message.type,function(){t.waitShow(),t.refreshScreenFocusPk(e)});else{if(t.refreshScreenFocusPk(e),!("message"in e))return;var i=n(".cp-notify");i.removeClass("hide");var o=i.find(".message");o.text(e.message.value),o.removeClass("bg-primary bg-success bg-info bg-warning bg-danger").addClass("bg-"+e.message.type),setTimeout(function(){i.addClass("hide")},e.message.time?e.message.time:3e3)}else t.refreshScreenFocusPk(e)},t.offClicks=function(){n(".btn-dpt-edit").off()},t.onClicks=function(e){var i;i=null==e?n(".btn-dpt-edit"):n(e).find(".btn-dpt-edit"),i.on("click",t.editDispositivo)},t.onSubmitFormRegistraAlteracao=function(e){if(void 0===this.dispositivo_alterado)return t.modalMessage("Nenhum dispositivo selecionado","alert-info"),void(null!=e&&e.preventDefault());var i=void 0===this.dispositivo_alterado.length?[this.dispositivo_alterado]:Array.from(this.dispositivo_alterado),o={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_alterado:i.filter(function(t,e,i){return t.checked}).map(function(t){return t.value}),formtype:"get_form_alteracao"},a=n(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),n.post(a,o).done(function(e){t.clearEditSelected(),null!=e.pk?t.message(e):alert("Erro na resposta!")}).always(function(){t.waitHide()}),null!=e&&e.preventDefault()},t.onSubmitFormRegistraInclusao=function(e){var i={csrfmiddlewaretoken:this["csrfmiddlewaretoken"].value,dispositivo_base_para_inclusao:this["dispositivo_base_para_inclusao"].value,formtype:"get_form_inclusao"},o=n(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),n.post(o,i).done(function(e){t.clearEditSelected(),null!=e.pk?t.message(e):alert("Erro na resposta!")}).always(function(){t.waitHide()}),null!=e&&e.preventDefault()},t.onSubmitFormRegistraRevogacao=function(e){if(void 0===this.dispositivo_revogado)return t.modalMessage("Nenhum dispositivo selecionado","alert-info"),void(null!=e&&e.preventDefault());var i=void 0===this.dispositivo_revogado.length?[this.dispositivo_revogado]:Array.from(this.dispositivo_revogado),o={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_revogado:i.filter(function(t,e,i){return t.checked}).map(function(t){return t.value}),revogacao_em_bloco:this.revogacao_em_bloco.value,formtype:"get_form_revogacao"},a=n(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),n.post(a,o).done(function(e){t.clearEditSelected(),null!=e.pk?t.message(e):alert("Erro na resposta!")}).always(function(){t.waitHide()}),null!=e&&e.preventDefault()},t.onSubmitEditFormBase=function(e){var i=this,o="",a="",s="",r=window.tinymce.get("id_texto"),d=window.tinymce.get("id_texto_atualizador");o=null!=r?r.getContent():this["id_texto"].value,null!=d?a=d.getContent():"id_texto_atualizador"in this&&(a=this["id_texto_atualizador"].value),"visibilidade"in this&&(s=this["visibilidade"].value);var l={csrfmiddlewaretoken:this["csrfmiddlewaretoken"].value,texto:o,texto_atualizador:a,visibilidade:s,formtype:"get_form_base"},c=n(this).closest(".dpt").attr("pk")+"/refresh";t.waitShow(),n.post(c,l).done(function(e){if("string"===typeof e){var o=n(i).closest(".dpt");return o=n("#"+o.replaceWith(e).attr("id")),t.onClicks(o),void t.waitHide()}t.clearEditSelected(),null!=e.pk?t.message(e):alert("Erro na resposta!")}).always(function(){t.waitHide()}),null!=e&&e.preventDefault()},t.refreshContent=function(e,i){if(0!==e.length){var o=e.shift(),a=o+"/refresh";n.get(a).done(function(a){var s=n("#id"+o).closest(".dpt");s=n("#"+s.replaceWith(a).attr("id")),t.onClicks(s),t.reloadFunctionsDraggables(),i>0&&t.triggerBtnDptEdit(i),t.refreshContent(e)})}else t.waitHide()},t.refreshScreenFocusPk=function(e){if(t.waitShow(),-1===e.pai[0]){t.waitShow();var i=location.href.split("#")[0];location.href=i+"#"+e.pk,location.reload(!0)}else t.refreshContent(e.pai,e.pk)},t.reloadFunctionsDraggables=function(){var t=n(".dpt-alts");t.length>0&&(t.sortable({connectWith:".dpt-alts",items:".sorting-initialize",revert:!0,distance:15,start:function(t,e){},stop:function(t,e){var i=e.item.attr("pk"),o=e.item.closest(".dpt-alts").closest(".dpt").attr("pk"),a=i+"/refresh?action=json_drag_move_dpt_alterado&index="+e.item.index()+"&bloco_pk="+o;n.get(a).done(function(t){})}}),t.find(".dpt").one("mouseenter",function(){o(this).addClass("sorting-initialize"),t.sortable("refresh")}),n(".dpt-alts .dpt").draggable({connectToSortable:".dpt-alts",revert:"invalid",zIndex:1,distance:15,drag:function(t,e){n(".dpt-alts").addClass("drag")},stop:function(t,e){n(".dpt-alts").removeClass("drag")}}),t.disableSelection())},t.scrollTo=function(t){try{n("html, body").animate({scrollTop:t.offset().top-window.innerHeight/9},100)}catch(e){}},t.triggerBtnDptEdit=function(t){var e=n("#id"+t+" > .dpt-text.btn-dpt-edit");0===e.length&&(e=n("#id"+t+" > .dpt-actions-fixed > .btn-dpt-edit")),e.first().trigger("click")},t.waitHide=function(){n("#wait_message").addClass("displaynone")},t.waitShow=function(){n("#wait_message").removeClass("displaynone")},t.init=function(){n(".dpt-actions-fixed").first().css("opacity","1"),e=window.ReadCookie("editortype"),null!==e&&""!==e||(e="textarea",window.SetCookie("editortype",e,30)),t.offClicks(),t.onClicks(),t.reloadFunctionsDraggables();var i=location.href.split("#");2===i.length&&""!==i[1]&&t.triggerBtnDptEdit(i[1]),n("main").click(function(e){e.target!==this&&e.target!==this.firstElementChild||t.clearEditSelected()}),t.waitHide()},t.init()},n(document).ready(function(){o(".cpe").length>0&&window.DispositivoEdit()})}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=t,function(){var t=[];i.O=function(e,o,n,a){if(!o){var s=1/0;for(c=0;c<t.length;c++){o=t[c][0],n=t[c][1],a=t[c][2];for(var r=!0,d=0;d<o.length;d++)(!1&a||s>=a)&&Object.keys(i.O).every(function(t){return i.O[t](o[d])})?o.splice(d--,1):(r=!1,a<s&&(s=a));if(r){t.splice(c--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,n,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){i.j=105}(),function(){var t={105:0};i.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,a,s=o[0],r=o[1],d=o[2],l=0;if(s.some(function(e){return 0!==t[e]})){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(d)var c=d(i)}for(e&&e(o);l<s.length;l++)a=s[l],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(c)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=i.O(void 0,[504],function(){return i(5216)});o=i.O(o)})();
//# sourceMappingURL=compilacao-legacy.936b821f.js.map