"use strict";(self["webpackChunkPortalCMJ_Frontend_v2018"]=self["webpackChunkPortalCMJ_Frontend_v2018"]||[]).push([[629],{4629:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sessaoplenaria-module online-module"},[e("router-view"),e("popover-palavra")],1)},s=[],o=a(5353),n=function(){var t=this,e=t._self._c;return t.individuos?e("div",{staticClass:"popover-palavra",on:{touchstart:function(e){t.touching=!0},touchmove:function(e){return t.movePopover(e)},touchend:function(e){t.touching=!1},mouseup:function(e){t.touching=!1},mousemove:function(e){return t.movePopover(e)},mousedown:function(e){t.touching=!0}}},t._l(t.individuos,function(a){return e("div",{key:`popover-individuo-${a.id}`,class:["popover-individuo",a.com_a_palavra?"com_a_palavra":"aparteante"]},[e("div",{staticClass:"popover-header"},[e("div",{staticClass:"arrow"}),a.com_a_palavra?e("h3",{staticClass:"popover-title"},[e("i",{staticClass:"fas fa-expand-alt"}),e("span",[t._v(" Com a palavra ")])]):t._e(),a.aparteado?e("h3",{staticClass:"popover-title"},[t._v("Em aparte")]):t._e()]),e("div",{staticClass:"popover-body"},[a?e("div",{staticClass:"individuo-info"},[e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(a.nome))]),a.cronometro?e("div",{staticClass:"timer mt-1"},[e("cronometro-base",{key:`cronometro-popover-${a.cronometro}`,ref:`cronometro-popover-${a.cronometro}`,refInFor:!0,attrs:{cronometro_id:a.cronometro,css_class_controls:"d-none",css_class:"cron-popover-palavra",display_initial:"remaining",display_format:"mm:ss",display_size:"2em",controls:[]}})],1):t._e()]),t.fotografiaUrl(a)?e("div",{staticClass:"foto me-2",style:{backgroundImage:"url("+t.fotografiaUrl(a)+")"}}):e("div",{staticClass:"foto me-2"},[e("i",{staticClass:"fas fa-user"})])]):t._e()])])}),0):t._e()},r=[],l=(a(4114),a(8111),a(116),a(6176)),d={name:"popover-palavra",components:{CronometroBase:l.A},data(){return{touching:!1,moving:!1}},watch:{wsConnected:{immediate:!0,handler(t){t||this.$nextTick(()=>{this.invalidateCacheModels({app:"painelset",models:["individuo","cronometro"]})})}}},computed:{individuo_com_a_palavra:function(){return this.data_cache?.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(t=>t.com_a_palavra):null},individuo_aparteante:function(){return this.data_cache?.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(t=>t.aparteado):null},individuos:function(){const t=[];return this.individuo_aparteante&&t.push(this.individuo_aparteante),this.individuo_com_a_palavra&&t.push(this.individuo_com_a_palavra),t}},mounted(){this.registerModels({app:"painelset",models:["individuo","cronometro"]})},methods:{...o.Ay.mapActions("store__sync",["invalidateCacheModels"]),fotografiaUrl(t){return t.parlamentar?"/api/parlamentares/parlamentar/"+t.parlamentar+"/fotografia.c96.png":t.fotografia?"/api/painelset/individuo/"+t.id+"/fotografia.c96.png":null},movePopover(t){if(!this.touching)return;const e=this.$el,a=e.getBoundingClientRect();if(t.touches&&t.touches.length>1){t.preventDefault();const a=Math.hypot(t.touches[0].clientX-t.touches[1].clientX,t.touches[0].clientY-t.touches[1].clientY),i=Math.min(Math.max(a/10,10),100);return void(e.style.fontSize=`${i}px`)}const i=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,o=window.innerWidth-i-a.width/2,n=window.innerHeight-s-a.height/2,r=Math.max(0,Math.min(o,window.innerWidth-a.width)),l=Math.max(0,Math.min(n,window.innerHeight-a.height));e.style.right=`${r}px`,e.style.bottom=`${l}px`}}},c=d,p=a(1656),u=(0,p.A)(c,n,r,!1,null,null,null),m=u.exports,h=a(2543),_={name:"sessaoplenaria-module",components:{PopoverPalavra:m},data(){return{ws:"/ws/time-refresh/",models_init_cache:{base:["autor"],sessao:["tiposessaoplenaria",{model:"expedientesessao",full_pages:!1,ordering:"-sessao_plenaria"}],materia:["tipomaterialegislativa","statustramitacao"],parlamentares:["legislatura",{model:"sessaolegislativa",full_pages:!1,ordering:"-data_inicio"}]}}},mounted:function(){this.setSideleftVisivel(!0),this.setSiderightVisivel(!1),this.initCache()},methods:{...o.Ay.mapActions(["setSideleftVisivel","setSiderightVisivel"]),fetchList(t=null,e=null,a=null){const i=this;i.utils.getModelOrderedList(e,i.isString(a)?a:a.model,i.isString(a)?"":a.ordering,null===t?1:t).then(t=>{h.each(t.data.results,(t,s)=>{i.refreshState({app:e,model:i.isString(a)?a:a.model,id:t.id,value:t})}),i.$nextTick().then(function(){null!==t.data.pagination.next_page&&(i.isString(a)||a.full_pages)&&i.fetchList(t.data.pagination.next_page,e,a)})})},initCache(){const t=this;h.mapKeys(t.models_init_cache,function(e,a){h.each(e,function(e){t.fetchList(1,a,e)})})}}},v=_,f=(0,p.A)(v,i,s,!1,null,null,null),g=f.exports},6176:function(t,e,a){a.d(e,{A:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{class:["cronometro-component",t.css_class]},[t.cronometro?e("div",{class:["croncard",t.display,t.cronometro.state,t.cronometro.remaining_time<0?"exceeded":""]},[e("div",{staticClass:"inner"},[e("div",{class:["display-time",t.display,t.cronometro.state,t.cronometro.remaining_time<0?"exceeded":""],style:{fontSize:t.display_size}},[t._v(" "+t._s(t.displayTime)+" ")]),e("div",{staticClass:"inner-rodape"},["elapsed"===t.display?e("div",[e("small",[t._v("Tempo Decorrido")])]):"remaining"===t.display?e("div",[t.cronometro.remaining_time<0?e("small",[t._v("Tempo Excedido")]):e("small",[t._v("Tempo Restante")])]):"last_paused"===t.display?e("div",[e("small",[t._v("Tempo de Suspensão")])]):t._e()])]),t.css_class_controls?e("div",{class:["controls",t.css_class_controls]},[e("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"First group"}},[t.controls.includes("toggleDisplay")?e("a",{staticClass:"btn btn-outline-dark btn-toggle",attrs:{title:"Alternar exibição"},on:{click:function(e){return e.stopPropagation(),t.toogleDisplay.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-exchange-alt",attrs:{"aria-hidden":"true"}})]):t._e(),"stopped"===t.cronometro.state&&t.controls.includes("start")?e("a",{staticClass:"btn btn-outline-dark btn-start",on:{click:function(e){return e.stopPropagation(),t.startCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-play",attrs:{"aria-hidden":"true"}})]):t._e(),"running"===t.cronometro.state&&t.controls.includes("pause")?e("a",{staticClass:"btn btn-outline-dark btn-pause",on:{click:function(e){return e.stopPropagation(),t.pauseCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-pause",attrs:{"aria-hidden":"true"}})]):t._e(),"paused"===t.cronometro.state&&t.controls.includes("resume")?e("a",{staticClass:"btn btn-outline-dark btn-resume",on:{click:function(e){return e.stopPropagation(),t.resumeCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-play",attrs:{"aria-hidden":"true"}})]):t._e(),["running","paused"].includes(t.cronometro.state)&&t.controls.includes("stop")?e("a",{staticClass:"btn btn-outline-dark btn-stop",on:{click:function(e){return e.stopPropagation(),t.stopCronometro.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-stop",attrs:{"aria-hidden":"true"}})]):t._e(),t.controls.includes("add1m")?e("a",{staticClass:"btn btn-outline-dark btn-negative btn-add1m",attrs:{title:"Reduzir 1 minuto"},on:{click:function(e){return e.stopPropagation(),t.addTime(-60)}}},[t._v(" -1m ")]):t._e(),t.controls.includes("add30s")?e("a",{staticClass:"btn btn-outline-dark btn-negative btn-add30s",attrs:{title:"Reduzir 30 segundos"},on:{click:function(e){return e.stopPropagation(),t.addTime(-30)}}},[t._v(" -30s ")]):t._e(),t.controls.includes("add30s")?e("a",{staticClass:"btn btn-outline-dark btn-add30s",attrs:{title:"Adicionar 30 segundos"},on:{click:function(e){return e.stopPropagation(),t.addTime(30)}}},[t._v(" +30s ")]):t._e(),t.controls.includes("add1m")?e("a",{staticClass:"btn btn-outline-dark btn-add1m",attrs:{title:"Adicionar 1 minuto"},on:{click:function(e){return e.stopPropagation(),t.addTime(60)}}},[t._v(" +1m ")]):t._e(),t.controls.includes("add3m")?e("a",{staticClass:"btn btn-outline-dark btn-add3m",attrs:{title:"Adicionar 3 minutos"},on:{click:function(e){return e.stopPropagation(),t.addTime(180)}}},[t._v(" +3m ")]):t._e(),t.controls.includes("add5m")?e("a",{staticClass:"btn btn-outline-dark btn-add5m",attrs:{title:"Adicionar 5 minutos"},on:{click:function(e){return e.stopPropagation(),t.addTime(300)}}},[t._v(" +5m ")]):t._e()])]):t._e()]):e("div",[e("p",[t._v("Carregando cronômetro...")])])])},s=[],o=(a(8111),a(116),a(5353)),n={name:"cronometro-base",props:{cronometro_id:{type:Number,required:!0},css_class:{type:String,default:""},css_class_controls:{type:String,default:""},display_initial:{type:String,default:"elapsed",validator:function(t){return["elapsed","remaining","last_paused"].includes(t)}},display_format:{type:String,default:"hh:mm:ss"},display_size:{type:String,default:"1.5em"},auto_start:{type:Boolean,default:!1},auto_stop:{type:Boolean,default:!1},controls:{type:Array,default:()=>["start","pause","resume","stop","add30s","add1m","add3m","add5m","toggleDisplay"]}},data(){return{display:this.display_initial,modesDisplay:["elapsed","remaining","last_paused"],timerInterval:1500,controlsDisplay:this.controls}},mounted:function(){},methods:{...o.Ay.mapActions("store__sync",["sendSyncMessage"]),toogleDisplay(){const t=this.modesDisplay.indexOf(this.display),e=(t+1)%this.modesDisplay.length;let a=this.modesDisplay[e];"last_paused"===a&&"paused"!==this.cronometro.state&&(a="elapsed"),this.display=a},addTime(t){this.sendSyncMessage({type:"command",command:"add_time",app:"painelset",model:"cronometro",params:{id:this.cronometro_id,seconds:t}})},startCronometro(){this.sendSyncMessage({type:"command",command:"start",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display=this.display_initial,this.$emit("cronometro_start")},pauseCronometro(){this.sendSyncMessage({type:"command",command:"pause",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display="last_paused",this.$emit("cronometro_pause")},resumeCronometro(){this.sendSyncMessage({type:"command",command:"resume",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display=this.display_initial,this.$emit("cronometro_resume")},stopCronometro(){this.sendSyncMessage({type:"command",command:"stop",app:"painelset",model:"cronometro",params:{id:this.cronometro_id}}),this.display="elapsed"},secondsToTime:function(t,e,a){let i=Math.round(t[e]||t[a]||0);const s=i<0?"-":"";i<0&&(i*=-1);const o=Math.floor(i/3600),n=Math.floor(i%3600/60),r=i%60;let l="";return"hh:mm:ss"===this.display_format?l=[o,n,r].map(t=>t<10?"0"+t:t).join(":"):"mm:ss"===this.display_format?l=[n+60*o,r].map(t=>t<10?"0"+t:t).join(":"):"ss"===this.display_format&&(l=(r+60*n+3600*o).toString()),s&&(l=s+l),l||"00:00:00"}},computed:{cronometro:function(){return this.data_cache?.painelset_cronometro?Object.values(this.data_cache.painelset_cronometro).find(t=>t.id===this.cronometro_id):null},displayTime:function(){return"elapsed"===this.display?this.elapsedTime:"remaining"===this.display?this.remainingTime:"last_paused"===this.display?this.lastPausedTime:"00:00:00"},lastPausedTime:function(){return this.secondsToTime(this.cronometro,"last_paused_time")},elapsedTime:function(){return this.secondsToTime(this.cronometro,"elapsed_time")},remainingTime:function(){return this.secondsToTime(this.cronometro,"remaining_time","accumulated_time")},accumulatedTime:function(){return this.secondsToTime(this.cronometro,"accumulated_time")}}},r=n,l=a(1656),d=(0,l.A)(r,i,s,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=629.070bd00f.js.map