"use strict";(self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[]).push([[2274],{2274:function(e,t,n){n.d(t,{A:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",[t("b-form-select",{attrs:{options:e.options,"select-size":e.height},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},l=[],a=(n(4114),n(2543)),o={name:"model-select",props:["value","app","model","label","limit","ordering","choice","height","extra_query","required"],data:function(){return{selected:this.value,options:[]}},watch:{selected:function(e,t){this.$emit("change",e)},value:function(e,t){this.selected=e}},methods:{fetch:function(e){this.fetchModel()},fetchModel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;1===e&&(t.height&&1!==this.height?t.options=[]:void 0!==t.required&&t.required||(t.selected=t.value?t.value:null,t.options=[{value:t.selected,text:this.label?this.label:"---------------"}]));var n=t.isString(t.extra_query)?t.extra_query:"";t.utils.getModelOrderedList(t.app,t.model,t.ordering,e,n).then(function(e){a.each(e.data.results,function(e,n){t.options.push({value:e,text:e[t.choice]}),t.refreshState({app:t.app,model:t.model,value:e,id:e.id})}),null!==e.data.pagination.next_page&&t.fetchModel(e.data.pagination.next_page)}).catch(function(e){return t.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})})}},created:function(){this.fetchModel()}},s=o,r=n(1656),c=(0,r.A)(s,i,l,!1,null,null,null),u=c.exports}}]);