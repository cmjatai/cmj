"use strict";(self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[]).push([[2274],{2274:function(e,t,l){l.d(t,{A:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",[t("b-form-select",{attrs:{options:e.options,"select-size":e.height},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},i=[],s=(l(4114),l(2543)),n={name:"model-select",props:["value","app","model","label","limit","ordering","choice","height","extra_query","required"],data(){return{selected:this.value,options:[]}},watch:{selected:function(e,t){this.$emit("change",e)},value:function(e,t){this.selected=e}},methods:{fetch(e){this.fetchModel()},fetchModel(e=1){let t=this;1===e&&(t.height&&1!==this.height?t.options=[]:void 0!==t.required&&t.required||(t.selected=t.value?t.value:null,t.options=[{value:t.selected,text:this.label?this.label:"---------------"}]));let l=t.isString(t.extra_query)?t.extra_query:"";t.utils.getModelOrderedList(t.app,t.model,t.ordering,e,l).then(e=>{s.each(e.data.results,function(e,l){t.options.push({value:e,text:e[t.choice]}),t.refreshState({app:t.app,model:t.model,value:e,id:e.id})}),null!==e.data.pagination.next_page&&t.fetchModel(e.data.pagination.next_page)}).catch(e=>t.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5}))}},created:function(){this.fetchModel()}},o=n,r=l(1656),c=(0,r.A)(o,a,i,!1,null,null,null),d=c.exports}}]);