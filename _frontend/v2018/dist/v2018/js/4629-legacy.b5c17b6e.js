"use strict";(self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[]).push([[4629],{4629:function(t,i,a){a.r(i),a.d(i,{default:function(){return C}});var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"sessaoplenaria-module online-module"},[i("router-view"),i("popover-palavra")],1)},o=[],n=a(7180),s=a(5353),r=function(){var t=this,i=t._self._c;return t.individuos?i("div",{staticClass:"popover-palavra",on:{touchstart:function(i){t.touching=!0},touchmove:function(i){return t.movePopover(i)},touchend:function(i){t.touching=!1},mouseup:function(i){t.touching=!1},mousemove:function(i){return t.movePopover(i)},mousedown:function(i){t.touching=!0}}},t._l(t.individuos,function(a){return i("div",{key:"popover-individuo-".concat(a.id),class:["popover-individuo",a.com_a_palavra?"com_a_palavra":"aparteante"]},[i("div",{staticClass:"popover-header"},[i("div",{staticClass:"arrow"}),a.com_a_palavra?i("h3",{staticClass:"popover-title"},[i("i",{staticClass:"fas fa-expand-alt"}),i("span",[t._v(" Com a palavra ")])]):t._e(),a.aparteado?i("h3",{staticClass:"popover-title"},[t._v("Em aparte")]):t._e()]),i("div",{staticClass:"popover-body"},[a?i("div",{staticClass:"individuo-info"},[i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v(t._s(a.nome))]),a.cronometro?i("div",{staticClass:"timer mt-1"},[i("cronometro-base",{key:"cronometro-popover-".concat(a.cronometro),ref:"cronometro-popover-".concat(a.cronometro),refInFor:!0,attrs:{cronometro_id:a.cronometro,css_class_controls:"d-none",css_class:"cron-popover-palavra",display_initial:"remaining",display_format:"mm:ss",display_size:"2em",controls:[]}})],1):t._e()]),t.fotografiaUrl(a)?i("div",{staticClass:"foto me-2",style:{backgroundImage:"url("+t.fotografiaUrl(a)+")"}}):i("div",{staticClass:"foto me-2"},[i("i",{staticClass:"fas fa-user"})])]):t._e()])])}),0):t._e()},l=[],c=(a(113),a(4114),a(8111),a(116),a(9469),a(6099),a(6034),a(4366)),d={name:"popover-palavra",components:{CronometroBase:c.A},data:function(){return{touching:!1,moving:!1}},watch:{wsConnected:{immediate:!0,handler:function(t){var i=this;t||this.$nextTick(function(){i.invalidateCacheModels({app:"painelset",models:["individuo","cronometro"]})})}}},computed:{individuo_com_a_palavra:function(){var t;return null!==(t=this.data_cache)&&void 0!==t&&t.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(function(t){return t.com_a_palavra}):null},individuo_aparteante:function(){var t;return null!==(t=this.data_cache)&&void 0!==t&&t.painelset_individuo?Object.values(this.data_cache.painelset_individuo).find(function(t){return t.aparteado}):null},individuos:function(){var t=[];return this.individuo_aparteante&&t.push(this.individuo_aparteante),this.individuo_com_a_palavra&&t.push(this.individuo_com_a_palavra),t}},mounted:function(){this.registerModels({app:"painelset",models:["individuo","cronometro"]})},methods:(0,n.A)((0,n.A)({},s.Ay.mapActions("store__sync",["invalidateCacheModels"])),{},{fotografiaUrl:function(t){return t.parlamentar?"/api/parlamentares/parlamentar/"+t.parlamentar+"/fotografia.c96.png":t.fotografia?"/api/painelset/individuo/"+t.id+"/fotografia.c96.png":null},movePopover:function(t){if(this.touching){var i=this.$el,a=i.getBoundingClientRect();if(t.touches&&t.touches.length>1){t.preventDefault();var e=Math.hypot(t.touches[0].clientX-t.touches[1].clientX,t.touches[0].clientY-t.touches[1].clientY),o=Math.min(Math.max(e/10,10),100);i.style.fontSize="".concat(o,"px")}else{var n=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,r=window.innerWidth-n-a.width/2,l=window.innerHeight-s-a.height/2,c=Math.max(0,Math.min(r,window.innerWidth-a.width)),d=Math.max(0,Math.min(l,window.innerHeight-a.height));i.style.right="".concat(c,"px"),i.style.bottom="".concat(d,"px")}}}})},u=d,p=a(1656),v=(0,p.A)(u,r,l,!1,null,null,null),h=v.exports,m=a(2543),f={name:"sessaoplenaria-module",components:{PopoverPalavra:h},data:function(){return{ws:"/ws/time-refresh/",models_init_cache:{base:["autor"],sessao:["tiposessaoplenaria",{model:"expedientesessao",full_pages:!1,ordering:"-sessao_plenaria"}],materia:["tipomaterialegislativa","statustramitacao"],parlamentares:["legislatura",{model:"sessaolegislativa",full_pages:!1,ordering:"-data_inicio"}]}}},mounted:function(){this.setSideleftVisivel(!0),this.setSiderightVisivel(!1),this.initCache()},methods:(0,n.A)((0,n.A)({},s.Ay.mapActions(["setSideleftVisivel","setSiderightVisivel"])),{},{fetchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,e=this;e.utils.getModelOrderedList(i,e.isString(a)?a:a.model,e.isString(a)?"":a.ordering,null===t?1:t).then(function(t){m.each(t.data.results,function(t,o){e.refreshState({app:i,model:e.isString(a)?a:a.model,id:t.id,value:t})}),e.$nextTick().then(function(){null!==t.data.pagination.next_page&&(e.isString(a)||a.full_pages)&&e.fetchList(t.data.pagination.next_page,i,a)})})},initCache:function(){var t=this;m.mapKeys(t.models_init_cache,function(i,a){m.each(i,function(i){t.fetchList(1,a,i)})})}})},_=f,g=(0,p.A)(_,e,o,!1,null,null,null),C=g.exports}}]);