(function(){"use strict";var a={2992:function(a,n,e){var t=e(748),i=e(4634),o=e(8744),r=e(7262),s=(e(3792),e(3362),e(9085),e(9391),e(8706),e(2008),e(113),e(4423),e(8598),e(4114),e(2010),e(8111),e(2489),e(116),e(7588),e(3110),e(9432),e(6099),e(4864),e(7465),e(7495),e(7745),e(8781),e(1699),e(8543),e(5440),e(9978),e(5746),e(2762),e(8335),e(3500),e(2953),e(1774),e(4335)),c=e(4692),d=e(2543);s.A.defaults.headers.get["Cache-Control"]="no-cache, no-store, must-revalidate",s.A.defaults.headers.get["Pragma"]="no-cache",s.A.defaults.headers.get["Expires"]="0",s.A.defaults.xsrfCookieName="csrftoken",s.A.defaults.xsrfHeaderName="X-CSRFToken",window.AppLOA=function(){var a;if(!(this instanceof window.AppLOA))return a||(a=new window.AppLOA),a;a=this,window.AppLOA=function(){return a},a.LoaCRUD=function(){var n=c(".container-loa");n.hasClass("loa-detail")&&a.LoaCrudDETAIL(n)},a.LoaCrudDETAIL=function(a){},a.EmendaLoaCRUD=function(){var n=c(".container-loa");n.hasClass("emendaloa-update")?a.EmendaLoaCrudUPDATE(n):n.hasClass("emendaloa-create")?a.EmendaLoaCrudCREATE(n):n.hasClass("emendaloa-list")&&a.EmendaLoaCrudLIST(n)},a.isObjectEmpty=function(a){var n=!0;return d.forOwn(a,function(a,e){Array.isArray(a)&&a.length>0?n=!1:Array.isArray(a)||["",null,void 0].includes(a)||(n=!1)}),n},a.EmendaLoaCrudLIST=function(n){var e,t=n.find("form"),i=new FormData(t[0]),s={},l=(0,r.A)(i.entries());try{for(l.s();!(e=l.n()).done;){var p=(0,o.A)(e.value,2),u=p[0],f=p[1];u in s?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(f)):""!==f&&(s[u]=f)}}catch(w){l.e(w)}finally{l.f()}delete s.agrupamento,delete s.tipo_agrupamento,delete s.pdf;var v=function(){var a=new FormData(t[0]),n=a.getAll("parlamentares"),e=a.getAll("fase"),i=a.get("finalidade"),o=a.getAll("tipo");return{parlamentares:n.length>0?n:[],fase:e.length>0?e:[],finalidade:""!==i?[i]:[],tipo:o.length>0?o:[]}};if(a.isObjectEmpty(s))try{var m=localStorage.getItem("portalcmj_emendaloa_filter");if(m){var g=JSON.parse(m);if(!a.isObjectEmpty(g)){d.forOwn(g,function(a,n){d.forEach(t.find('input[name="'.concat(n,'"]')),function(n){Array.isArray(a)&&a.includes(n.value)||a===n.value?(n.checked=!0,c('label[for="'.concat(n.id,'"] span')).addClass("active")):Array.isArray(a)?Array.isArray(a)&&a.length>0&&"text"===n.type&&(n.value=a[0]):n.value=a})});var h=v();a.isObjectEmpty(h)||(window.loadingCMJ("Atualizando listagem..."),t.submit())}}}catch(k){localStorage.removeItem("portalcmj_emendaloa_filter")}else{var _=v();localStorage.setItem("portalcmj_emendaloa_filter",JSON.stringify(_))}var b=function(a){var n=v();localStorage.setItem("portalcmj_emendaloa_filter",JSON.stringify(n)),window.loadingCMJ("Atualizando listagem..."),t.submit()},A=t.find('select[name="agrupamento"]'),y=t.find('input[type="radio"][name="tipo_agrupamento"]');A.change(function(a){""===a.target.value&&y.filter("[value=sem_registro]").prop("checked",!0)}).change(),y.change(function(a){var n=function(){A.addClass("bg-yellow"),setTimeout(function(){A.removeClass("bg-yellow"),setTimeout(function(){A.addClass("bg-yellow"),setTimeout(function(){A.removeClass("bg-yellow")},400)},400)},400)};a.target.checked&&"sem_registro"===a.target.value?(A.find('option:not([value="model_unidadeorcamentaria"])').attr("disabled","disabled").addClass("d-none"),A.find('option[value=""]').removeAttr("disabled").removeClass("d-none"),A.val("").change(),n()):a.target.checked?(A.find("option").removeAttr("disabled").removeClass("d-none"),A.find('option[value=""]').removeAttr("disabled").addClass("d-none"),A[0].selectedIndex||(A[0].selectedIndex=2,n())):A.find("option").removeAttr("disabled").removeClass("d-none")}).change(),t.find('#div_id_parlamentares input[type="checkbox"]').change(function(a){b()}),t.find('button[type="button"]').click(function(a){b()}),t.find('input[type="submit"]').click(function(a){window.loadingCMJ("Gerando Listagem em PDF...")}),t.keypress(function(a){if(13===a.keyCode)return a.preventDefault(),!1})},a.EmendaLoaCRUDToggleTipo=function(a){var n=a.find('select[name="tipo"]')[0],e=a.find("#div_id_parl_assinantes"),t=a.find("#div_id_parlamentares__valor"),i=a.find('input[name="valor"]')[0];"0"!==n.value?e.length>0&&(i.setAttribute("readonly","readonly"),e.find("input").prop("disabled",!0),e[0].classList.add("d-none")):t.length>0&&(i.removeAttribute("readonly"),t.find("input").prop("disabled",!0),t[0].classList.add("d-none")),a.find('select[name="tipo"]').change(function(a){var n=a.target;"0"===n.value?(t.find("input").prop("disabled",!0),t[0].classList.add("d-none"),e[0].classList.remove("d-none"),e.find("input").prop("disabled",!1),i.removeAttribute("readonly")):(e.find("input").prop("disabled",!0),e[0].classList.add("d-none"),t[0].classList.remove("d-none"),t.find("input").prop("disabled",!1),i.setAttribute("readonly","readonly"))})},a.EmendaLoaCrudCREATE=function(n){var e=n.find("form");a.EmendaLoaCRUDToggleTipo(e)},a.EmendaLoaCrudUPDATE=function(){var n=(0,i.A)((0,t.A)().m(function n(e){var o,r,l,p,u,f,v,m,g,h,_,b,A,y,w;return(0,t.A)().w(function(n){while(1)switch(n.n){case 0:return o=window.location.href.matchAll(/emendaloa\/(\d+)\//g).next().value[1],r=e.find("form"),l="/api/loa/emendaloa/".concat(o),p=null,u=function(){var a=(0,i.A)((0,t.A)().m(function a(){return(0,t.A)().w(function(a){while(1)switch(a.n){case 0:return a.a(2,s.A.get("".concat(l,"/")).then(function(a){p=a.data}))}},a)}));return function(){return a.apply(this,arguments)}}(),n.n=1,u();case 1:a.EmendaLoaCRUDToggleTipo(r),f=function(){return c(".container-preview").html('\n        <div class="inner-preview">\n          <a class="w-100" target="_blank" href="'.concat(l,'/view/">\n            <img src="').concat(l,"/view/?page=1&u=").concat(Date.now(),'"/>\n          </a>\n        </div>\n        <div class="btn-toolbar justify-content-between">\n          <div class="btn-group btn-group-sm">\n            <label for="id_lineHeight">\n              <span>Entrelinha (%)</span>\n              <input type="number"\n                name="lineHeight" value="').concat(p.metadata.style.lineHeight,'"\n                step="5"\n                min="100"\n                max="350"\n                class="numberinput form-control text-center"\n                id="id_lineHeight">\n            </label>\n          </div>\n          <div>\n            <label for="id_espacoAssinatura">\n            <input type="checkbox"\n              ').concat(p.metadata.style.espacoAssinatura?"checked":"",'\n              name="espacoAssinatura"\n              class="form-check-input"\n              id="id_espacoAssinatura">\n            <span>Incluir espaço para Assinaturas</span>\n            </label>\n          </div>\n        </div>\n      '))},v=f().find("img")[0],v.onload=function(a){v.style.opacity=1,u()},m=r.find(".registro-render"),g=function(){m.html(""),c('<div class="inner"></div>').appendTo(m),c('<div class="footer"></div>').appendTo(m)},g(),h=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=m.find(".inner"),e=m.find(".footer");s.A.get("/api/loa/emendaloa/".concat(o,"/totais/")).then(function(a){e.html(""),c('\n            <div class="row">\n              <div class="col-12 totais">\n              TOTAIS:\n              </div>\n              <div class="col">\n                <span class="key">Inserções</span>\n                <span class="value">'.concat(a.data.soma_insercoes,'</span>\n              </div>\n              <div class="col">\n                <span class="key">Deduções</span>\n                <span class="value">').concat(a.data.soma_deducoes,'</span>\n              </div>\n              <div class="col text-').concat("0,00"===a.data.divergencia_registros?"blue":"red",'">\n                <span class="key">Inserções + Deduções</span>\n                <span class="value">').concat(a.data.divergencia_registros,'</span>\n              </div>\n              <div class="col text-').concat("0,00"===a.data.divergencia_emenda?"blue":"red",'">\n                <span class="key">Emenda - Inserções</span>\n                <span class="value">').concat(a.data.divergencia_emenda,"</span>\n              </div>\n            </div>\n            ")).appendTo(e)}),s.A.get("/api/loa/emendaloaregistrocontabil/?emendaloa=".concat(o,"&get_all=true")).then(function(e){a&&n.html(""),d.each(e.data,function(a,e){if(!(n.find('.item-rc[pk="'.concat(a.id,'"]')).length>0)){var t=c('<div class="item-rc" pk="'.concat(a.id,'"></div>'));t.appendTo(n);var i=a.__str__,o=i.search(/(\d) /g),p=0;while(o>0&&o<15&&p<20)i=i.replace(/^R\$/g,"R$ "),o=i.search(/(\d) /g),p+=1;i=i.split(" - "),i[0]="<strong>".concat(i[0],"</strong>"),i=i.join(" - "),i=i.replaceAll(" ","&nbsp;"),c('<span class="texto">'.concat(i,"</span>")).appendTo(t),c('<span class="btn btn-sm btn-delete text-danger"><i class="far fa-trash-alt"></i></span>').appendTo(t).click(function(a){var e=a.target.closest(".item-rc").getAttribute("pk");s.A.delete("/api/loa/emendaloaregistrocontabil/".concat(e,"/")).then(function(n){r.trigger("change"),a.target.closest(".item-rc").remove(),h(),v.src="".concat(l,"/view/?page=1&u=").concat(Date.now())}).catch(function(a){d.isString(a.response)||d.isString(a.response.data)?c('<div class="alert alert-danger">\n                        '.concat(a.message,"\n                        </div>")).appendTo(n):d.forOwn(a.response.data,function(a,e){r.find("input[name=despesa_".concat(e,"], input[name=").concat(e,"_despesa]")).addClass("is-invalid"),c('<div class="alert alert-danger">\n                        '.concat(d.isString(a)?a:a[0],"\n                        </div>")).appendTo(n)})})})}})})},h(),_=r.find('input[name="ano_loa"')[0].value,b=r.find(".busca-render"),A=r.find('input[name="busca_despesa"]'),y=r.find("#add_registro"),w=r.find("#clean_form_search"),w.click(function(a){y[0].data=null,r.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid")}),y.click(function(a){var n=y[0].data,e={};e.emendaloa=o,e.despesa=n,e.codigo=r.find('input[name="despesa_codigo"]').val(),e.orgao=r.find('input[name="despesa_orgao"]').val(),e.unidade=r.find('input[name="despesa_unidade"]').val(),e.especificacao=r.find('input[name="despesa_especificacao"]').val(),e.natureza=r.find('input[name="despesa_natureza"]').val(),e.fonte=r.find('input[name="despesa_fonte"]').val(),e.valor=r.find('input[name="valor_despesa"]').val(),b.html("");var t=c('<div class="inner"></div>');s.A.post("/api/loa/emendaloaregistrocontabil/create_for_emendaloa_update/",e).then(function(a){y[0].data=null,r.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid"),c('<div class="alert alert-info>Registro de Despesa Adicionado com sucesso.</div>').appendTo(t),h(),v.src="".concat(l,"/view/?page=1&u=").concat(Date.now()),r.trigger("change")}).catch(function(a){d.isString(a.response)||d.isString(a.response.data)?c('<div class="alert alert-danger">\n              '.concat(a.message,"\n              </div>")).appendTo(t):d.forOwn(a.response.data,function(a,n){r.find("input[name=despesa_".concat(n,"], input[name=").concat(n,"_despesa]")).addClass("is-invalid"),c('<div class="alert alert-danger">\n              '.concat(d.isString(a)?a:a[0],"\n              </div>")).appendTo(t)})}).finally(function(){t.appendTo(b)})}),A.keyup(function(a){if(""===a.target.value.trim())return y[0].data=null,r.find('input[name^="despesa_"]').attr("readonly",!1),r.find('input[name^="despesa_"], input[name$="_despesa"]').removeClass("is-invalid"),void b.html("");s.A.get("/api/loa/despesaconsulta/search/?page_size=10&ano=".concat(_,"&q=").concat(a.target.value)).then(function(n){b.html("");var e=c('<div class="inner"></div>');if(e.appendTo(b),d.isEmpty(n.data.results))y[0].data=null,r.find('input[name^="despesa_"]').attr("readonly",!1),c('<div class="alert alert-warning">\n              Nenhuma despesa encontrada nos anexos da LOA com esta informação. Você pode ainda fazer o registro manualmente no formulário acima.\n            </div>').appendTo(e);else if(n.data.pagination.total_entries>10){var t='<div class="alert alert-warning">\n              <em>Mostrando 10 primeiros resultados de '.concat(n.data.pagination.total_entries,".<br>Informe mais termos no campo de busca para reduzir os resultados.</em>\n            </div>");c(t).appendTo(e)}var i=a.target.value.trim().split(" ");d.each(n.data.results,function(a,n){var t="\n                Órgão...: ".concat(a.cod_orgao," - ").concat(a.esp_orgao,"<br>\n                Und Orç.: ").concat(a.cod_unidade," - ").concat(a.esp_unidade,"<br>\n                Código..: ").concat(a.codigo," - ").concat(a.especificacao,"<br>\n                Natureza: ").concat(a.cod_natureza," - ").concat(a.esp_natureza," // Fonte: ").concat(a.cod_fonte,"<br>\n                Val.Orç.: ").concat(a.str_valor," | Saldo: ").concat(a.str_saldo);d.each(i,function(a,n){var e=new RegExp("(".concat(a,")"),"ig");t=t.replace(e,'<strong class="highlight">$1</strong>')});var o='<div class="small item" pk="'.concat(a.id,'">\n                ').concat(t,"\n              </div>"),s=c(o).appendTo(e);s.click(function(n){r.find('input[name="despesa_codigo"]').val(a.codigo),r.find('input[name="despesa_orgao"]').val(a.cod_orgao),r.find('input[name="despesa_unidade"]').val(a.cod_unidade),r.find('input[name="despesa_especificacao"]').val(a.especificacao),r.find('input[name="despesa_natureza"]').val(a.cod_natureza),r.find('input[name="despesa_fonte"]').val(a.cod_fonte),r.find('input[name^="despesa_"]').attr("readonly",!0);var e=n.currentTarget.getAttribute("pk");y[0].data=e,b.html("")})})}).catch(function(){})}),r.keypress(function(a){if(13===a.keyCode){if(a.preventDefault(),a.target===A[0]){var n=b.find(".inner"),e=n.children();1===e.length&&e.trigger("click")}return!1}}),r.find('select[name="fase"]').change(function(a){var n=a.target;"10"===n.value?n.classList.add("is-invalid"):n.classList.remove("is-invalid")}),r.change(function(a){var n={},e=a.target.name,t=a.target.value;if(""!==e){var i="/";v.style.opacity=.35;var o=a.target.getAttribute("parlamentar_id");if(null!==o)n["valor"]=t,n["parlamentar_id"]=o,i="/updatevalorparlamentar/";else{if("lineHeight"===e)return void(v.src="".concat(l,"/view/?page=1&lineHeight=").concat(t,"&u=").concat(Date.now()));if("espacoAssinatura"===e)return void(v.src="".concat(l,"/view/?page=1&espacoAssinatura=").concat(a.target.checked,"&u=").concat(Date.now()));"parl_assinantes"===e?(i="/update_parlassinantes/",n["parlamentar_id"]=t,n["checked"]=a.target.checked):"valor"===e?(i="/updatevaloremenda/",n["valor"]=t):n[e]=t}s.A.patch("".concat(l).concat(i),n).then(function(a){r.find('input[name="lineHeight"]').val(a.data.metadata.style.lineHeight),r.find('input[name="valor"]').val(a.data.valor),"tipo"===e&&window.location.reload(),h(!0),v.src="".concat(l,"/view/?page=1&u=").concat(Date.now())}).catch(function(a){window.location.reload()})}}),r.trigger("change");case 2:return n.a(2)}},n)}));return function(a){return n.apply(this,arguments)}}(),a.AgrupamentoCRUD=function(){var n=c(".container-loa");n.hasClass("agrupamento-update")&&a.AgrupamentoCrudUPDATE(n)},a.AgrupamentoCrudUPDATE=function(a){var n=window.location.href.matchAll(/agrupamento\/(\d+)\//g).next().value[1],e=a.find("form"),t="/api/loa/agrupamento/".concat(n),i=e.find(".registro-render"),o=function(){i.html(""),c('<div class="inner"></div>').appendTo(i),c('<div class="footer"></div>').appendTo(i)};o();var r=function(){var a=i.find(".inner");s.A.get("/api/loa/agrupamentoregistrocontabil/?agrupamento=".concat(n,"&get_all=true")).then(function(n){d.each(n.data,function(n,t){if(!(a.find('.item-rc[pk="'.concat(n.id,'"]')).length>0)){var i=c('<div class="item-rc" pk="'.concat(n.id,'"></div>'));i.appendTo(a);var o=n.__str__,d=o.search(/(\d)%/g),l=0;while(d>0&&d<6&&l<10)o=" "+o,d=o.search(/(\d)%/g),l+=1;o=o.split(" - "),o[0]="<strong>".concat(o[0],"</strong>"),o=o.join(" - "),o=o.replaceAll(" ","&nbsp;"),c('<span class="texto">'.concat(o,"</span>")).appendTo(i),c('<span class="btn btn-sm btn-delete text-danger"><i class="far fa-trash-alt"></i></span>').appendTo(i).click(function(a){var n=a.target.closest(".item-rc").getAttribute("pk");s.A.delete("/api/loa/agrupamentoregistrocontabil/".concat(n,"/")).then(function(n){e.trigger("change"),a.target.closest(".item-rc").remove(),r()})})}})})};r();var l=e.find('input[name="ano_loa"')[0].value,p=e.find(".busca-render"),u=e.find('input[name="busca_despesa"]'),f=e.find("#add_registro"),v=e.find("#clean_form_search");v.click(function(a){f[0].data=null,e.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid")}),f.click(function(a){var t=f[0].data,i={};i.agrupamento=n,i.despesa=t,i.codigo=e.find('input[name="despesa_codigo"]').val(),i.orgao=e.find('input[name="despesa_orgao"]').val(),i.unidade=e.find('input[name="despesa_unidade"]').val(),i.especificacao=e.find('input[name="despesa_especificacao"]').val(),i.natureza=e.find('input[name="despesa_natureza"]').val(),i.fonte=e.find('input[name="despesa_fonte"]').val(),i.percentual=e.find('input[name="perc_despesa"]').val(),p.html("");var o=c('<div class="inner"></div>');s.A.post("/api/loa/agrupamentoregistrocontabil/create_for_agrupamento_update/",i).then(function(a){f[0].data=null,e.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid"),e.find('input[name="perc_despesa"]').val("100,00"),c('<div class="alert alert-info>Registro de Despesa Adicionado com sucesso.</div>').appendTo(o),r(),e.trigger("change")}).catch(function(a){d.isString(a.response)||d.isString(a.response.data)?c('<div class="alert alert-danger">\n              '.concat(a.message,"\n              </div>")).appendTo(o):d.forOwn(a.response.data,function(a,n){e.find("input[name=despesa_".concat(n,"], input[name=").concat(n,"_despesa]")).addClass("is-invalid"),c('<div class="alert alert-danger">\n              '.concat(d.isString(a)?a:a[0],"\n              </div>")).appendTo(o)})}).finally(function(){o.appendTo(p)})}),u.keyup(function(a){if(e.find('input[name^="despesa_"], input[name$="_despesa"]').removeClass("is-invalid"),""===a.target.value.trim())return f[0].data=null,e.find('input[name^="despesa_"]').attr("readonly",!1),void p.html("");s.A.get("/api/loa/despesaconsulta/search/?page_size=5&ano=".concat(l,"&q=").concat(a.target.value)).then(function(n){p.html("");var t=c('<div class="inner"></div>');t.appendTo(p),d.isEmpty(n.data.results)&&(f[0].data=null,e.find('input[name^="despesa_"]').attr("readonly",!1),c('<div class="alert alert-warning">\n              Nenhuma despesa encontrada nos anexos da LOA com esta informação. Você pode ainda fazer o registro manualmente no formulário acima.\n            </div>').appendTo(t));var i=a.target.value.trim().split(" ");d.each(n.data.results,function(a,n){var o="\n                Órgão...: ".concat(a.cod_orgao," - ").concat(a.esp_orgao,"<br>\n                Und Orç.: ").concat(a.cod_unidade," - ").concat(a.esp_unidade,"<br>\n                Código..: ").concat(a.codigo," - ").concat(a.especificacao,"<br>\n                Natureza: ").concat(a.cod_natureza," - ").concat(a.esp_natureza," // Fonte: ").concat(a.cod_fonte,"<br>\n                Val.Orç.: ").concat(a.str_valor," | Saldo: ").concat(a.str_saldo);d.each(i,function(a,n){var e=new RegExp("(".concat(a,")"),"ig");o=o.replace(e,'<strong class="highlight">$1</strong>')});var r='<div class="small item" pk="'.concat(a.id,'">\n                ').concat(o,"\n              </div>"),s=c(r).appendTo(t);s.click(function(n){e.find('input[name="despesa_codigo"]').val(a.codigo),e.find('input[name="despesa_orgao"]').val(a.cod_orgao),e.find('input[name="despesa_unidade"]').val(a.cod_unidade),e.find('input[name="despesa_especificacao"]').val(a.especificacao),e.find('input[name="despesa_natureza"]').val(a.cod_natureza),e.find('input[name="despesa_fonte"]').val(a.cod_fonte),e.find('input[name^="despesa_"]').attr("readonly",!0);var t=n.currentTarget.getAttribute("pk");f[0].data=t,p.html("")})})}).catch(function(){})});var m=e.find(".emendaloa-selecteds"),g=e.find(".busca-render-emendaloa"),h=e.find('input[name="busca_emendaloa"]'),_=function(){s.A.get("/api/loa/agrupamento/".concat(n,"/emendas/?&get_all=true")).then(function(a){m.html("");var e=c('<div class="inner"></div>');e.appendTo(m),d.each(a.data,function(a,t){var i=c('<div class="inner-item"></div>').appendTo(e),o=[];0===a.tipo?d.each(a.str_parlamentares,function(a,n){a=a.split(" - "),o.push(a[1])}):o=a.str_parlamentares,o=o.join("<br>");var r='<div class="item-emendaloa" pk="'.concat(a.id,'">\n                Valor da Emenda ').concat(0!==a.tipo?"Impositiva":"Modificativa",": <strong>R$ ").concat(a.str_valor,"</strong><br>\n                <strong>").concat(a.indicacao,'</strong><br>\n                <a href="').concat(a.link_detail_backend,'/edit" target="_blank">').concat(a.finalidade,"</a><br>\n                <small>").concat(o,'</small><br>\n                <span class="fase ').concat(10===a.fase?"bg-danger":12===a.fase?"bg-warning":"bg-green",'">').concat(a.str_fase,"</span>\n              </div>");c(r).appendTo(i);var l=c('<div class="inner-actions"></div>').appendTo(i);c('<span class="btn btn-delete text-danger" pk="'.concat(a.id,'" title="Remover Emenda do Agrupamento."><i class="far fa-trash-alt"></i></span>')).appendTo(l).click(function(a){var t=a.currentTarget.getAttribute("pk"),i={};i.agrupamento=n,i.emendaloa=t,s.A.post("/api/loa/agrupamentoemendaloa/delete/",i).then(function(a){_()}).catch(function(a){g.find(".alert").remove(),e.prepend(c('<div class="alert alert-danger">\n                    '.concat(a.message,"\n                    </div>")))})})})})};_(),h.keyup(function(a){if(!a.ctrlKey)if(""!==a.target.value.trim())if(a.target.value.trim().length<3)g.html("Digite ao menos três letras");else{var e=a.target.value.trim().split(" ").filter(function(a){return a.length>=3});s.A.get("/api/loa/emendaloa/search/?&get_all=true&ano=".concat(l,"&q=").concat(e.join(" "))).then(function(a){g.html("");var t=c('<div class="inner"></div>');t.appendTo(g),d.each(a.data,function(a,i){if(!(m.find('.item-emendaloa[pk="'.concat(a.id,'"]')).length>0)){var o=c('<div class="inner-item"></div>').appendTo(t),r=[];0===a.tipo?d.each(a.str_parlamentares,function(a,n){a=a.split(" - "),r.push(a[1])}):r=a.str_parlamentares,r=r.join("<br>");var l='<div class="item-emendaloa" pk="'.concat(a.id,'">\n                Valor da Emenda ').concat(0!==a.tipo?"Impositiva":"Modificativa",": <strong>R$ ").concat(a.str_valor,"</strong><br>\n                <strong>").concat(a.indicacao,'</strong><br>\n                <a href="').concat(a.link_detail_backend,'/edit" target="_blank">').concat(a.finalidade,"</a><br>\n                <small>").concat(r,'</small><br>\n                <span class="fase ').concat(10===a.fase?"bg-danger":12===a.fase?"bg-warning":"bg-green",'">').concat(a.str_fase,"</span>\n              </div>");if(d.each(e,function(a,n){var e=new RegExp("(".concat(a,")"),"ig");l=l.replace(e,'<strong class="highlight">$1</strong>')}),c(l).appendTo(o),10!==a.fase){var p=c('<div class="inner-actions"></div>').appendTo(o);c('<span class="btn text-blue" pk="'.concat(a.id,'" title="Adicionar Emenda ao Agrupamento."><i class="far fa-arrow-alt-circle-right"></i></i></span>')).appendTo(p).click(function(a){var e=a.currentTarget.getAttribute("pk"),i={};i.agrupamento=n,i.emendaloa=e,i.emendaloa__fase=15,s.A.post("/api/loa/agrupamentoemendaloa/",i).then(function(a){g.find('.item-emendaloa[pk="'.concat(a.data.emendaloa,'"]')).parent().remove(),_()}).catch(function(a){g.find(".alert").remove(),t.prepend(c('<div class="pt-2"><div class="alert alert-danger">\n                    '.concat(a.response.data[0],"\n                    </div></div>")))})})}}})})}else g.html("")}),e.keypress(function(a){if(13===a.keyCode){if(a.preventDefault(),a.target===u[0]){var n=p.find(".inner"),e=n.children();1===e.length&&e.trigger("click")}return!1}}),e.find('select[name="fase"]').change(function(a){var n=a.target;"10"===n.value?n.classList.add("is-invalid"):n.classList.remove("is-invalid")}),e.change(function(a){var n={},e=a.target.name,i=a.target.value,o="/";n[e]=i,s.A.patch("".concat(t).concat(o),n).then(function(a){r()}).catch(function(a){})}),e.trigger("change")},a.init=function(){a.LoaCRUD(),a.EmendaLoaCRUD(),a.AgrupamentoCRUD()},a.init()},c(document).ready(function(){c(".container-loa").length>0&&window.AppLOA()})}},n={};function e(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return a[t].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}e.m=a,function(){var a=[];e.O=function(n,t,i,o){if(!t){var r=1/0;for(l=0;l<a.length;l++){t=a[l][0],i=a[l][1],o=a[l][2];for(var s=!0,c=0;c<t.length;c++)(!1&o||r>=o)&&Object.keys(e.O).every(function(a){return e.O[a](t[c])})?t.splice(c--,1):(s=!1,o<r&&(r=o));if(s){a.splice(l--,1);var d=i();void 0!==d&&(n=d)}}return n}o=o||0;for(var l=a.length;l>0&&a[l-1][2]>o;l--)a[l]=a[l-1];a[l]=[t,i,o]}}(),function(){e.n=function(a){var n=a&&a.__esModule?function(){return a["default"]}:function(){return a};return e.d(n,{a:n}),n}}(),function(){e.d=function(a,n){for(var t in n)e.o(n,t)&&!e.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:n[t]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){e.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)}}(),function(){e.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){e.nmd=function(a){return a.paths=[],a.children||(a.children=[]),a}}(),function(){e.j=341}(),function(){var a={341:0};e.O.j=function(n){return 0===a[n]};var n=function(n,t){var i,o,r=t[0],s=t[1],c=t[2],d=0;if(r.some(function(n){return 0!==a[n]})){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(c)var l=c(e)}for(n&&n(t);d<r.length;d++)o=r[d],e.o(a,o)&&a[o]&&a[o][0](),a[o]=0;return e.O(l)},t=self["webpackChunkportalcmj_frontend"]=self["webpackChunkportalcmj_frontend"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=e.O(void 0,[1603,3976,8023,5914,5386,1774],function(){return e(2992)});t=e.O(t)})();