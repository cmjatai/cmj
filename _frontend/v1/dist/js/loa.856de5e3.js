!function(n){function e(e){for(var t,r,c=e[0],d=e[1],s=e[2],p=0,u=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(t in d)Object.prototype.hasOwnProperty.call(d,t)&&(n[t]=d[t]);for(l&&l(e);u.length;)u.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var n,e=0;e<o.length;e++){for(var a=o[e],t=!0,c=1;c<a.length;c++){var d=a[c];0!==i[d]&&(t=!1)}t&&(o.splice(e--,1),n=r(r.s=a[0]))}return n}var t={},i={loa:0},o=[];function r(e){if(t[e])return t[e].exports;var a=t[e]={i:e,l:!1,exports:{}};return n[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=n,r.c=t,r.d=function(n,e,a){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:a})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var t in n)r.d(a,t,function(e){return n[e]}.bind(null,t));return a},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="/static/";var c=window.webpackJsonp=window.webpackJsonp||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=d;o.push([5,"chunk-vendors"]),a()}({5:function(n,e,a){n.exports=a("8930")},8930:function(n,e,a){"use strict";a.r(e),function(n,e){a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("99af"),a("7db0"),a("b0c0"),a("d3b7"),a("ac1f"),a("a1f0"),a("5319"),a("5b81"),a("498a"),a("d02c");var t=a("cee4");t.a.defaults.xsrfCookieName="csrftoken",t.a.defaults.xsrfHeaderName="X-CSRFToken",window.AppLOA=function(){var a;if(!(this instanceof window.AppLOA))return a||(a=new window.AppLOA),a;a=this,window.AppLOA=function(){return a},a.LoaCRUD=function(){},a.EmendaLoaCRUD=function(){var a=n(".container-loa.emendaloa-update");if(0!==a.length){var i=a.find("form"),o=window.location.href.matchAll(/emendaloa\/(\d+)\//g).next().value[1],r="/api/loa/emendaloa/".concat(o);n(".container-preview").html('\n        <div class="inner-preview">\n          <a class="w-100" target="_blank" href="'.concat(r,'/view/">\n            <img src="').concat(r,"/view/?page=1&u=").concat(Date.now(),'"/>\n          </a>\n        </div>\n        <div class="btn-toolbar justify-content-between">\n          <div class="btn-group btn-group-sm">\n            <label for="id_lineHeight">\n              <span>Entrelinha (%)</span>\n              <input type="number"\n                name="lineHeight" value="150"\n                step="5"\n                min="100"\n                max="350"\n                class="decimalinput numberinput form-control text-right"\n                id="id_lineHeight">\n            </label>\n          </div>\n        </div>\n      '));var c=n(".container-preview .inner-preview img")[0];c.onload=function(n){c.style.opacity=1};var d=function(){var n=i.find('input[name="registrocontabil_set"]');n.off("change"),n.change((function(n){var e=n.target.value;t.a.delete("/api/loa/emendaloaregistrocontabil/".concat(e,"/")).then((function(e){n.target.parentElement.remove()}))}))};d();var s=i.find('input[name="ano_loa"')[0].value,l=i.find(".busca-render"),p=i.find('input[name="busca_despesa"]'),u=i.find("#add_registro");u.click((function(a){var r=u[0].data;console.log(r);var c={};c.emendaloa=o,c.despesa=r,c.codigo=i.find('input[name="despesa_codigo"]').val(),c.orgao=i.find('input[name="despesa_orgao"]').val(),c.unidade=i.find('input[name="despesa_unidade"]').val(),c.especificacao=i.find('input[name="despesa_especificacao"]').val(),c.natureza=i.find('input[name="despesa_natureza"]').val(),c.valor=i.find('input[name="valor_despesa"]').val(),l.html("");var s=n('<div class="inner"></div>');t.a.post("/api/loa/emendaloaregistrocontabil/create_for_emendaloa_update/",c).then((function(e){u[0].data=null,i.find('input[name^="despesa_"], input[name$="_despesa"]').val("").attr("readonly",!1).removeClass("is-invalid"),n('<div class="alert alert-info>Registro de Despesa Adicionado com sucesso.</div>').appendTo(s);var a=i.find('input[name="registrocontabil_set"]'),t=n('\n            <div class="custom-control custom-checkbox">\n              <input type="checkbox" class="custom-control-input" checked="checked" name="registrocontabil_set" id="id_registrocontabil_set_'.concat(a.length+1,'" value="').concat(e.data.id,'">\n              <label class="custom-control-label" for="id_registrocontabil_set_').concat(a.length+1,'">\n                ').concat(e.data.__str__,"\n              </label>\n            </div>\n          "));a.length>0?t.appendTo(a.last().parent().parent()):t.appendTo(i.find("#div_id_registrocontabil_set > div")),d(),i.trigger("change")})).catch((function(a){e.isString(a.response)||e.isString(a.response.data)?n('<div class="alert alert-danger">\n              '.concat(a.message,"\n              </div>")).appendTo(s):e.forOwn(a.response.data,(function(a,t){i.find("input[name=despesa_".concat(t,"], input[name=").concat(t,"_despesa]")).addClass("is-invalid"),n('<div class="alert alert-danger">\n              '.concat(e.isString(a)?a:a[0],"\n              </div>")).appendTo(s)}))})).finally((function(){s.appendTo(l)}))})),p.keyup((function(a){if(""===a.target.value.trim())return u[0].data=null,i.find('input[name^="despesa_"]').attr("readonly",!1),i.find('input[name^="despesa_"], input[name$="_despesa"]').removeClass("is-invalid"),void l.html("");t.a.get("/api/loa/despesaconsulta/search/?page_size=5&ano=".concat(s,"&q=").concat(a.target.value)).then((function(t){l.html("");var o=n('<div class="inner"></div>');o.appendTo(l),e.isEmpty(t.data.results)&&(u[0].data=null,i.find('input[name^="despesa_"]').attr("readonly",!1),n('<div class="alert alert-warning">\n              Nenhuma despesa encontrada nos anexos da LOA com esta informação. Você pode ainda fazer o registro manualmente no formulário acima.\n            </div>').appendTo(o));var r=a.target.value.trim().split(" ");e.each(t.data.results,(function(a,t){var c='<div class="small item hover_background_05p" pk="'.concat(a.id,'">\n                Órgão: ').concat(a.cod_orgao," - ").concat(a.esp_orgao,"<br>\n                Und Orç: ").concat(a.cod_unidade," - ").concat(a.esp_unidade,"<br>\n                Código: ").concat(a.codigo," - ").concat(a.especificacao,"<br>\n                Natureza: ").concat(a.cod_natureza,"\n              </div>");e.each(r,(function(n,e){c=c.replaceAll(n.toUpperCase(),'<strong class="text-blue">'.concat(n.toUpperCase(),"</strong>"))})),n(c).appendTo(o).click((function(n){i.find('input[name="despesa_codigo"]').val(a.codigo),i.find('input[name="despesa_orgao"]').val(a.cod_orgao),i.find('input[name="despesa_unidade"]').val(a.cod_unidade),i.find('input[name="despesa_especificacao"]').val(a.especificacao),i.find('input[name="despesa_natureza"]').val(a.cod_natureza),i.find('input[name^="despesa_"]').attr("readonly",!0);var e=n.currentTarget.getAttribute("pk");u[0].data=e,l.html("")}))}))})).catch((function(){}))})),i.keypress((function(n){if(13===n.keyCode){if(n.preventDefault(),n.target===p[0]){var e=l.find(".inner").children();1===e.length&&e.trigger("click")}return!1}})),i.change((function(n){var e={},a=n.target.name,o=n.target.value,d="/";c.style.opacity=.35;var s=n.target.getAttribute("parlamentar_id");if(null!==s)e.valor=o,e.parlamentar_id=s,d="/updatevalorparlamentar/";else{if("lineHeight"===a)return void(c.src="".concat(r,"/view/?page=1&lineHeight=").concat(o,"&u=").concat(Date.now()));e[a]=o}t.a.patch("".concat(r).concat(d),e).then((function(n){i.find('input[name="lineHeight"]').val(n.data.metadata.style.lineHeight),i.find('input[name="valor"]').val(n.data.valor),c.src="".concat(r,"/view/?page=1&u=").concat(Date.now())})).catch((function(){}))})),i.trigger("change")}},a.init=function(){a.LoaCRUD(),a.EmendaLoaCRUD()},a.init()},n(document).ready((function(){n(".container-loa").length>0&&window.AppLOA()}))}.call(this,a("1157"),a("2ef0"))},d02c:function(n,e,a){}});