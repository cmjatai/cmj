(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4ca293ce"],{"015b":function(t,e,a){},1799:function(t,e,a){"use strict";var i={name:"pagination",props:["pagination"],data:function(){return{currentPage:this.pagination.page}},watch:{currentPage:function(t,e){t!==e&&this.$emit("currentPage",t)},pagination:function(t){this.currentPage=t.page}},methods:{nextPage:function(){null!==this.pagination.next_page&&this.$emit("nextPage")},previousPage:function(){null!==this.pagination.previous_page&&this.$emit("previousPage")}}},s=(a("5eaf"),a("2877")),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0!==t.pagination.total_entries?a("div",{staticClass:"widget-pagination d-flex justify-content-between align-items-center"},[a("span",{class:["arrow",null!==t.pagination.previous_page?"hover-circle":"disabled"],on:{click:t.previousPage}},[a("i",{staticClass:"fas fa-chevron-left"})]),a("div",{staticClass:"pages"},[t._v(" "+t._s(t.pagination.start_index)+"–"+t._s(t.pagination.end_index)+" de "+t._s(t.pagination.total_entries)+" "),a("div",{staticClass:"inner"},[a("b-pagination",{attrs:{align:"right","total-rows":t.pagination.total_entries,"per-page":18},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),a("span",{class:["arrow",null!==t.pagination.next_page?"hover-circle":"disabled"],on:{click:t.nextPage}},[a("i",{staticClass:"fas fa-chevron-right"})])]):t._e()}),[],!1,null,null,null);e.a=n.exports},3202:function(t,e,a){},"37bc":function(t,e,a){"use strict";var i=a("fec6").a,s=a("2877"),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-select",{attrs:{options:t.options,"select-size":t.height},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)}),[],!1,null,null,null);e.a=n.exports},3939:function(t,e,a){},"5eaf":function(t,e,a){"use strict";a("6cd0")},"5eda":function(t,e,a){"use strict";a("015b")},"69da":function(t,e,a){"use strict";a("3939")},"6cd0":function(t,e,a){},"8de8":function(t,e,a){"use strict";a.r(e);var i=a("37bc"),s=a("aab7").a,n=(a("5eda"),a("2877")),r=Object(n.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"drop_files",attrs:{id:"drop_file"},on:{drop:t.drop_handler,dragover:t.dragover_handler,dragend:t.dragend_handler}},[a("div",{staticClass:"progress",style:"width: "+t.progress}),a("label",{staticClass:"drop_zone",attrs:{for:"input_file"}},[t.multiple?a("span",{staticClass:"inner"},[t._v(" Arraste seus arquivos e solte aqui,"),a("br"),a("small",[t._v("ou clique para selecionar")])]):t._e(),t.multiple?t._e():a("span",{staticClass:"inner"},[t._v(" Arraste seu arquivo e solte aqui,"),a("br"),a("small",[t._v("ou clique para selecionar")])]),a("input",{attrs:{multiple:t.multiple?"multiple":null,type:"file",name:"file",id:"input_file"},on:{change:t.selectFiles}})]),a("div",{staticClass:"view"},[t.src?a("img",{attrs:{src:t.src_local}}):t._e()])])}),[],!1,null,null,null).exports,l=a("f258").a,o=(a("a1ad"),Object(n.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"draftmanagelist py-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col d-flex grade"},[a("div",{staticClass:"btn-group "},[a("button",{staticClass:"btn",attrs:{title:"Atualizar lista"},on:{click:function(e){return t.drawList(0)}}},[a("i",{staticClass:"fas fa-sync-alt"})])]),a("div",{staticClass:"d-flex grade"},[a("b-form-spinbutton",{attrs:{id:"spincols",min:"1",max:"12",inline:""},model:{value:t.cols,callback:function(e){t.cols=e},expression:"cols"}}),a("b-form-spinbutton",{attrs:{id:"spinrows",min:"1",max:"100",inline:""},model:{value:t.rows,callback:function(e){t.rows=e},expression:"rows"}})],1),a("pagination",{attrs:{pagination:t.pagination},on:{nextPage:t.nextPage,previousPage:t.previousPage,currentPage:t.currentPage}}),t.draftselected?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar","aria-label":"Toolbar with button groups"}},[a("div",{staticClass:"btn-group mr-2",attrs:{role:"group","aria-label":"First group"}},[a("a",{staticClass:"btn btn-primary",attrs:{href:"/api/arq/draft/"+t.draftselected.id+"/zipfile/",target:"_blank",rel:"noopener noreferrer",title:"Baixar todos os arquivos individualmente dentro de um arquivo compactado."}},[a("i",{staticClass:"fas fa-file-archive"})])]),t._m(0)]):t._e()],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},t._l(t.draftmidialist_ordered,(function(e,i){return a("draft-midia",{key:"dm"+i,attrs:{elemento:e,cols:t.cols},on:{deletedDraftMidia:function(e){return t.drawList(-1)}}})})),1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"First group"}},[e("a",{staticClass:"btn btn-primary",attrs:{href:"#",target:"_blank",rel:"noopener noreferrer",title:"Gerar um PDF/A-2 único."}},[e("i",{staticClass:"fas fa-file-export"})])])}],!1,null,null,null).exports),c={name:"draft-manage",components:{DropZone:r,ModelSelect:i.a,DraftManageList:o},data:function(){return{draftselected:null}},methods:{clickDel:function(){var t=this;this.utils.deleteModel("arq","draft",this.draftselected.id).then((function(e){t.draftselected=null,t.$refs.draftSelect.fetchModel()})).catch((function(e){t.sendMessage({alert:"danger",message:e.response.data.message,time:10})}))},clickAdd:function(){var t=this;this.utils.postModel("arq","draft",{descricao:"New Draft ".concat((new Date).toLocaleString())}).then((function(e){t.$refs.draftSelect.fetchModel()})).catch((function(t){console.log(t)}))},uploadedFiles:function(t){"OK"===t.statusText&&this.$refs.listdraft.fetchMidias(this.draftselected,1)},changeDescricao:function(t){var e=this;e.utils.patchModel("arq","draft",e.draftselected.id,{descricao:t}).then((function(t){e.$refs.draftSelect.fetchModel()}))}},mounted:function(){}},d=(a("69da"),Object(n.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"draft-manage container-fluid py-3"},[a("h1",[t._v("Draft")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 d-flex"},[a("div",{staticClass:"btn-group-vertical mr-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.clickAdd}},[t._v("+")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:null===t.draftselected},on:{click:t.clickDel}},[t._v("-")])]),a("div",{staticClass:"d-flex flex-column w-100"},[a("model-select",{ref:"draftSelect",staticClass:"form-opacity d-flex w-100",attrs:{app:"arq",model:"draft",choice:"descricao",ordering:"descricao",height:3},on:{change:function(e){return t.draftselected=e}}}),t.draftselected?a("div",{staticClass:"pt-2"},[a("b-form-input",{on:{change:function(e){return t.changeDescricao(e)}},model:{value:t.draftselected.descricao,callback:function(e){t.$set(t.draftselected,"descricao",e)},expression:"draftselected.descricao"}})],1):t._e()],1)]),a("div",{staticClass:"col-9"},[a("div",{staticClass:"drop-area"},[t.draftselected?a("drop-zone",{attrs:{pk:t.draftselected.id,multiple:!0},on:{uploaded:t.uploadedFiles}}):t._e()],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.draftselected,expression:"draftselected"}]},[a("draft-manage-list",{ref:"listdraft",attrs:{draftselected:t.draftselected}})],1)])}),[],!1,null,null,null));e.default=d.exports},a1ad:function(t,e,a){"use strict";a("beb7")},aab7:function(t,e,a){"use strict";(function(t){e.a={name:"drop-zone",props:["src","multiple","pk"],data:function(){return{src_local:this.src,progress:"0%"}},watch:{src:function(t,e){this.src_local=this.src}},methods:{selectFiles:function(t){var e=t.currentTarget.files;0!==e.length&&this.sendFiles(e)},sendFiles:function(e){for(var a=this,i=this,s=new FormData,n=0;n<e.length;n++)s.append("arquivos",e[n]),s.append("lastmodified",e[n].lastModified);i.utils.postModelAction("arq","draft",i.pk,"uploadfiles",s,{onUploadProgress:function(t){var e=Math.round(100*t.loaded/t.total);a.progress="".concat(e,"%")}}).then((function(e){a.progress="0%",i.src_local=i.src+"?"+t.now(),i.$emit("uploaded",e),i.sendMessage({alert:"success",message:"Envio de Arquivos concluído...",time:5})})).catch((function(t){return i.sendMessage({alert:"danger",message:"Não foi possível enviar os arquivos...",time:5})}))},drop_handler:function(t){if(void 0!==t){t.preventDefault();var e=t.dataTransfer;if(e.items){for(var a=Array(),i=0;i<e.items.length;i++)"file"===e.items[i].kind&&a.push(e.items[i].getAsFile());this.sendFiles(e.files)}else this.sendFiles(e.files)}},dragover_handler:function(t){t.preventDefault()},dragend_handler:function(t){var e=t.dataTransfer;if(e.items)for(var a=0;a<e.items.length;a++)e.items.remove(a);else t.dataTransfer.clearData()}}}}).call(this,a("2ef0"))},beb7:function(t,e,a){},da96:function(t,e,a){"use strict";a("3202")},f258:function(t,e,a){"use strict";(function(t){a("b64b"),a("99af");var i=a("fb53"),s=a("1799");e.a={name:"draft-manage-list",props:["draftselected"],components:{DraftMidia:i.a,Pagination:s.a},data:function(){return{pagination:{},draftmidialist:{},cols:1,rows:10}},computed:{draftmidialist_ordered:{get:function(){return t.orderBy(this.draftmidialist,["sequencia"],["asc"])}}},watch:{draftselected:function(t,e){this.fetchMidias(t)},rows:function(t,e){this.fetchMidias(this.draftselected)},cols:function(t,e){this.fetchMidias(this.draftselected)}},mounted:function(){this.changeMatriz()},methods:{drawList:function(t){var e=Object.keys(this.draftmidialist).length;-1===t?this.fetchMidias(this.draftselected,e>1?this.pagination.page:this.pagination.previous_page||1):this.fetchMidias(this.draftselected,e>0?this.pagination.page:this.pagination.previous_page||1)},changeMatriz:function(){var e=document.getElementsByClassName("draft-midia"),a=this;t.each(e,(function(t,e){t.style.maxWidth="".concat(100/a.cols,"%"),t.style.flex="0 0 ".concat(100/a.cols,"%")}))},currentPage:function(t){null!==t&&t>=0&&this.fetchMidias(this.draftselected,t)},nextPage:function(){this.fetchMidias(this.draftselected,this.pagination.next_page)},previousPage:function(){this.fetchMidias(this.draftselected,this.pagination.previous_page)},fetchMidias:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this;null!==e&&e.id>0?(i.$set(i,"draftmidialist",{}),i.$nextTick().then((function(){i.utils.getModelOrderedList("arq","draftmidia","sequencia",a,"&draft=".concat(e.id,"&page_size=").concat(i.rows*i.cols)).then((function(e){i.$set(i,"pagination",e.data.pagination),t.each(e.data.results,(function(t,e){i.$set(i.draftmidialist,t.id,t)}))})).then((function(){i.changeMatriz()})).catch((function(t){return i.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})}))}))):i.$set(i,"draftmidialist",{})}}}}).call(this,a("2ef0"))},fb53:function(t,e,a){"use strict";var i={name:"draft-midia",props:["elemento","cols"],methods:{clickDel:function(){var t=this;t.utils.deleteModel("arq","draftmidia",t.elemento.id).then((function(e){t.$emit("deletedDraftMidia")})).catch((function(e){t.sendMessage({alert:"danger",message:e.response.data.message,time:10})}))}}},s=(a("da96"),a("2877")),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["draft-midia","p-2"],attrs:{id:"dm"+t.elemento.id}},[a("div",{class:["inner",t.elemento.metadata.ocrmypdf.pdfa?"border-blue":"application/pdf"===t.elemento.metadata.uploadedfile.content_type?"border-red":"border-green"]},[a("div",{staticClass:"inner-action"},[a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar","aria-label":"Toolbar with button groups"}},[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"First group"}},[a("a",{staticClass:"btn btn-outline-danger",attrs:{title:"Apagar Mídia"},on:{click:t.clickDel}},[a("i",{staticClass:"fas fa-trash-alt"})])])])]),a("div",{staticClass:"innerimg"},[a("a",{attrs:{href:t.elemento.arquivo,target:"_blank"}},[a("img",{attrs:{src:t.elemento.arquivo+"?page=1&dpi=96"}})])]),a("div",{class:["innerdesc"]},[a("strong",{domProps:{innerHTML:t._s(t.elemento.metadata.uploadedfile.name)}}),a("br"),a("small",{directives:[{name:"show",rawName:"v-show",value:t.elemento.metadata.ocrmypdf.pdfa,expression:"elemento.metadata.ocrmypdf.pdfa"}]},[t._v("PDF/A-2 com OCR")])])])])}),[],!1,null,null,null);e.a=n.exports},fec6:function(t,e,a){"use strict";(function(t){e.a={name:"model-select",props:["app","model","label","limit","ordering","choice","height"],data:function(){return{selected:null,options:[]}},watch:{selected:function(t,e){this.$emit("change",t)}},methods:{fetch:function(t){this.fetchModel()},fetchModel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this;1===e&&(1===a.height?a.options=[{value:null,text:this.label}]:a.options=[]),a.utils.getModelOrderedList(a.app,a.model,a.ordering,e).then((function(e){t.each(e.data.results,(function(t,e){a.options.push({value:t,text:t[a.choice]}),a.refreshState({app:a.app,model:a.model,value:t,id:t.id})})),null!==e.data.pagination.next_page&&a.fetchModel(e.data.pagination.next_page)})).catch((function(t){return a.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})}))}},created:function(){this.fetchModel()}}}).call(this,a("2ef0"))}}]);