(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4ca293ce"],{"015b":function(e,t,a){},1799:function(e,t,a){"use strict";var i={name:"pagination",props:["pagination"],data:function(){return{currentPage:this.pagination.page}},watch:{currentPage:function(e,t){e!==t&&this.$emit("currentPage",e)},pagination:function(e){this.currentPage=e.page}},methods:{nextPage:function(){null!==this.pagination.next_page&&this.$emit("nextPage")},previousPage:function(){null!==this.pagination.previous_page&&this.$emit("previousPage")}}},s=(a("5eaf"),a("2877")),n=Object(s.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return 0!==e.pagination.total_entries?a("div",{staticClass:"widget-pagination d-flex justify-content-between align-items-center"},[a("span",{class:["arrow",null!==e.pagination.previous_page?"hover-circle":"disabled"],on:{click:e.previousPage}},[a("i",{staticClass:"fas fa-chevron-left"})]),a("div",{staticClass:"pages"},[e._v(" "+e._s(e.pagination.start_index)+"–"+e._s(e.pagination.end_index)+" de "+e._s(e.pagination.total_entries)+" "),a("div",{staticClass:"inner"},[a("b-pagination",{attrs:{align:"right","total-rows":e.pagination.total_entries,"per-page":18},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),a("span",{class:["arrow",null!==e.pagination.next_page?"hover-circle":"disabled"],on:{click:e.nextPage}},[a("i",{staticClass:"fas fa-chevron-right"})])]):e._e()}),[],!1,null,null,null);t.a=n.exports},3202:function(e,t,a){},"37bc":function(e,t,a){"use strict";var i=a("fec6").a,s=a("2877"),n=Object(s.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form-select",{attrs:{options:e.options,"select-size":e.height},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),[],!1,null,null,null);t.a=n.exports},3939:function(e,t,a){},"5eaf":function(e,t,a){"use strict";a("6cd0")},"5eda":function(e,t,a){"use strict";a("015b")},"69da":function(e,t,a){"use strict";a("3939")},"6cd0":function(e,t,a){},"8de8":function(e,t,a){"use strict";a.r(t);var i=a("37bc"),s=a("aab7").a,n=(a("5eda"),a("2877")),o=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"drop_files",attrs:{id:"drop_file"},on:{drop:e.drop_handler,dragover:e.dragover_handler,dragend:e.dragend_handler}},[a("div",{staticClass:"progress",style:"width: "+e.progress}),a("label",{staticClass:"drop_zone",attrs:{for:"input_file"}},[e.multiple?a("span",{staticClass:"inner"},[e._v(" Arraste seus arquivos e solte aqui,"),a("br"),a("small",[e._v("ou clique para selecionar")])]):e._e(),e.multiple?e._e():a("span",{staticClass:"inner"},[e._v(" Arraste seu arquivo e solte aqui,"),a("br"),a("small",[e._v("ou clique para selecionar")])]),a("input",{attrs:{multiple:e.multiple?"multiple":null,type:"file",name:"file",id:"input_file"},on:{change:e.selectFiles}})]),a("div",{staticClass:"view"},[e.src?a("img",{attrs:{src:e.src_local}}):e._e()])])}),[],!1,null,null,null).exports,r=a("f258").a,c=(a("a1ad"),Object(n.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"draftmanagelist"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col d-flex grade"},[a("div",{staticClass:"btn-group "},[a("button",{staticClass:"btn",attrs:{title:"Atualizar lista"},on:{click:function(t){return e.drawList(0)}}},[a("i",{staticClass:"fas fa-sync-alt"})])]),a("div",{staticClass:"d-flex grade"},[a("b-form-spinbutton",{attrs:{id:"spincols",min:"1",max:"12",inline:""},model:{value:e.cols,callback:function(t){e.cols=t},expression:"cols"}}),a("b-form-spinbutton",{attrs:{id:"spinrows",min:"1",max:"100",inline:""},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}})],1),a("pagination",{attrs:{pagination:e.pagination},on:{nextPage:e.nextPage,previousPage:e.previousPage,currentPage:e.currentPage}}),e.draftselected?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar","aria-label":"Toolbar with button groups"}},[a("a",{staticClass:"btn btn-danger",attrs:{title:"Excluir Draft Atual",disabled:null===e.draftselected},on:{click:e.clickDel}},[a("i",{staticClass:"fas fa-trash-alt"})]),a("a",{staticClass:"btn btn-primary ml-2 btn-pdf2pdfa",attrs:{title:"Iniciar conversão para PDF/A-2b de todos os arquivos do Draft selecionado."},on:{click:e.clickPdf2Pdfa}},[e._m(0)]),a("a",{staticClass:"btn btn-primary ml-2",attrs:{href:"/api/arq/draft/"+e.draftselected.id+"/zipfile/",target:"_blank",rel:"noopener noreferrer",title:"Baixar todos os arquivos individualmente dentro de um arquivo compactado."}},[a("i",{staticClass:"fas fa-file-archive"})]),a("a",{staticClass:"btn btn-primary ml-2",attrs:{title:"Unir PDFs do Draft em apenas um PDF"},on:{click:e.clickUnir}},[a("i",{staticClass:"fas fa-layer-group"})])]):e._e()],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},e._l(e.draftmidialist_ordered,(function(t,i){return a("draft-midia",{key:"dm"+i,attrs:{elemento:t,cols:e.cols},on:{redrawDraftMidia:function(t){return e.drawList(-1)},updateElement:e.updateElement}})})),1)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[this._v(" PDF ->"),t("br"),this._v("PDF/A-2b ")])}],!1,null,null,null).exports),d={name:"draft-help"},l=Object(n.a)(d,(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("hr"),a("h3",[e._v("O que é o Draft?")]),a("h5",{staticStyle:{"padding-left":"5vw","padding-bottom":"1em"}},[e._v(" Draft é uma ferramenta para criação e edição de arquivos PDF/A-2b,"),a("br"),e._v("além de também fazer OCR e converter DOC, DOCx, ODT, XLS, XLSX, ODS, TIF, TIFF, PNG e JPG para PDFs."),a("br")]),e._v(" Esta área é só sua. Os Drafts criados aqui não são públicos e não são vistos por outros usuários."),a("br"),e._v(' Cada Draft é uma área de criação independente. Clique no botão "+" acima para incluir um novo Draft.'),a("br"),a("br"),e._v(" Em um Draft você pode incluir vários PDFs, bem como desmembrar, excluir, rotacionar e reunir páginas. "),a("br"),e._v(" Alem de arquivos DOC, DOCx, ODT, XLS, XLSX, ODS, PNG e JPG, que serão imediatamente convertidos para PDF."),a("br"),a("br"),e._v(' No Draft é possível adicionar vários PDFs e clicar no botão "PDF -> PDF/A-2b" que acionará uma tarefa interna do Draft que transformará seus arquivos em PDF/A-2b com OCR. Com seus arquivos já editados, você poderá baixá-los em um arquivo compactado se em seu Draft houver mais que um arquivo ou ainda clicar sobre ele e abrir uma nova janela para então salvar em seus documentos locais.'),a("br"),a("div",{staticClass:"d-none"},[e._v(" Nas próximas versões da ferramenta, em breve, será adicionado reposicionamento de páginas e baixa/alta compactação de imagens para geração de PDFs reduzidos."),a("br")]),e._v(" No canto superior esquerdo de cada arquivo aparece um círculo que pode possuir três cores: "),a("ul",[a("li",[e._v("Círculo vermelho - Significa que o arquivo não foi analisado desde a adição ou devido a edições, e não há garantia que possua OCR ou seja um PDF/A-2b.")]),a("li",[e._v('Circulo amarelo - Significa que você acionou um conversor "PDF -> PDF/A-2b" e que o Draft está trabalhando nessa tarefa. Tal tarefa não é feita em seu computador e neste momento está sendo feita em nuvem, o que significa que você pode fechar o site, ir fazer outras tarefas e, mais tarde, pegar seus arquivos já convertidos. Isso mesmo: se forem muitos arquivos e/ou muitas páginas, o processo de conversão pode demorar de minutos a horas. ')]),a("li",[e._v('Circulo verde - O processamento de "PDF -> PDF/A-2b" já está concluído e você pode baixar seu arquivo.')])]),e._v(' Já no canto superior direito, em "'),a("small",[a("i",{staticClass:"fas fa-ellipsis-v"})]),e._v('", você encontra as opções exclusivas do PDF em edição, que seria: '),a("ul",[a("li",[e._v('"PDF -> PDF/A-2b" - do PDF em específico.')]),a("li",[e._v('"Docompor" - que decompõe um PDF de várias páginas em vários PDFs de uma página.')]),a("li",[e._v('"Excluir" - que exclui apenas o PDF em edição.')])]),a("strong",[e._v(" E, muito importante, seu Draft será automaticamente apagado depois de uma semana que você o criar, afinal, é um "),a("em",[e._v("Draft")]),e._v(' ("rascunho", em inglês). ')])])}],!1,null,null,null).exports,u={name:"draft-manage",components:{DropZone:o,ModelSelect:i.a,DraftManageList:c,DraftHelp:l},data:function(){return{draftselected:null}},methods:{reloadDrafts:function(){this.draftselected=null,this.$refs.draftSelect.fetchModel()},clickAdd:function(){var e=this;this.utils.postModel("arq","draft",{descricao:"New Draft ".concat((new Date).toLocaleString())}).then((function(t){e.$refs.draftSelect.fetchModel()})).catch((function(e){console.log(e)}))},uploadedFiles:function(e){"OK"===e.statusText&&this.$refs.listdraft.fetchMidias(this.draftselected,1)},changeDescricao:function(e){var t=this;t.utils.patchModel("arq","draft",t.draftselected.id,{descricao:e}).then((function(e){t.$refs.draftSelect.fetchModel()}))}},mounted:function(){this.removeAside()}},f=(a("69da"),Object(n.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"draft-manage container-fluid py-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 d-flex"},[a("div",{staticClass:"d-flex flex-column w-100"},[a("div",{staticClass:"d-flex "},[a("div",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",title:"Novo Draft"},on:{click:e.clickAdd}},[e._v("+")])]),a("h1",{staticClass:"ml-2"},[e._v("Draft")])]),a("model-select",{ref:"draftSelect",staticClass:"form-opacity d-flex w-100",attrs:{app:"arq",model:"draft",choice:"descricao",ordering:"descricao",height:8},on:{change:function(t){return e.draftselected=t}}}),e.draftselected?a("div",{staticClass:"d-flex"},[a("b-form-input",{on:{change:function(t){return e.changeDescricao(t)}},model:{value:e.draftselected.descricao,callback:function(t){e.$set(e.draftselected,"descricao",t)},expression:"draftselected.descricao"}})],1):e._e(),a("div",{staticClass:"drop-area"},[e.draftselected?a("drop-zone",{attrs:{pk:e.draftselected.id,multiple:!0},on:{uploaded:e.uploadedFiles}}):e._e()],1)],1)]),a("div",{staticClass:"col-9 container-manage-list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.draftselected,expression:"draftselected"}]},[a("draft-manage-list",{ref:"listdraft",attrs:{draftselected:e.draftselected},on:{reloadDrafts:e.reloadDrafts}})],1),a("draft-help")],1)])])}),[],!1,null,null,null));t.default=f.exports},a1ad:function(e,t,a){"use strict";a("beb7")},aab7:function(e,t,a){"use strict";(function(e){t.a={name:"drop-zone",props:["src","multiple","pk"],data:function(){return{src_local:this.src,progress:"0%"}},watch:{src:function(e,t){this.src_local=this.src}},methods:{selectFiles:function(e){var t=e.currentTarget.files;0!==t.length&&this.sendFiles(t)},sendFiles:function(t){for(var a=this,i=this,s=new FormData,n=0;n<t.length;n++)s.append("arquivos",t[n]),s.append("lastmodified",t[n].lastModified);i.utils.postModelAction("arq","draft",i.pk,"uploadfiles",s,{onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);a.progress="".concat(t,"%")}}).then((function(t){a.progress="0%",i.src_local=i.src+"?"+e.now(),i.$emit("uploaded",t),i.sendMessage({alert:"success",message:"Envio de Arquivos concluído...",time:5})})).catch((function(e){return i.sendMessage({alert:"danger",message:e.response.data[0]||e.response.data.detail||"Não foi possível enviar os arquivos...",time:10})}))},drop_handler:function(e){if(void 0!==e){e.preventDefault();var t=e.dataTransfer;if(t.items){for(var a=Array(),i=0;i<t.items.length;i++)"file"===t.items[i].kind&&a.push(t.items[i].getAsFile());this.sendFiles(t.files)}else this.sendFiles(t.files)}},dragover_handler:function(e){e.preventDefault()},dragend_handler:function(e){var t=e.dataTransfer;if(t.items)for(var a=0;a<t.items.length;a++)t.items.remove(a);else e.dataTransfer.clearData()}}}}).call(this,a("2ef0"))},beb7:function(e,t,a){},da96:function(e,t,a){"use strict";a("3202")},f258:function(e,t,a){"use strict";(function(e){a("b64b"),a("99af");var i=a("fb53"),s=a("1799");t.a={name:"draft-manage-list",props:["draftselected"],components:{DraftMidia:i.a,Pagination:s.a},data:function(){return{pagination:{},draftmidialist:{},cols:4,rows:3}},computed:{draftmidialist_ordered:{get:function(){return e.orderBy(this.draftmidialist,["sequencia"],["asc"])}}},watch:{draftselected:function(e,t){this.fetchMidias(e)},rows:function(e,t){this.fetchMidias(this.draftselected)},cols:function(e,t){this.fetchMidias(this.draftselected)}},mounted:function(){this.changeMatriz()},methods:{clickUnir:function(){var e=this,t=this;t.utils.getModelAction("arq","draft",this.draftselected.id,"unirmidias").then((function(t){e.fetchMidias(e.draftselected)})).catch((function(e){t.sendMessage({alert:"danger",message:e.response.data.message,time:10})}))},clickPdf2Pdfa:function(){var e=this,t=this;t.utils.getModelAction("arq","draft",this.draftselected.id,"pdf2pdfa").then((function(t){e.fetchMidias(e.draftselected)})).catch((function(e){t.sendMessage({alert:"danger",message:e.response.data.message,time:10})}))},clickDel:function(){var e=this;this.utils.deleteModel("arq","draft",this.draftselected.id).then((function(t){e.$emit("reloadDrafts")})).catch((function(t){e.sendMessage({alert:"danger",message:t.response.data.message,time:10})}))},drawList:function(e){var t=Object.keys(this.draftmidialist).length;-1===e?this.fetchMidias(this.draftselected,t>1?this.pagination.page:this.pagination.previous_page||1):this.fetchMidias(this.draftselected,t>0?this.pagination.page:this.pagination.previous_page||1)},changeMatriz:function(){var t=document.getElementsByClassName("draft-midia"),a=this;e.each(t,(function(e,t){e.style.maxWidth="".concat(100/a.cols,"%"),e.style.flex="0 0 ".concat(100/a.cols,"%")}))},currentPage:function(e){null!==e&&e>=0&&this.fetchMidias(this.draftselected,e)},updateElement:function(e){this.$set(this.draftmidialist,e.id,e)},nextPage:function(){this.fetchMidias(this.draftselected,this.pagination.next_page)},previousPage:function(){this.fetchMidias(this.draftselected,this.pagination.previous_page)},fetchMidias:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this;null!==t&&t.id>0?(i.$set(i,"draftmidialist",{}),i.$nextTick().then((function(){i.utils.getModelOrderedList("arq","draftmidia","sequencia",a,"&draft=".concat(t.id,"&page_size=").concat(i.rows*i.cols)).then((function(t){i.$set(i,"pagination",t.data.pagination),e.each(t.data.results,(function(e,t){i.$set(i.draftmidialist,e.id,e)}))})).then((function(){i.changeMatriz()})).catch((function(e){return i.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})}))}))):i.$set(i,"draftmidialist",{})}}}}).call(this,a("2ef0"))},fb53:function(e,t,a){"use strict";a("99af");var i={name:"draft-midia",props:["elemento","cols"],data:function(){return{page:1,data:(new Date).getTime()}},watch:{elemento:function(e,t){10===this.elemento.metadata.ocrmypdf.pdfa&&this.timeoutUpdate()}},mounted:function(){10===this.elemento.metadata.ocrmypdf.pdfa&&this.timeoutUpdate()},methods:{timeoutUpdate:function(){var e=this;setTimeout((function(){e.utils.getModel("arq","draftmidia",e.elemento.id).then((function(t){10===t.data.metadata.ocrmypdf.pdfa?(console.log("timeoutUpdate novamente"),e.timeoutUpdate()):(console.log("timeoutUpdate Fim"),e.$emit("updateElement",t.data))}))}),5e3)},clickDel:function(){var e=this;e.utils.deleteModel("arq","draftmidia",e.elemento.id).then((function(t){e.$emit("redrawDraftMidia")})).catch((function(t){e.sendMessage({alert:"danger",message:t.response.data.message,time:10})}))},clickDraftmidiaAction:function(e){var t=this;t.utils.getModelAction("arq","draftmidia",t.elemento.id,e).then((function(e){t.$emit("redrawDraftMidia")})).catch((function(e){t.sendMessage({alert:"danger",message:e.response.data.message,time:10})}))},clickRotate:function(e){var t=this;t.utils.getByMetadata({action:"rotate",app:"arq",model:"draftmidia",id:t.elemento.id},"page=".concat(t.page,"&angulo=").concat(e)).then((function(e){t.data=(new Date).getTime(),t.$emit("updateElement",e.data)})).catch((function(e){t.sendMessage({alert:"danger",message:e.response.data.message,time:10})}))}}},s=(a("da96"),a("2877")),n=Object(s.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["draft-midia","p-2"],attrs:{id:"dm"+e.elemento.id}},[a("div",{staticClass:"inner"},[a("div",{class:["inner-status",99===e.elemento.metadata.ocrmypdf.pdfa?"border-green":10===e.elemento.metadata.ocrmypdf.pdfa?"border-yellow":"border-red"],domProps:{innerHTML:e._s(99===e.elemento.metadata.ocrmypdf.pdfa?"PDF/A-2b":10===e.elemento.metadata.ocrmypdf.pdfa?"Conversão Agendada":"Não PDF/A-2b")}}),a("div",{staticClass:"inner-action"},[a("div",{directives:[{name:"show",rawName:"v-show",value:10!==e.elemento.metadata.ocrmypdf.pdfa,expression:"elemento.metadata.ocrmypdf.pdfa !== 10"}],staticClass:"dropleft"},[e._m(0),a("div",{staticClass:"dropdown-menu"},[a("a",{directives:[{name:"show",rawName:"v-show",value:99!==e.elemento.metadata.ocrmypdf.pdfa,expression:"elemento.metadata.ocrmypdf.pdfa !== 99"}],staticClass:"dropdown-item",attrs:{title:"PDF -> PDF/A-2b"},on:{click:function(t){return e.clickDraftmidiaAction("pdf2pdfa")}}},[e._v("PDF -> PDF/A-2b")]),a("a",{directives:[{name:"show",rawName:"v-show",value:99==e.elemento.metadata.ocrmypdf.pdfa,expression:"elemento.metadata.ocrmypdf.pdfa == 99"}],staticClass:"dropdown-item",attrs:{title:"PDF/A-2b Compact"},on:{click:function(t){return e.clickDraftmidiaAction("pdfacompact")}}},[e._v("PDF/A-2b Compact")]),a("a",{staticClass:"dropdown-item",attrs:{title:"Gerar um PDF para cada página"},on:{click:function(t){return e.clickDraftmidiaAction("decompor")}}},[e._v("Decompor "),a("i",{staticClass:"fas fa-expand"})]),a("a",{staticClass:"dropdown-item",attrs:{title:"Apagar Mídia"},on:{click:e.clickDel}},[e._v("Apagar "),a("i",{staticClass:"fas fa-trash-alt"})])])])]),a("div",{staticClass:"innerimg"},[a("a",{attrs:{href:e.elemento.arquivo,target:"_blank"}},[a("img",{attrs:{src:e.elemento.arquivo+"?page="+e.page+"&dpi=48&u="+e.data}})]),a("div",{staticClass:"img-actions"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.elemento.metadata.uploadedfile.paginas>1,expression:"elemento.metadata.uploadedfile.paginas > 1"}]},[a("b-form-spinbutton",{attrs:{id:"spinpages",min:"1",max:e.elemento.metadata.uploadedfile.paginas},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(t){return e.clickRotate(-90)}}},[a("i",{staticClass:"fas fa-undo"})]),a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(t){return e.clickRotate(90)}}},[a("i",{staticClass:"fas fa-redo"})])])]),a("div",{class:["innerdesc"]},[a("strong",{domProps:{innerHTML:e._s(e.elemento.metadata.uploadedfile.name)}}),a("small",{domProps:{innerHTML:e._s(e.elemento.arquivo_size[1]+" MB")}}),a("small",{directives:[{name:"show",rawName:"v-show",value:99===e.elemento.metadata.ocrmypdf.pdfa,expression:"elemento.metadata.ocrmypdf.pdfa === 99"}]},[e._v("PDF/A-2b com OCR")])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-sm",attrs:{type:"button","data-toggle":"dropdown","aria-expanded":"true"}},[t("i",{staticClass:"fas fa-ellipsis-v"})])}],!1,null,null,null);t.a=n.exports},fec6:function(e,t,a){"use strict";(function(e){t.a={name:"model-select",props:["app","model","label","limit","ordering","choice","height"],data:function(){return{selected:null,options:[]}},watch:{selected:function(e,t){this.$emit("change",e)}},methods:{fetch:function(e){this.fetchModel()},fetchModel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this;1===t&&(1===a.height?a.options=[{value:null,text:this.label}]:a.options=[]),a.utils.getModelOrderedList(a.app,a.model,a.ordering,t).then((function(t){e.each(t.data.results,(function(e,t){a.options.push({value:e,text:e[a.choice]}),a.refreshState({app:a.app,model:a.model,value:e,id:e.id})})),null!==t.data.pagination.next_page&&a.fetchModel(t.data.pagination.next_page)})).catch((function(e){return a.sendMessage({alert:"danger",message:"Não foi possível recuperar a lista...",time:5})}))}},created:function(){this.fetchModel()}}}).call(this,a("2ef0"))}}]);