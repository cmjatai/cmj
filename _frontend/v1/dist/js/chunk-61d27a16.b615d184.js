(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-61d27a16"],{3499:function(t,e,a){"use strict";a("5f68")},3955:function(t,e,a){"use strict";(function(t){a("99af"),a("ac1f"),a("5319");var s=a("de88");e.a={name:"doc-list-layout",components:{ArqDocItem:s.a},data:function(){return{params_node:this.$route.params.node,params_nodechild:this.$route.params.nodechild,classe:null,node_key_localstorage:"portalcmj_arqnode_tree_opened",arqdocs:{},ARQCLASSE_FISICA:100,ARQCLASSE_LOGICA:200}},mounted:function(){var e=this;e.fetchClasse().then((function(a){t.each(e.classe.parents,(function(t,a){localStorage.addArrayOfIds(e.node_key_localstorage,t.id)})),e.$emit("checkIsOpenedNodesTree");var s=e.classe.perfil===e.ARQCLASSE_FISICA?"classe_estrutural":"classe_logica";e.fetch(1,"&get_all=True&".concat(s,"=").concat(e.classe.id))}))},computed:{arqdocs_ordered:{get:function(){return t.orderBy(this.arqdocs,["id"],["desc"])}},descricao_html:function(){var t=this.classe.descricao;return t=(t=t.replace("\r\n","<br>")).replace("\n","<br>")}},methods:{clickItemBreadCrumb:function(){this.$refs.noderoot.reload()},fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=this;return s.$set(s,"arqdocs",{}),s.utils.getModelOrderedList("arq","arqdoc","-data",e,a).then((function(e){t.each(e.data,(function(t,e){s.$set(s.arqdocs,t.id,t)}))})).catch((function(t){return s.sendMessage({alert:"danger",message:"Não foi possível recuperar os documentos...",time:5})}))},fetchClasse:function(){var t=this;return"root"===t.params_nodechild?null:t.utils.getModel("arq","arqclasse",t.params_nodechild).then((function(e){return t.classe=e.data,e})).catch((function(e){return t.sendMessage({alert:"danger",message:"Não foi possível recuperar classe selecionada...",time:5})}))}}}}).call(this,a("2ef0"))},"4df4":function(t,e,a){"use strict";var s=a("da84"),i=a("0366"),c=a("c65b"),r=a("7b0b"),n=a("9bdd"),o=a("e95a"),l=a("68ee"),d=a("07fa"),u=a("8418"),f=a("9a1f"),p=a("35a1"),h=s.Array;t.exports=function(t){var e=r(t),a=l(this),s=arguments.length,v=s>1?arguments[1]:void 0,m=void 0!==v;m&&(v=i(v,s>2?arguments[2]:void 0));var _,g,b,C,q,w,k=p(e),y=0;if(!k||this==h&&o(k))for(_=d(e),g=a?new this(_):h(_);_>y;y++)w=m?v(e[y],y):e[y],u(g,y,w);else for(q=(C=f(e,k)).next,g=a?new this:[];!(b=c(q,C)).done;y++)w=m?n(C,v,[b.value,y],!0):b.value,u(g,y,w);return g.length=y,g}},"5ebe":function(t,e,a){},"5f68":function(t,e,a){},"94e9":function(t,e,a){"use strict";a.r(e);var s=a("3955").a,i=(a("a346"),a("2877")),c=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.classe?a("div",{staticClass:"doclist-layout container-fluid"},[t.classe.parents?a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},t._l(t.classe.parents,(function(e,s){return a("li",{key:"cp-"+s,staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:{name:"arqchildroute",params:{node:s>0?t.classe.parents[s-1].id:"root",nodechild:e.id}}},nativeOn:{click:function(e){return t.clickItemBreadCrumb.apply(null,arguments)}}},[t._v(" "+t._s(e.titulo)+" ")])],1)})),0)]):t._e(),a("div",{staticClass:"row-fluid"},[a("div",{staticClass:"col"},[a("h2",[t._v(t._s(t.classe.titulo))]),a("small",{domProps:{innerHTML:t._s(t.descricao_html)}}),a("div",{staticClass:"inner-list"},t._l(t.arqdocs_ordered,(function(e,s){return a("arq-doc-item",{key:"ad-"+s,attrs:{arqdoc:e,classe:t.classe}},[t._v(" "+t._s(e.titulo)+" ")])})),1),a("div",{staticClass:"text-info"},[t._v("TODO: implementar paginação")])]),a("div",{staticClass:"col-3 d-none"},[a("div",{staticClass:"classechild"},[a("h4",[t._v(" Subclasses de "+t._s(t.classe.titulo)+" ")]),t._v(" "+t._s(t.params_node)+" - "+t._s(t.params_nodechild)+" ")])])])]):t._e()}),[],!1,null,null,null);e.default=c.exports},"9bdd":function(t,e,a){var s=a("825a"),i=a("2a62");t.exports=function(t,e,a,c){try{return c?e(s(a)[0],a[1]):e(a)}catch(e){i(t,"throw",e)}}},a346:function(t,e,a){"use strict";a("5ebe")},de88:function(t,e,a){"use strict";a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("a15b"),a("ac1f"),a("1276");var s=a("bc3a"),i=a.n(s),c={name:"arq-doc-item",props:["arqdoc","classe"],data:function(){return{imgdisplay:!1,img_src:null,dpi:72,page:1}},watch:{dpi:function(t,e){this.img_src="".concat(this.arqdoc.arquivo,"?page=").concat(this.page,"&dpi=").concat(t)},page:function(t,e){this.img_src="".concat(this.arqdoc.arquivo,"?page=").concat(t,"&dpi=").concat(this.dpi)},img_src:function(t,e){var a=this;i()({url:t,method:"GET",responseType:"blob"}).then((function(t){return a.imgdisplay=!0,t})).then((function(t){var e=new Blob([t.data],{type:"image/png"}),s=(window.URL||window.webkitURL).createObjectURL(e);a.$refs.imgpreview.src=s})).catch((function(t){a.page>1?(a.page-=1,a.sendMessage({alert:"info",message:"Esta é a última página.",time:2})):a.sendMessage({alert:"info",message:"Esta é a primeira página.",time:2})}))}},computed:{data_computed:function(){return this.arqdoc.data.split("-").reverse().join("/")},created_computed:function(){return new Date(this.arqdoc.created).toLocaleString()}},methods:{clickPrevious:function(t){this.page>1&&(this.page-=1)},clickNext:function(t){this.page+=1},mouseMove:function(t){null===this.img_src&&(this.img_src="".concat(this.arqdoc.arquivo,"?page=").concat(this.page,"&dpi=").concat(this.dpi));var e=(t.offsetX+30)/this.$vnode.elm.offsetWidth;e>.7&&(e=.7),t.target.closest(".inner-preview")||(this.$refs.preview.style.top="".concat(-100*e/1.7,"vh"),this.$refs.preview.style.bottom="".concat(-100*e/1.7,"vh")),e>.5&&(this.dpi=300)}},mounted:function(){}},r=(a("3499"),a("2877")),n=Object(r.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"arq-doc-item",on:{mousemove:t.mouseMove}},[a("div",{staticClass:"inner"},[a("div",{staticClass:"titulo"},[a("a",{attrs:{href:t.arqdoc.arquivo,target:"_blank"}},[t._v(t._s(t.arqdoc.titulo))])]),a("div",{staticClass:"descricao",domProps:{innerHTML:t._s(t.arqdoc.descricao)}}),a("div",{staticClass:"rodape"},[a("span",{staticClass:"data"},[t._v(" Data do Documento: "+t._s(t.data_computed)+" ")]),a("span",{staticClass:"created"},[t._v(" Inclusão no ArqDoc: "+t._s(t.created_computed)+" ")])]),t._m(0),a("div",{ref:"preview",staticClass:"inner-preview"},[t.imgdisplay?a("img",{ref:"imgpreview"}):t._e(),a("div",{staticClass:"actions"},[a("a",{staticClass:"previous",on:{click:t.clickPrevious}},[a("i",{staticClass:"fas fa-chevron-left"})]),a("a",{staticClass:"next",on:{click:t.clickNext}},[a("i",{staticClass:"fas fa-chevron-right"})])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rodape"},[e("span",{staticClass:"text-info"},[this._v("TODO: se acessado via "),e("strong",[this._v("localização física")]),this._v(", mostrar aqui a "),e("strong",[this._v("localização lógica")]),this._v(" e viceversa")])])}],!1,null,null,null);e.a=n.exports}}]);