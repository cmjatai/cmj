(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-060d195a"],{"401a":function(e,a,t){"use strict";(function(e){t("99af"),t("ac1f"),t("5319");var s=t("59e3"),i=t("4b96");a.a={name:"doc-list-layout",components:{ArqDocItem:s.a,BreadCrumbClasse:i.a},data:function(){return{params_node:this.$route.params.node,params_nodechild:this.$route.params.nodechild,classe:null,node_key_localstorage:"portalcmj_arqnode_tree_opened",arqdocs:{},ARQCLASSE_FISICA:100,ARQCLASSE_LOGICA:200}},mounted:function(){var a=this;a.fetchClasse().then((function(t){e.each(a.classe.parents,(function(e,t){localStorage.addArrayOfIds(a.node_key_localstorage,e.id)})),a.$emit("checkIsOpenedNodesTree");var s=a.classe.perfil===a.ARQCLASSE_FISICA?"classe_estrutural":"classe_logica";a.fetch(1,"&get_all=True&".concat(s,"=").concat(a.classe.id))}))},computed:{arqdocs_ordered:{get:function(){return e.orderBy(this.arqdocs,["id"],["desc"])}},descricao_html:function(){var e=this.classe.descricao;return e=(e=e.replace("\r\n","<br>")).replace("\n","<br>")}},methods:{fetch:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=this;return s.$set(s,"arqdocs",{}),s.utils.getModelOrderedList("arq","arqdoc","-data",a,t).then((function(a){e.each(a.data,(function(e,a){s.$set(s.arqdocs,e.id,e)}))})).catch((function(e){return s.sendMessage({alert:"danger",message:"Não foi possível recuperar os documentos...",time:5})}))},fetchClasse:function(){var e=this;return"root"===e.params_nodechild?null:e.getObject({action:"",app:"arq",model:"arqclasse",id:e.params_nodechild}).then((function(a){return e.classe=a,a})).catch((function(a){return e.sendMessage({alert:"danger",message:"Não foi possível recuperar classe selecionada...",time:5})}))}}}}).call(this,t("2ef0"))},"4b96":function(e,a,t){"use strict";t("99af");var s={name:"bread-crumb-classe",props:["parents","me"],data:function(){return{parents_and_me:[]}},mounted:function(){var e=this;e.$nextTick().then((function(){void 0!==e.me?e.parents_and_me=e.parents.concat([{id:e.me.id,titulo:e.me.titulo}]):e.parents_and_me=e.parents}))},computed:{},methods:{clickItemBreadCrumb:function(){this.$refs.noderoot.reload()}}},i=t("2877"),c=Object(i.a)(s,(function(){var e=this,a=e._self._c;return e.parents?a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},e._l(e.parents_and_me,(function(t,s){return a("li",{key:"cp-".concat(s),staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:{name:"arqchildroute",params:{node:s>0?e.parents[s-1].id:"root",nodechild:t.id}}},nativeOn:{click:function(a){return e.clickItemBreadCrumb.apply(null,arguments)}}},[e._v(" "+e._s(t.titulo)+" ")])],1)})),0)]):e._e()}),[],!1,null,null,null);a.a=c.exports},"4df4":function(e,a,t){"use strict";var s=t("0366"),i=t("c65b"),c=t("7b0b"),r=t("9bdd"),n=t("e95a"),o=t("68ee"),l=t("07fa"),d=t("8418"),u=t("9a1f"),p=t("35a1"),f=Array;e.exports=function(e){var a=c(e),t=o(this),m=arguments.length,h=m>1?arguments[1]:void 0,_=void 0!==h;_&&(h=s(h,m>2?arguments[2]:void 0));var v,g,b,C,q,w,k=p(a),A=0;if(!k||this===f&&n(k))for(v=l(a),g=t?new this(v):f(v);v>A;A++)w=_?h(a[A],A):a[A],d(g,A,w);else for(g=t?new this:[],q=(C=u(a,k)).next;!(b=i(q,C)).done;A++)w=_?r(C,h,[b.value,A],!0):b.value,d(g,A,w);return g.length=A,g}},"59e3":function(e,a,t){"use strict";t("99af"),t("a15b"),t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("bf19"),t("9861"),t("88a7"),t("271a"),t("5494");var s=t("cee4"),i={name:"arq-doc-item",components:{BreadCrumbClasse:t("4b96").a},props:["arqdoc","classe"],data:function(){return{imgdisplay:!1,img_src:null,dpi:72,page:1,contra_classe:null,ARQCLASSE_FISICA:100,ARQCLASSE_LOGICA:200}},watch:{dpi:function(e,a){this.img_src="".concat(this.arqdoc.arquivo,"?page=").concat(this.page,"&dpi=").concat(e)},page:function(e,a){this.img_src="".concat(this.arqdoc.arquivo,"?page=").concat(e,"&dpi=").concat(this.dpi)},img_src:function(e,a){var t=this;t.imgdisplay=!0,t.$nextTick((function(){t.$refs.imgpreview.src=e}))},img_src__blob:function(e,a){var t=this;Object(s.a)({url:e,method:"GET",responseType:"blob"}).then((function(e){return t.imgdisplay=!0,e})).then((function(e){var a=new Blob([e.data],{type:"image/png"}),s=(window.URL||window.webkitURL).createObjectURL(a);t.$refs.imgpreview.src=s})).catch((function(e){t.page>1?(t.page-=1,t.sendMessage({alert:"info",message:"Esta é a última página.",time:2})):t.sendMessage({alert:"info",message:"Esta é a primeira página.",time:2})}))}},computed:{data_computed:function(){return this.arqdoc.data.split("-").reverse().join("/")},created_computed:function(){return new Date(this.arqdoc.created).toLocaleString()}},methods:{loadPreview:function(e){this.$refs.preview_actions.style.display="flex"},errorPreview:function(e){this.page>1?(this.page-=1,this.sendMessage({alert:"info",message:"Esta é a última página.",time:2})):this.sendMessage({alert:"info",message:"Esta é a primeira página.",time:2})},clickPrevious:function(e){this.page>1&&(this.page-=1)},clickNext:function(e){this.page+=1},mouseMove:function(e){null===this.img_src&&(this.img_src="".concat(this.arqdoc.arquivo,"?page=").concat(this.page,"&dpi=").concat(this.dpi));var a=(e.offsetX+30)/this.$vnode.elm.offsetWidth;a>.7&&(a=.7),e.target.closest(".inner-preview")||(this.$refs.preview.style.top="".concat(-100*a/1.7,"vh"),this.$refs.preview.style.bottom="".concat(-100*a/1.7,"vh")),a>.5&&(this.dpi=300)}},mounted:function(){var e=this;e.$nextTick().then((function(){return e.getObject({action:"",app:"arq",model:"arqclasse",id:e.classe.perfil===e.ARQCLASSE_FISICA?e.arqdoc.classe_logica:e.arqdoc.classe_estrutural}).then((function(a){return e.contra_classe=a,a})).catch((function(a){return e.sendMessage({alert:"danger",message:"Não foi possível recuperar classe selecionada...",time:5})}))}))}},c=(t("a33b"),t("2877")),r=Object(c.a)(i,(function(){var e=this,a=e._self._c;return a("div",{staticClass:"arq-doc-item",on:{mousemove:e.mouseMove}},[a("div",{staticClass:"inner"},[a("div",{staticClass:"titulo"},[e.arqdoc.checkcheck?a("i",{staticClass:"fas fa-xs fa-lock text-light-blue",attrs:{title:"ArqClasse Arquivada."}}):e._e(),e._v("  "),a("a",{attrs:{href:e.arqdoc.link_detail_backend,target:"_blank"}},[e._v(e._s(e.arqdoc.titulo))])]),a("div",{staticClass:"descricao",domProps:{innerHTML:e._s(e.arqdoc.descricao)}}),a("div",{staticClass:"rodape"},[a("span",{staticClass:"data"},[e._v(" Data do Documento: "+e._s(e.data_computed)+" ")]),a("span",{staticClass:"created"},[e._v(" Inclusão no ArqDoc: "+e._s(e.created_computed)+" ")])]),a("div",{staticClass:"rodape"},[e.contra_classe?a("bread-crumb-classe",{attrs:{parents:e.contra_classe.parents,me:e.contra_classe}}):e._e()],1),a("div",{ref:"preview",staticClass:"inner-preview"},[e.imgdisplay?a("img",{ref:"imgpreview",on:{error:e.errorPreview,load:e.loadPreview}}):e._e(),a("div",{ref:"preview_actions",staticClass:"actions"},[a("a",{staticClass:"previous",on:{click:e.clickPrevious}},[a("i",{staticClass:"fas fa-chevron-left"})]),a("a",{staticClass:"next",on:{click:e.clickNext}},[a("i",{staticClass:"fas fa-chevron-right"})])])])])])}),[],!1,null,null,null);a.a=r.exports},6857:function(e,a,t){"use strict";t("b839")},a33b:function(e,a,t){"use strict";t("fa91")},b839:function(e,a,t){},c12f:function(e,a,t){"use strict";t.r(a);var s=t("401a").a,i=(t("6857"),t("2877")),c=Object(i.a)(s,(function(){var e=this,a=e._self._c;return e.classe?a("div",{staticClass:"doclist-layout container-fluid"},[a("bread-crumb-classe",{attrs:{parents:e.classe.parents}}),a("div",{staticClass:"row-fluid"},[a("div",{staticClass:"col"},[a("h2",[e._v(e._s(e.classe.titulo))]),a("small",{domProps:{innerHTML:e._s(e.descricao_html)}}),a("div",{staticClass:"inner-list"},e._l(e.arqdocs_ordered,(function(t,s){return a("arq-doc-item",{key:"ad-".concat(s),attrs:{arqdoc:t,classe:e.classe}},[e._v(" "+e._s(t.titulo)+" ")])})),1),a("div",{staticClass:"text-info"},[e._v("TODO: implementar paginação")])]),a("div",{staticClass:"col-3 d-none"},[a("div",{staticClass:"classechild"},[a("h4",[e._v(" Subclasses de "+e._s(e.classe.titulo)+" ")]),e._v(" "+e._s(e.params_node)+" - "+e._s(e.params_nodechild)+" ")])])])],1):e._e()}),[],!1,null,null,null);a.default=c.exports},fa91:function(e,a,t){}}]);