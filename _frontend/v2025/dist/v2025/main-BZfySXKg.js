const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["PainelSetModule-CLn8UKg8.js","vendor-Cv_-nZr8.js","TeleportStore-C5BWlnaI.js","vendor_fortawesome-BhZSnwmO.js","PainelSetModule-BxeZ6TqG.css","Painel-D1Ih_YYX.js","Painel-BJt-U6Dl.css","Error404-gVyzzqz4.js","Error404-CMxScCzn.css","RefreshPage-CVmnXhNe.js","RefreshPage-B_wMuza3.css","Alert-CpKwj0Kw.js","WidgetHtmlCode-DfhIYtZY.js","WidgetHtmlCode-C8Lp_3xD.css","WidgetYoutubeEmbed-COWYY9hd.js","WidgetYoutubeEmbed-BENL6IfN.css","WidgetSessaoPlenariaStatus-DIk7zJWD.js","WidgetSessaoPlenariaStatus-CQvOD-Re.css","WidgetSessaoRegistroPresenca-hNBLNYlu.js","WidgetSessaoRegistroPresenca-D8vyXgNh.css","WidgetSessaoItemEmPauta-DqMi-FZo.js","WidgetSessaoItemEmPauta-qUedv4g7.css","WidgetCronometroEvento-C15jFJp3.js","WidgetCronometroBase-CO-_z2FZ.js","WidgetCronometroBase-3cFjT1K_.css","WidgetCronometroEvento-D_hNK2nh.css","WidgetCronometroPalavra-CeyfosrY.js","WidgetCronometroPalavra-uC7uPw5i.css","WidgetStatusEventoSessao-CFhcclNi.js","WidgetStatusEventoSessao-CxnUuUDJ.css"])))=>i.map(i=>d[i]);
import{$ as m,a as W,b as x,e as $,o as M,f as y,g as S,i as j,j as N,k as q,t as O,n as H,F as L,r as U,u as C,l as B,m as h,_ as X,p as F,q as J,s as g,v as b,x as z,w as G,y as K,P as Y,z as Q,A as Z,B as ee}from"./vendor-Cv_-nZr8.js";import{F as te,l as se,i as oe,a as ne,b as re}from"./vendor_fortawesome-BhZSnwmO.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();/*!
 * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
 * Copyright 2011-2023 The Bootstrap Authors
 * Licensed under the Creative Commons Attribution 3.0 Unported License.
 */(()=>{const e=()=>localStorage.getItem("theme"),t=r=>localStorage.setItem("theme",r),s=()=>{const r=e();return r||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},n=r=>{r==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",r)};n(s());const o=(r,i=!1)=>{const c=document.querySelector("#bd-theme");if(!c)return;const l=document.querySelector("#bd-theme-text"),a=document.querySelector(".theme-icon-active use"),d=document.querySelector(`[data-bs-theme-value="${r}"]`),f=d.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(E=>{E.classList.remove("active"),E.setAttribute("aria-pressed","false")}),d.classList.add("active"),d.setAttribute("aria-pressed","true"),a.setAttribute("href",f);const u=`${l.textContent} (${d.dataset.bsThemeValue})`;c.setAttribute("aria-label",u),i&&c.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const r=e();r!=="light"&&r!=="dark"&&n(s())}),window.addEventListener("DOMContentLoaded",()=>{o(s()),document.querySelectorAll("[data-bs-theme-value]").forEach(r=>{r.addEventListener("click",()=>{const i=r.getAttribute("data-bs-theme-value");t(i),n(i),o(i,!0)})})})})();document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{if(!document.querySelector("#header-main"))return;const e=document.querySelector("#header-main");function t(){window.scrollY>0?e.classList.add("header-scrolled"):e.classList.remove("header-scrolled")}t(),window.addEventListener("scroll",t)},2e3)});window.$=m;window.jQuery=m;window.refreshMask=function(){m(".telefone").mask("(99) X9999-9999",{placeholder:"(__) _____-____",translation:{X:{pattern:/[ 0-9]/,optional:!1},9:{pattern:/[0-9]/,optional:!1}}}),m(".cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"}),m(".cep").mask("00000-000",{placeholder:"_____-___"}),m(".rg").mask("0.000.000",{placeholder:"_.___.___"}),m(".titulo_eleitor").mask("0000.0000.0000.0000",{placeholder:"____.____.____.____"}),m(".dateinput").mask("00/00/0000",{placeholder:"__/__/____"}),m(".hora, input[name=hora_inicio], input[name=hora_fim], input[name=hora]").mask("00:00",{placeholder:"hh:mm"}),m(".hora_hms").mask("00:00:00",{placeholder:"hh:mm:ss"}),m(".timeinput").mask("00:00:00",{placeholder:"hh:mm:ss"}),m(".cronometro").mask("00:00:00",{placeholder:"hh:mm:ss"}),m(".datetimeinput").mask("00/00/0000 00:00:00",{placeholder:"__/__/____ hh:mm:ss"}),m(".formatted-natureza-despesa").mask("9.0.00.XX.XX",{placeholder:"9.9.99.XX.XX",translation:{X:{pattern:/[X0-9]/,optional:!0},0:{pattern:/[0-9]/,optional:!0},9:{pattern:/[0-9]/,optional:!1}}}),m(".decimalinput:not(.decimal-precision)").mask("#.##0,00",{reverse:!0,translation:{"#":{pattern:/-|\d/,recursive:!0},0:{pattern:/[\d-]/,optional:!1}},onChange:function(e,t){t.target.value=e.replace(/(?!^)-/g,"").replace(/^\./,"").replace(/^-\./,"-")}})},window.SetCookie=function(e,t,s){let n=new Date,o=new Date;(s===null||s===0)&&(s=1),o.setTime(n.getTime()+36e5*24*s),document.cookie=e+"="+escape(t)+";expires="+o.toGMTString()},window.ReadCookie=function(e){let t=" "+document.cookie,s=t.indexOf(" "+e+"=");if(s===-1&&(s=t.indexOf(";"+e+"=")),s===-1||e==="")return"";let n=t.indexOf(";",s+1);return n===-1&&(n=t.length),unescape(t.substring(s+e.length+2,n))},window.addEventListener("DOMContentLoaded",()=>{window.refreshMask()});const ae="modulepreload",ie=function(e){return"/static/v2025/"+e},R={},p=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){let l=function(a){return Promise.all(a.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");o=l(s.map(a=>{if(a=ie(a),a in R)return;R[a]=!0;const d=a.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${f}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":ae,d||(u.as="script"),u.crossOrigin="",u.href=a,c&&u.setAttribute("nonce",c),document.head.appendChild(u),d)return new Promise((E,_)=>{u.addEventListener("load",E),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${a}`)))})}))}function r(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},ce=[{path:"/",name:"home",meta:{title:"Home",description:"Home page"},children:[{path:"painelset",name:"painelset_module_view",component:()=>p(()=>import("./PainelSetModule-CLn8UKg8.js"),__vite__mapDeps([0,1,2,3,4])),meta:{title:"Painelset Module",description:"Home of Painelset Module"},children:[{path:"painel/:painelId?",name:"painelset_painel_view",component:()=>p(()=>import("./Painel-D1Ih_YYX.js"),__vite__mapDeps([5,1,2,3,6])),meta:{title:"Painel View",description:"View of the painel"}},{path:":pathMatch(.*)",name:"painelset_error_404",component:()=>p(()=>import("./Error404-gVyzzqz4.js"),__vite__mapDeps([7,1,3,8])),meta:{title:"404 - Not Found",description:"Page not found"}}]}]}],le=W({history:x(),routes:ce});class de{constructor(){this.events={}}on(t,s){this.events[t]=this.events[t]||[],this.events[t].push(s)}off(t,s){if(this.events[t]){for(var n=0;n<this.events[t].length;n++)if(this.events[t][n]===s){this.events[t].splice(n,1);break}}}emit(t,s){this.events[t]&&this.events[t].forEach(function(n){n(s)})}}const D=new de,I=$("messageStore",{state:()=>({messages:[],id:0}),getters:{getMessages:e=>e.messages},actions:{addMessage(e){e.id=this.id++,this.messages.unshift(e)},shiftMessage(){return this.messages.shift()},removeMessage(e){this.messages=this.messages.filter(t=>t.id!==e)}}}),V=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},he={key:0},ue={__name:"AlertMessage",props:{message:{type:Object,required:!0},id:{type:String,required:!0}},setup(e){const t=I(),s=e;return M(()=>{s.message.timeout&&setTimeout(()=>{t.removeMessage(s.message.id)},s.message.timeout)}),(n,o)=>(S(),y("div",{class:H(["alert fade show alert-dismissible",["alert-"+e.message.type]]),role:"alert"},[e.message.title?(S(),y("strong",he,O(e.message.title),1)):j("",!0),N(" "+O(e.message.text)+" ",1),o[0]||(o[0]=q("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))],2))}},me=V(ue,[["__scopeId","data-v-c19e2627"]]),_e={class:"display-message"},pe={__name:"DisplayMessage",setup(e){const t=I();return(s,n)=>(S(),y("div",_e,[(S(!0),y(L,null,U(C(t).getMessages,o=>(S(),B(C(me),{id:`alert-${o.id}`,key:o.id,message:o},null,8,["id","message"]))),128))]))}},fe=V(pe,[["__scopeId","data-v-d35f66e2"]]);class ge{constructor(){const t=window.location.host.includes("www")?new URL("/static/v2025/js/workers/timer/timer.worker.js?t="+Date.now(),import.meta.url).href:`${window.location.origin}/static/js/workers/timer/timer.worker.js?t=`+Date.now();this.worker=new Worker(t,{type:"module"}),this.callbacks=new Map,this.worker.onmessage=s=>{const{type:n,timerId:o,timestamp:r}=s.data;n==="TIMER_TICK"&&this.callbacks.has(o)&&this.callbacks.get(o)(r)}}startTimer(t,s,n=1e3){this.callbacks.set(t,s),this.worker.postMessage({type:"START_TIMER",timerId:t,interval:n})}stopTimer(t){this.callbacks.delete(t),this.worker.postMessage({type:"STOP_TIMER",timerId:t})}}const k=new ge;class we{constructor(){const t=window.location.protocol==="https:"?"wss://":"ws://";this.url=`${t}${window.location.host}/ws/sync/`,this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectInterval=1e3,this.heartbeatInterval=3e4,this.heartbeatTimer=null,this.listeners=new Map,this.connect()}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("WebSocket conectado"),this.reconnectAttempts=0,this.ws.readyState===WebSocket.OPEN&&this.send({type:"ping",ping_now:performance.now()}),this.startHeartbeat(),this.emit("connected")},this.ws.onmessage=t=>{const s=JSON.parse(t.data);if(s.type==="ping"){this.send({type:"pong",pong_now:performance.now()});return}else if(s.type==="pong"){let n=performance.now();const o={type:"pong",pong:n,ping:s.message.ping_now,timestamp_server:s.message.timestamp_server,server_time_diff:Date.now()-s.message.timestamp_server-(n-s.message.ping_now)/2};this.emit("message",o);return}this.emit("message",s)},this.ws.onclose=t=>{console.log("WebSocket desconectado",t),this.stopHeartbeat(),this.emit("disconnected"),this.handleReconnect()},this.ws.onerror=t=>{console.error("Erro WebSocket:",t),this.emit("error",t)}}handleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const t=this.reconnectInterval*Math.pow(2,this.reconnectAttempts);setTimeout(()=>{console.log(`Tentativa de reconexão ${this.reconnectAttempts}`),this.connect()},t)}}startHeartbeat(){this.heartbeatTimer=setInterval(()=>{this.ws.readyState===WebSocket.OPEN&&this.send({type:"ping",ping_now:performance.now()})},this.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}send(t){this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}on(t,s){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(s)}emit(t,s){this.listeners.has(t)&&this.listeners.get(t).forEach(n=>n(s))}}const v="/api";h.defaults.headers.get["Cache-Control"]="no-cache, no-store, must-revalidate";h.defaults.headers.get.Pragma="no-cache";h.defaults.headers.get.Expires="0";h.defaults.xsrfCookieName="csrftoken";h.defaults.xsrfHeaderName="X-CSRFToken";const A={Utils:{login:(e,t)=>h.post(`${v}/auth/session`,{username:e,password:t},{withCredentials:!0}),logout:()=>h.delete(`${v}/auth/session`),hasPermission:e=>h({url:`${v}/auth/session/?perm=${e}`,method:"OPTIONS",withCredentials:!0}).then(t=>t.data.status==="ok").catch(()=>!1),getVersion:()=>h({url:`${v}/version`,method:"GET"}),fetch:e=>{if(e.params&&!e.query_string){const t=new URLSearchParams(e.params);e.query_string=t.toString()}return h({url:`${v}/${e.app}/${e.model}/${e.id?e.id+"/":""}${e.action?e.action+"/":""}${e.query_string?"?":""}${e.query_string?e.query_string:""}`,method:"GET"})},patchModelAction:e=>h.patch(`${v}/${e.app}/${e.model}/${e.id}/${e.action}/`,e.form||{},e.progress||{}),patchModel:e=>h.patch(`${v}/${e.app}/${e.model}/${e.id}/`,e.form||{},e.progress||{}),createModel:e=>h.post(`${v}/${e.app}/${e.model}/`,e.form||{},e.progress||{}),deleteModel:e=>h.delete(`${v}/${e.app}/${e.model}/${e.id}/`)}},ve=$("syncStore",{state:()=>({wsManager:null,wsConnected:!1,lastServerSync:null,models:{},data_cache:{}}),getters:{},actions:{initialize(){this.wsManager||(this.wsManager=new we,this.wsManager.on("open",()=>{this.wsConnected=!0}),this.wsManager.on("close",()=>{this.wsConnected=!1}),this.wsManager.on("message",e=>{e.type==="pong"?this.lastServerSync=e:e.type==="sync_refresh.message"&&this.handleSyncMessage(e.message)}))},DELETE_DATA_CACHE({key:e,value:t}){this.data_cache[e]&&this.data_cache[e][t.id]&&delete this.data_cache[e][t.id]},UPDATE_DATA_CACHE_CRONOMETRO({key:e,value:t}){this.data_cache[e]||(this.data_cache[e]={}),this.data_cache[e][t.id]=t},UPDATE_DATA_CACHE({key:e,value:t}){if(t.timestamp_frontend){const s=this.data_cache[e]?this.data_cache[e][t.id]:null;if(s&&s.timestamp_frontend&&t.timestamp_frontend&&t.timestamp_frontend<=s.timestamp_frontend)return}t.__label__?Object.keys(t).filter(n=>typeof t[n]=="object"&&t[n]!==null).forEach(n=>{let o=t[n].__label__;o&&(o=o.replace(".","_"),this.UPDATE_DATA_CACHE({key:o,value:t[n]}))}):t.__label__=e,this.data_cache[e]||(this.data_cache[e]={}),this.data_cache[e][t.id]=t},async fetchSync({app:e,model:t,id:s,action:n,params:o,only_first_page:r=!1,force_fetch:i=!0}){const c=A.Utils.fetch;if((!this.models[e]||!this.models[e][t])&&this.registerModels(e,[t]),!i){const a=`${e}_${t}`;if(s&&this.data_cache[a]&&this.data_cache[a][s])return this.data_cache[a][s];if(!s&&this.data_cache[a])return Object.values(this.data_cache[a])}const l={app:e,model:t};return s&&(l.id=s),n&&(l.action=n),o&&(o.o||(o.o="id"),l.params=o,Object.keys(o).forEach(a=>{Array.isArray(o[a])&&(l.params[a]=o[a].join(","))})),c(l).then(a=>{const d=`${e}_${t}`;return X.each(a.data.results?a.data.results:[a.data],f=>{const u={...f,timestamp_frontend:0};this.UPDATE_DATA_CACHE({key:d,value:u})}),!r&&a.data.pagination&&a.data.pagination.next_page?this.fetchSync({app:e,model:t,id:s,action:n,params:{...o,page:a.data.pagination.next_page}}):this.data_cache[d]})},sendSyncMessage(e){this.wsManager&&this.wsConnected?this.wsManager.send(e):console.warn("WebSocket não conectado. Mensagem não enviada:",e)},handleSyncMessage(e){const{app:t,model:s,id:n,action:o,instance:r,timestamp:i}=e;if(!this.models[t]||!this.models[t][s])return;const c=`${t}_${s}`,l={...r||{},timestamp_frontend:i};o==="post_delete"?delete this.data_cache[c][n]:o==="post_save"&&(l.id?this.UPDATE_DATA_CACHE({key:c,value:l}):n&&this.data_cache[c]&&this.data_cache[c][n]?this.data_cache[c][n].timestamp_frontend<i&&this.fetchSync({app:t,model:s,id:n}):this.fetchSync({app:t,model:s,id:n}),c==="painelset_cronometro"&&(l.state==="running"||l.state==="paused")&&this.startLocalCronometro(l.id))},invalidateDataCache(e=null,t=null){if(e&&t){e.forEach(s=>{t.forEach(n=>{if(this.models[s]&&this.models[s][n]){const o=`${s}_${n}`;this.data_cache[o]={}}})});return}},invalidateCacheItems(e,t,s){if(!this.models[e]||!this.models[e][t])return;const n=`${e}_${t}`;this.data_cache[n]&&s.forEach(o=>{this.data_cache[n][o]&&delete this.data_cache[n][o]})},registerModels(e,t){this.models[e]||(this.models[e]={}),t.forEach(s=>{this.models[e][s]||(this.models[e][s]=!0)})},startLocalCronometro(e){k.startTimer(e,t=>{const s=this.data_cache.painelset_cronometro[e],n=this.lastServerSync,o=n?n.server_time_diff:0;if(s&&s.state==="running"){const r=(t-o)/1e3-s.started_time+s.accumulated_time;s.elapsed_time=r,s.remaining_time=s.duration-r,this.UPDATE_DATA_CACHE_CRONOMETRO({key:"painelset_cronometro",value:s})}else if(s&&s.state==="paused"){const r=(t-o)/1e3-s.paused_time;s.last_paused_time=r,this.UPDATE_DATA_CACHE_CRONOMETRO({key:"painelset_cronometro",value:s})}else k.stopTimer(e)},500)},stopLocalCronometro(e){k.stopTimer(e)}}}),Ee=$("authStore",{state:()=>({data_connect:{}}),getters:{isAuthenticated:e=>e.data_connect.is_authenticated,isVotante:e=>e.data_connect.hasOwnProperty("votante"),hasPermission:e=>t=>e.data_connect?.permissions?.includes(t)},actions:{loginStatus(){const t=A.Utils.getVersion;return t().then(s=>(this.data_connect=s.data,s.data))},loginPortalCMJ(e,t){const s=A.Utils,n=s.login,o=s.getVersion;return n(e,t).then(r=>o().then(i=>(this.data_connect=i.data,i.data)))},logoutPortalCMJ(){const e=A.Utils,t=e.logout,s=e.getVersion;return t().then(n=>s().then(o=>(this.data_connect=o.data,o.data)))}}}),Se={__name:"App",setup(e){return ve().initialize(),Ee().loginStatus(),(n,o)=>(S(),y(L,null,[F(n.$slots,"default"),J(C(fe))],64))}},ye={"cmj-app":Se,"cmj-error-404":g(()=>p(()=>import("./Error404-gVyzzqz4.js"),__vite__mapDeps([7,1,3,8])))},be={FontAwesomeIcon:te,"cmj-refresh-page":g(()=>p(()=>import("./RefreshPage-CVmnXhNe.js"),__vite__mapDeps([9,1,3,10]))),"cmj-alert":g(()=>p(()=>import("./Alert-CpKwj0Kw.js"),__vite__mapDeps([11,1,3]))),WidgetHtmlCode:g(()=>p(()=>import("./WidgetHtmlCode-DfhIYtZY.js"),__vite__mapDeps([12,1,3,13]))),WidgetYoutubeEmbed:g(()=>p(()=>import("./WidgetYoutubeEmbed-COWYY9hd.js"),__vite__mapDeps([14,1,3,15]))),WidgetSessaoPlenariaStatus:g(()=>p(()=>import("./WidgetSessaoPlenariaStatus-DIk7zJWD.js"),__vite__mapDeps([16,1,3,17]))),WidgetSessaoRegistroPresenca:g(()=>p(()=>import("./WidgetSessaoRegistroPresenca-hNBLNYlu.js"),__vite__mapDeps([18,1,3,19]))),WidgetSessaoItemEmPauta:g(()=>p(()=>import("./WidgetSessaoItemEmPauta-DqMi-FZo.js"),__vite__mapDeps([20,1,3,21]))),WidgetCronometroEvento:g(()=>p(()=>import("./WidgetCronometroEvento-C15jFJp3.js"),__vite__mapDeps([22,1,23,24,3,25]))),WidgetCronometroPalavra:g(()=>p(()=>import("./WidgetCronometroPalavra-CeyfosrY.js"),__vite__mapDeps([26,1,23,24,3,27]))),WidgetStatusEventoSessao:g(()=>p(()=>import("./WidgetStatusEventoSessao-CFhcclNi.js"),__vite__mapDeps([28,1,23,24,3,29])))},P={rootComponents:ye,globalComponents:be};function Ae(e,t={}){const s=b(null),n=b(!1),o=b(null),r=b(null),i=K("EventBus"),c={autoReconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5,...t};let l=0,a=null;const d=()=>{if(!(s.value&&(s.value.readyState===WebSocket.OPEN||s.value.readyState===WebSocket.CONNECTING)))try{s.value=new WebSocket(e),s.value.onopen=()=>{n.value=!0,r.value=null,l=0,console.debug("WebSocket connected to",e)},s.value.onmessage=_=>{o.value=_.data;try{const w=JSON.parse(_.data);o.value=w.message,i.emit("time-refresh",w.message)}catch(w){console.debug("Erro na conversão de JSON inválido.:",w)}},s.value.onerror=_=>{r.value=new Error("WebSocket error"),console.error("WebSocket error:",_)},s.value.onclose=()=>{n.value=!1,f()}}catch(_){r.value=_,f()}},f=()=>{!c.autoReconnect||l>=c.maxReconnectAttempts||(clearTimeout(a),a=setTimeout(()=>{l++,d()},c.reconnectInterval*Math.pow(1.5,l)))},u=()=>{s.value&&(s.value.close(),n.value=!1),clearTimeout(a)},E=_=>{if(!s.value||s.value.readyState!==WebSocket.OPEN)return r.value=new Error("WebSocket não conectado"),!1;try{const w=typeof _=="string"?_:JSON.stringify(_);return s.value.send(w),!0}catch(w){return r.value=w,!1}};return M(()=>{d()}),z(()=>{u()}),G(()=>e,(_,w)=>{_!==w&&(u(),d())}),{socket:s,isConnected:n,message:o,error:r,connect:d,disconnect:u,send:E}}se.add(oe,ne,re);document.querySelectorAll('[data-bs-toggle="popover"]').forEach(e=>{new Y(e)});h.defaults.headers.get["Cache-Control"]="no-cache, no-store, must-revalidate";h.defaults.headers.get.Pragma="no-cache";h.defaults.headers.get.Expires="0";h.defaults.xsrfCookieName="csrftoken";h.defaults.xsrfHeaderName="X-CSRFToken";const T=Q({delimiters:["[[","]]"],components:P.rootComponents,setup(){const t=(window.location.protocol==="https:"?"wss://":"ws://")+window.location.host+"/ws/time-refresh/",s=Ae(t);s.connect(),M(()=>{setTimeout(()=>{s.send({type:"ping",message:"Time refresh requested",timestamp_client:Date.now()})},3e3)})}});Object.keys(P.globalComponents).forEach(e=>{T.component(e,P.globalComponents[e])});T.provide("EventBus",D);T.config.globalProperties.$EventBus=D;T.use(le).use(Z()).use(ee()).mount("#cmj");export{A as R,V as _,I as a,Ee as b,ve as u};
