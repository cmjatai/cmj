import{v as h,c as d,o as I,f as S,g as b,t as C,n as B}from"./vendor-Dip3oSWq.js";import{_ as F,u as M}from"./main-DatShM9x.js";const w={__name:"WidgetCronometroBase",props:{painelId:{type:Number,default:0},widgetSelected:{type:Number,default:0},displayInitial:{type:String,default:"elapsed",validator:function(s){return["elapsed","remaining","last_paused"].includes(s)}},displayFormat:{type:String,default:"hh:mm:ss"},cronometroId:{type:Number,required:!0}},setup(s){const i=M(),t=s,n=h(t.displayInitial),e=d(()=>i.data_cache.painelset_cronometro?.[t.cronometroId]||null),y=d(()=>e.value?e.value.remaining_time<0?"s00":e.value.remaining_time<=10?"s10":e.value.remaining_time<=30?"s30":"":""),g=async()=>{await i.fetchSync({app:"painelset",model:"cronometro",id:t.cronometroId}).then(()=>{console.log("Iniciando cronÃ´metro localmente:",t.cronometroId),i.startLocalCronometro(t.cronometroId)})};I(()=>{g()});const l=(p,f)=>{let o=Math.round(p||f||0);const _=o<0?"-":"";o<0&&(o=o*-1);const c=Math.floor(o/3600),m=Math.floor(o%3600/60),u=o%60;let r="";return t.displayFormat==="hh:mm:ss"?r=[c,m,u].map(a=>a<10?"0"+a:a).join(":"):t.displayFormat==="mm:ss"?r=[m+c*60,u].map(a=>a<10?"0"+a:a).join(":"):t.displayFormat==="ss"&&(r=(u+m*60+c*3600).toString()),_&&(r=_+r),r||"00:00:00"},v=d(()=>e.value?n.value==="elapsed"?l(e.value.elapsed_time):n.value==="remaining"?l(e.value.remaining_time,e.value.accumulated_time):n.value==="last_paused"?l(e.value.last_paused_time):"00:00:00":"00:00:00");return(p,f)=>(b(),S("div",{class:B(["widget-cronometro-base",n.value,y.value])},C(v.value),3))}},T=F(w,[["__scopeId","data-v-06e4c0ba"]]);export{T as W};
