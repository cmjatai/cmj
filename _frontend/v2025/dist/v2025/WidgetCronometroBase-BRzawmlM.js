import{c as o,o as S,f as h,g as I,t as z,G as b,n as C}from"./vendor-Dq9xiLvp.js";import{_ as B,b as F}from"./main-DBRHJ7rR.js";const M={__name:"WidgetCronometroBase",props:{painelId:{type:Number,default:0},widgetSelected:{type:Number,default:0},displayInitial:{type:String,default:"elapsed",validator:function(n){return["elapsed","remaining","last_paused"].includes(n)}},displayFormat:{type:String,default:"hh:mm:ss"},cronometroId:{type:Number,required:!0},displayPermitidos:{type:Array,default:()=>["elapsed","remaining","last_paused"]},displaySize:{type:String,default:"1em"}},setup(n){const l=F(),e=n,t=o(()=>l.data_cache.painelset_cronometro?.[e.cronometroId]||null),i=o(()=>!t.value||t.value.state==="running"?e.displayInitial:e.displayPermitidos.includes("last_paused")?"last_paused":e.displayPermitidos.includes("remaining")?"remaining":"elapsed"),g=o(()=>t.value?t.value.remaining_time<0?"s00":t.value.remaining_time<=10?"s10":t.value.remaining_time<=30?"s30":"":""),_=async()=>{await l.fetchSync({app:"painelset",model:"cronometro",id:e.cronometroId}).then(()=>{console.log("Iniciando cronÃ´metro localmente:",e.cronometroId),l.startLocalCronometro(e.cronometroId)})};S(()=>{_()});const u=(p,f)=>{let a=Math.round(p||f||0);const y=a<0?"-":"";a<0&&(a=a*-1);const d=Math.floor(a/3600),m=Math.floor(a%3600/60),c=a%60;let s="";return e.displayFormat==="hh:mm:ss"?s=[d,m,c].map(r=>r<10?"0"+r:r).join(":"):e.displayFormat==="mm:ss"?s=[m+d*60,c].map(r=>r<10?"0"+r:r).join(":"):e.displayFormat==="ss"&&(s=(c+m*60+d*3600).toString()),y&&(s=y+s),s||"00:00"},v=o(()=>t.value?i.value==="elapsed"?u(t.value.elapsed_time):i.value==="remaining"?u(t.value.remaining_time,t.value.accumulated_time):i.value==="last_paused"?u(t.value.last_paused_time):"00:00":"00:00");return(p,f)=>(I(),h("div",{class:C(["widget-cronometro-base",i.value,g.value]),style:b(n.displaySize?{fontSize:n.displaySize}:{})},z(v.value),7))}},N=B(M,[["__scopeId","data-v-7287de84"]]);export{N as W};
