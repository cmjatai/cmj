import{c as o,o as h,f as I,g as S,t as b,n as C}from"./vendor-Cv_-nZr8.js";import{_ as B,u as F}from"./main-BZfySXKg.js";const M={__name:"WidgetCronometroBase",props:{painelId:{type:Number,default:0},widgetSelected:{type:Number,default:0},displayInitial:{type:String,default:"elapsed",validator:function(i){return["elapsed","remaining","last_paused"].includes(i)}},displayFormat:{type:String,default:"hh:mm:ss"},cronometroId:{type:Number,required:!0},displayPermitidos:{type:Array,default:()=>["elapsed","remaining","last_paused"]}},setup(i){const l=F(),e=i,t=o(()=>l.data_cache.painelset_cronometro?.[e.cronometroId]||null),n=o(()=>!t.value||t.value.state==="running"?e.displayInitial:e.displayPermitidos.includes("last_paused")?"last_paused":e.displayPermitidos.includes("remaining")?"remaining":"elapsed"),y=o(()=>t.value?t.value.remaining_time<0?"s00":t.value.remaining_time<=10?"s10":t.value.remaining_time<=30?"s30":"":""),g=async()=>{await l.fetchSync({app:"painelset",model:"cronometro",id:e.cronometroId}).then(()=>{console.log("Iniciando cronÃ´metro localmente:",e.cronometroId),l.startLocalCronometro(e.cronometroId)})};h(()=>{g()});const u=(p,f)=>{let a=Math.round(p||f||0);const _=a<0?"-":"";a<0&&(a=a*-1);const m=Math.floor(a/3600),d=Math.floor(a%3600/60),c=a%60;let s="";return e.displayFormat==="hh:mm:ss"?s=[m,d,c].map(r=>r<10?"0"+r:r).join(":"):e.displayFormat==="mm:ss"?s=[d+m*60,c].map(r=>r<10?"0"+r:r).join(":"):e.displayFormat==="ss"&&(s=(c+d*60+m*3600).toString()),_&&(s=_+s),s||"00:00"},v=o(()=>t.value?n.value==="elapsed"?u(t.value.elapsed_time):n.value==="remaining"?u(t.value.remaining_time,t.value.accumulated_time):n.value==="last_paused"?u(t.value.last_paused_time):"00:00":"00:00");return(p,f)=>(S(),I("div",{class:C(["widget-cronometro-base",n.value,y.value])},b(v.value),3))}},N=B(M,[["__scopeId","data-v-2914e6b7"]]);export{N as W};
