import{c as s,o as h,f as I,g as S,t as b,n as C}from"./vendor-BruB_2AI.js";import{_ as B,u as F}from"./main-BGbnn2ui.js";const M={__name:"WidgetCronometroBase",props:{painelId:{type:Number,default:0},widgetSelected:{type:Number,default:0},displayInitial:{type:String,default:"elapsed",validator:function(i){return["elapsed","remaining","last_paused"].includes(i)}},displayFormat:{type:String,default:"hh:mm:ss"},cronometroId:{type:Number,required:!0}},setup(i){const l=F(),t=i,e=s(()=>l.data_cache.painelset_cronometro?.[t.cronometroId]||null),n=s(()=>!e.value||e.value.state==="running"?t.displayInitial:"last_paused"),y=s(()=>e.value?e.value.remaining_time<0?"s00":e.value.remaining_time<=10?"s10":e.value.remaining_time<=30?"s30":"":""),g=async()=>{await l.fetchSync({app:"painelset",model:"cronometro",id:t.cronometroId}).then(()=>{console.log("Iniciando cronÃ´metro localmente:",t.cronometroId),l.startLocalCronometro(t.cronometroId)})};h(()=>{g()});const u=(p,f)=>{let a=Math.round(p||f||0);const _=a<0?"-":"";a<0&&(a=a*-1);const c=Math.floor(a/3600),m=Math.floor(a%3600/60),d=a%60;let o="";return t.displayFormat==="hh:mm:ss"?o=[c,m,d].map(r=>r<10?"0"+r:r).join(":"):t.displayFormat==="mm:ss"?o=[m+c*60,d].map(r=>r<10?"0"+r:r).join(":"):t.displayFormat==="ss"&&(o=(d+m*60+c*3600).toString()),_&&(o=_+o),o||"00:00:00"},v=s(()=>e.value?n.value==="elapsed"?u(e.value.elapsed_time):n.value==="remaining"?u(e.value.remaining_time,e.value.accumulated_time):n.value==="last_paused"?u(e.value.last_paused_time):"00:00:00":"00:00:00");return(p,f)=>(S(),I("div",{class:C(["widget-cronometro-base",n.value,y.value])},b(v.value),3))}},N=B(M,[["__scopeId","data-v-17712bfc"]]);export{N as W};
