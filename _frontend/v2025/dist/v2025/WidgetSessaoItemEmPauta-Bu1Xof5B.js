import{v as I,c as r,w as S,f as o,g as i,k as l,t as u,i as f,n as E,j as D}from"./vendor-Cv_-nZr8.js";import{_ as k,u as z}from"./main-B2DhY60F.js";import"./vendor_fortawesome-BhZSnwmO.js";const N={class:"widget-sessao-item-em-pauta"},L={class:"inner"},R={class:"inner-materia"},P={class:"parte_sessao"},C=["innerHTML"],V={class:"epigrafe"},j={class:"ementa"},B={class:"inner-resultado"},H={class:"inner-tramitacao"},U={key:0,class:"inner-discussao"},W={key:1,class:"inner-votacao"},X={key:2,class:"inner-votacao"},q={key:3,class:"inner-votacao"},F={key:0,class:"inner-votacao"},G={key:0,class:"label"},J=["innerHTML"],K={key:1,class:"label"},Q={class:"result sim"},Y={class:"result nao"},Z={key:0,class:"result abstencao"},$={__name:"WidgetSessaoItemEmPauta",props:{painelId:{type:Number,default:0},widgetSelected:{type:Number,default:0}},setup(M){const s=z(),y=M,A={1:"SIMBÓLICA",2:"NOMINAL",3:"SECRETA",4:"LEITURA"},c=I(null),t=I(null),h=I("");r(()=>s.data_cache.painelset_widget?.[y.widgetSelected]||null);const O=r(()=>s.data_cache.painelset_painel?.[y.painelId]||null),m=r(()=>s.data_cache.sessao_sessaoplenaria?.[O.value?.sessao]||null),n=r(()=>{const a=s.data_cache.sessao_expedientemateria||{};return Object.values(a).find(e=>e.sessao_plenaria===m.value?.id&&(e.discussao_aberta===!0||e.votacao_aberta===!0||e.votacao_pedido_prazo===!0))||null}),d=r(()=>{const a=s.data_cache.sessao_ordemdia||{};return Object.values(a).find(e=>e.sessao_plenaria===m.value?.id&&(e.discussao_aberta===!0||e.votacao_aberta===!0||e.votacao_pedido_prazo===!0))||null}),g=r(()=>n.value?n.value:d.value?d.value:null),T=r(()=>n.value?s.data_cache.materia_materialegislativa?.[n.value.materia.id||n.value.materia]||null:d.value&&s.data_cache.materia_materialegislativa?.[d.value.materia.id||d.value.materia]||null),_=r(()=>{const a=s.data_cache.sessao_registrovotacao||{};return Object.values(a).reduce((b,v)=>(v.expediente===t.value?.id||v.ordem===t.value?.id)&&!t.value.votacao_aberta&&(v.materia===c.value?.id||v.materia.id===c.value?.id)&&(!b||v.id>b.id)?v:b,null)}),x=r(()=>{const a=s.data_cache.sessao_registroleitura||{};return Object.values(a).find(e=>(e.expediente===t.value?.id||e.ordem===t.value?.id)&&(e.materia===c.value?.id||e.materia.id===c.value?.id))||null}),p=r(()=>s.data_cache.sessao_tiporesultadovotacao[_.value?.tipo_resultado_votacao]||{});return S(()=>n.value,a=>{a&&s.fetchSync({app:"sessao",model:"registrovotacao",params:{expediente:a.id,page_size:100},force_fetch:!1})},{immediate:!0}),S(()=>T.value,a=>{a&&(c.value=a,n.value?h.value="EXPEDIENTE":d.value&&(h.value="ORDEM DO DIA"))},{immediate:!0}),S(()=>g.value,a=>{if(a){t.value=a;let e={page_size:100};a.__label__==="sessao.expedientemateria"?e.expediente=a.id:a.__label__==="sessao.ordemdia"&&(e.ordem=a.id),s.fetchSync({params:e,app:"sessao",model:"registrovotacao",force_fetch:!1}),s.fetchSync({params:e,app:"sessao",model:"registroleitura",force_fetch:!1}),s.fetchSync({params:e,app:"sessao",model:"votoparlamentar",force_fetch:!1})}else t.value&&(t.value.votacao_aberta=!1,t.value.votacao_aberta_pedido_prazo=!1,t.value.discussao_aberta=!1)},{immediate:!0}),(async()=>{s.fetchSync({app:"sessao",model:"expedientemateria",params:{sessao_plenaria:m.value?.id||0,page_size:100,expand:"materia",exclude:"materia.metadata"}}),s.fetchSync({app:"sessao",model:"ordemdia",params:{sessao_plenaria:m.value?.id||0,page_size:100,expand:"materia",exclude:"materia.metadata"}}),s.fetchSync({app:"sessao",model:"tiporesultadovotacao",params:{page_size:100}})})(),(a,e)=>(i(),o("div",N,[l("div",L,[l("div",R,[l("div",P,[l("div",{class:"titulo_parte",innerHTML:h.value},null,8,C)]),l("div",V,u(c.value?.__str__||""),1),l("div",j,u(c.value?.ementa||""),1)]),l("div",B,[l("div",H,[t.value?.discussao_aberta?(i(),o("div",U," EM DISCUSSÃO ")):t.value?.votacao_aberta_pedido_prazo?(i(),o("div",W," EM VOTAÇÃO PEDIDO DE ADIAMENTO ")):t.value?.votacao_aberta&&t.value?.tipo_votacao<4&&!t.value?.votacao_aberta_pedido_prazo?(i(),o("div",X," EM VOTAÇÃO "+u(A[t.value?.tipo_votacao]||""),1)):t.value?.votacao_aberta&&t.value?.tipo_votacao===4?(i(),o("div",q," LEITURA DA MATÉRIA ")):f("",!0)]),x.value&&t.value?.tipo_votacao===4?(i(),o("div",F," MATÉRIA LIDA EM PLENÁRIO ")):_.value?(i(),o("div",{key:1,class:E(["inner-votacao",p.value?.natureza||""])},[p.value.nome!=="Pedido de Vista"?(i(),o("div",G,[D(" VOTAÇÃO "+u(A[t.value?.tipo_votacao])+" - ",1),l("span",{innerHTML:p.value.nome},null,8,J)])):(i(),o("div",K,"MATÉRIA COM PEDIDO DE VISTA")),p.value.nome!=="Pedido de Vista"?(i(),o("div",{key:2,class:E(["results",p.value?.natureza||""])},[l("div",Q," SIM: "+u(_.value?.numero_votos_sim||0),1),l("div",Y," NÃO: "+u(_.value?.numero_votos_nao||0),1),_.value?.numero_abstencoes?(i(),o("div",Z," ABSTENÇÃO: "+u(_.value?.numero_abstencoes||0),1)):f("",!0)],2)):f("",!0)],2)):f("",!0)])])]))}},se=k($,[["__scopeId","data-v-b525119e"]]);export{se as default};
