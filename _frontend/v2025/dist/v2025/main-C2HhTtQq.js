const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["PainelSetModule-BpHEnxD8.js","vendor-BmiiKGVm.js","vendor_fortawesome-Dp93uEGA.js","PainelSetModule-DAwiXEZ2.css","Painel-t65SIjY6.js","Painel-sxPUmU_I.css","Error404-UoN1J9Z_.js","Error404-CMxScCzn.css","RefreshPage-DWw7eKfc.js","RefreshPage-B_wMuza3.css","Alert-CG8OkyWu.js","WidgetChild1-C8jFEkpv.js","WidgetChild1-zue6zMJ6.css"])))=>i.map(i=>d[i]);
import{$ as h,a as x,b as I,e as P,o as M,f as S,g as v,i as W,j as N,k as q,t as $,n as j,F as R,r as H,u as A,l as V,m as f,_ as B,p as U,q as X,s as b,v as y,x as F,w as z,y as J,P as G,z as K,A as Q,B as Y}from"./vendor-BmiiKGVm.js";import{F as Z,l as ee,i as te,a as se,b as oe}from"./vendor_fortawesome-Dp93uEGA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();/*!
 * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
 * Copyright 2011-2023 The Bootstrap Authors
 * Licensed under the Creative Commons Attribution 3.0 Unported License.
 */(()=>{const e=()=>localStorage.getItem("theme"),t=r=>localStorage.setItem("theme",r),s=()=>{const r=e();return r||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},o=r=>{r==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",r)};o(s());const n=(r,i=!1)=>{const a=document.querySelector("#bd-theme");if(!a)return;const c=document.querySelector("#bd-theme-text"),l=document.querySelector(".theme-icon-active use"),d=document.querySelector(`[data-bs-theme-value="${r}"]`),p=d.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(w=>{w.classList.remove("active"),w.setAttribute("aria-pressed","false")}),d.classList.add("active"),d.setAttribute("aria-pressed","true"),l.setAttribute("href",p);const m=`${c.textContent} (${d.dataset.bsThemeValue})`;a.setAttribute("aria-label",m),i&&a.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const r=e();r!=="light"&&r!=="dark"&&o(s())}),window.addEventListener("DOMContentLoaded",()=>{n(s()),document.querySelectorAll("[data-bs-theme-value]").forEach(r=>{r.addEventListener("click",()=>{const i=r.getAttribute("data-bs-theme-value");t(i),o(i),n(i,!0)})})})})();document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{if(!document.querySelector("#header-main"))return;const e=document.querySelector("#header-main");function t(){window.scrollY>0?e.classList.add("header-scrolled"):e.classList.remove("header-scrolled")}t(),window.addEventListener("scroll",t)},2e3)});window.$=h;window.jQuery=h;window.refreshMask=function(){h(".telefone").mask("(99) X9999-9999",{placeholder:"(__) _____-____",translation:{X:{pattern:/[ 0-9]/,optional:!1},9:{pattern:/[0-9]/,optional:!1}}}),h(".cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"}),h(".cep").mask("00000-000",{placeholder:"_____-___"}),h(".rg").mask("0.000.000",{placeholder:"_.___.___"}),h(".titulo_eleitor").mask("0000.0000.0000.0000",{placeholder:"____.____.____.____"}),h(".dateinput").mask("00/00/0000",{placeholder:"__/__/____"}),h(".hora, input[name=hora_inicio], input[name=hora_fim], input[name=hora]").mask("00:00",{placeholder:"hh:mm"}),h(".hora_hms").mask("00:00:00",{placeholder:"hh:mm:ss"}),h(".timeinput").mask("00:00:00",{placeholder:"hh:mm:ss"}),h(".cronometro").mask("00:00:00",{placeholder:"hh:mm:ss"}),h(".datetimeinput").mask("00/00/0000 00:00:00",{placeholder:"__/__/____ hh:mm:ss"}),h(".formatted-natureza-despesa").mask("9.0.00.XX.XX",{placeholder:"9.9.99.XX.XX",translation:{X:{pattern:/[X0-9]/,optional:!0},0:{pattern:/[0-9]/,optional:!0},9:{pattern:/[0-9]/,optional:!1}}}),h(".decimalinput:not(.decimal-precision)").mask("#.##0,00",{reverse:!0,translation:{"#":{pattern:/-|\d/,recursive:!0},0:{pattern:/[\d-]/,optional:!1}},onChange:function(e,t){t.target.value=e.replace(/(?!^)-/g,"").replace(/^\./,"").replace(/^-\./,"-")}})},window.SetCookie=function(e,t,s){let o=new Date,n=new Date;(s===null||s===0)&&(s=1),n.setTime(o.getTime()+36e5*24*s),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},window.ReadCookie=function(e){let t=" "+document.cookie,s=t.indexOf(" "+e+"=");if(s===-1&&(s=t.indexOf(";"+e+"=")),s===-1||e==="")return"";let o=t.indexOf(";",s+1);return o===-1&&(o=t.length),unescape(t.substring(s+e.length+2,o))},window.addEventListener("DOMContentLoaded",()=>{window.refreshMask()});const ne="modulepreload",re=function(e){return"/static/v2025/"+e},O={},g=function(t,s,o){let n=Promise.resolve();if(s&&s.length>0){let c=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");n=c(s.map(l=>{if(l=re(l),l in O)return;O[l]=!0;const d=l.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":ne,d||(m.as="script"),m.crossOrigin="",m.href=l,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((w,u)=>{m.addEventListener("load",w),m.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return n.then(i=>{for(const a of i||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},ae=[{path:"/",name:"home",meta:{title:"Home",description:"Home page"},children:[{path:"painelset",name:"painelset_module_view",component:()=>g(()=>import("./PainelSetModule-BpHEnxD8.js"),__vite__mapDeps([0,1,2,3])),meta:{title:"Painelset Module",description:"Home of Painelset Module"},children:[{path:"painel/:painelId?",name:"painelset_painel_view",component:()=>g(()=>import("./Painel-t65SIjY6.js"),__vite__mapDeps([4,1,2,5])),meta:{title:"Painel View",description:"View of the painel"}},{path:":pathMatch(.*)",name:"painelset_error_404",component:()=>g(()=>import("./Error404-UoN1J9Z_.js"),__vite__mapDeps([6,1,2,7])),meta:{title:"404 - Not Found",description:"Page not found"}}]}]}],ie=x({history:I(),routes:ae});class ce{constructor(){this.events={}}on(t,s){this.events[t]=this.events[t]||[],this.events[t].push(s)}off(t,s){if(this.events[t]){for(var o=0;o<this.events[t].length;o++)if(this.events[t][o]===s){this.events[t].splice(o,1);break}}}emit(t,s){this.events[t]&&this.events[t].forEach(function(o){o(s)})}}const L=new ce,D=P("messageStore",{state:()=>({messages:[],id:0}),getters:{getMessages:e=>e.messages},actions:{addMessage(e){e.id=this.id++,this.messages.unshift(e)},shiftMessage(){return this.messages.shift()},removeMessage(e){this.messages=this.messages.filter(t=>t.id!==e)}}}),le={key:0},de={__name:"AlertMessage",props:{message:{type:Object,required:!0},id:{type:String,required:!0}},setup(e){const t=D(),s=e;return M(()=>{s.message.timeout&&setTimeout(()=>{t.removeMessage(s.message.id)},s.message.timeout)}),(o,n)=>(v(),S("div",{class:j(["alert fade show alert-dismissible",["alert-"+e.message.type]]),role:"alert"},[e.message.title?(v(),S("strong",le,$(e.message.title),1)):W("",!0),N(" "+$(e.message.text)+" ",1),n[0]||(n[0]=q("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))],2))}},he=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s},me={class:"display-message"},ue={__name:"DisplayMessage",setup(e){const t=D();return(s,o)=>(v(),S("div",me,[(v(!0),S(R,null,H(A(t).getMessages,n=>(v(),V(A(de),{id:`alert-${n.id}`,key:n.id,message:n},null,8,["id","message"]))),128))]))}},pe=he(ue,[["__scopeId","data-v-9887fde6"]]);class _e{constructor(){const t=window.location.host.includes("www")?new URL("/static/v2025/js/workers/timer/timer.worker.js?t="+Date.now(),import.meta.url).href:`${window.location.origin}/static/js/workers/timer/timer.worker.js?t=`+Date.now();this.worker=new Worker(t,{type:"module"}),this.callbacks=new Map,this.worker.onmessage=s=>{const{type:o,timerId:n,timestamp:r}=s.data;o==="TIMER_TICK"&&this.callbacks.has(n)&&this.callbacks.get(n)(r)}}startTimer(t,s,o=1e3){this.callbacks.set(t,s),this.worker.postMessage({type:"START_TIMER",timerId:t,interval:o})}stopTimer(t){this.callbacks.delete(t),this.worker.postMessage({type:"STOP_TIMER",timerId:t})}}const T=new _e;class fe{constructor(){const t=window.location.protocol==="https:"?"wss://":"ws://";this.url=`${t}${window.location.host}/ws/sync/`,this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectInterval=1e3,this.heartbeatInterval=3e4,this.heartbeatTimer=null,this.listeners=new Map,this.connect()}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("WebSocket conectado"),this.reconnectAttempts=0,this.ws.readyState===WebSocket.OPEN&&this.send({type:"ping",ping_now:performance.now()}),this.startHeartbeat(),this.emit("connected")},this.ws.onmessage=t=>{const s=JSON.parse(t.data);if(s.type==="ping"){this.send({type:"pong",pong_now:performance.now()});return}else if(s.type==="pong"){let o=performance.now();const n={type:"pong",pong:o,ping:s.message.ping_now,timestamp_server:s.message.timestamp_server,server_time_diff:Date.now()-s.message.timestamp_server-(o-s.message.ping_now)/2};this.emit("message",n);return}this.emit("message",s)},this.ws.onclose=t=>{console.log("WebSocket desconectado",t),this.stopHeartbeat(),this.emit("disconnected"),this.handleReconnect()},this.ws.onerror=t=>{console.error("Erro WebSocket:",t),this.emit("error",t)}}handleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const t=this.reconnectInterval*Math.pow(2,this.reconnectAttempts);setTimeout(()=>{console.log(`Tentativa de reconexão ${this.reconnectAttempts}`),this.connect()},t)}}startHeartbeat(){this.heartbeatTimer=setInterval(()=>{this.ws.readyState===WebSocket.OPEN&&this.send({type:"ping",ping_now:performance.now()})},this.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}send(t){this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}on(t,s){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(s)}emit(t,s){this.listeners.has(t)&&this.listeners.get(t).forEach(o=>o(s))}}const k="/api";f.defaults.xsrfCookieName="csrftoken";f.defaults.xsrfHeaderName="X-CSRFToken";const ge={Utils:{fetch:e=>f({url:`${k}/${e.app}/${e.model}/${e.id?e.id+"/":""}${e.action?e.action+"/":""}${e.query_string?"?":""}${e.query_string?e.query_string:""}`,method:"GET"}),patchModelAction:e=>f.patch(`${k}/${e.app}/${e.model}/${e.id}/${e.action}/`,e.form||{},e.progress||{}),patchModel:e=>f.patch(`${k}/${e.app}/${e.model}/${e.id}/`,e.form||{},e.progress||{})}},we=P("syncStore",{state:()=>({wsManager:null,wsConnected:!1,lastServerSync:null,models:{},data_cache:{}}),getters:{},actions:{initialize(){this.wsManager||(this.wsManager=new fe,this.wsManager.on("open",()=>{this.wsConnected=!0}),this.wsManager.on("close",()=>{this.wsConnected=!1}),this.wsManager.on("message",e=>{e.type==="pong"?this.lastServerSync=e:e.type==="sync_refresh.message"&&this.handleSyncMessage(e.message)}))},DELETE_DATA_CACHE({key:e,value:t}){this.data_cache[e]&&this.data_cache[e][t.id]&&delete this.data_cache[e][t.id]},UPDATE_DATA_CACHE_CRONOMETRO({key:e,value:t}){this.data_cache[e]||(this.data_cache[e]={}),this.data_cache[e][t.id]=t},UPDATE_DATA_CACHE({key:e,value:t}){if(t.timestamp_frontend){const s=this.data_cache[e]?this.data_cache[e][t.id]:null;if(s&&s.timestamp_frontend&&t.timestamp_frontend&&t.timestamp_frontend<=s.timestamp_frontend)return}this.data_cache[e]||(this.data_cache[e]={}),this.data_cache[e][t.id]=t},async fetchSync({app:e,model:t,id:s,action:o,params:n,only_first_page:r=!1}){const i=ge.Utils.fetch,a={app:e,model:t};return s&&(a.id=s),o&&(a.action=o),n&&(n.o||(n.o="id"),a.query_string=new URLSearchParams(n).toString()),i(a).then(c=>{const l=`${e}_${t}`;return B.each(c.data.results?c.data.results:[c.data],d=>{const p={...d,timestamp_frontend:0};this.UPDATE_DATA_CACHE({key:l,value:p})}),!r&&c.data.pagination&&c.data.pagination.next_page?this.fetchSync({app:e,model:t,id:s,action:o,params:{...n,page:c.data.pagination.next_page}}):c})},sendSyncMessage(e){this.wsManager&&this.wsConnected?this.wsManager.send(e):console.warn("WebSocket não conectado. Mensagem não enviada:",e)},handleSyncMessage(e){const{app:t,model:s,id:o,action:n,instance:r,timestamp:i}=e;if(!this.models[t]||!this.models[t][s])return;const a=`${t}_${s}`,c={...r||{},timestamp_frontend:i};n==="post_delete"?delete this.data_cache[a][o]:n==="post_save"&&(c.id?this.UPDATE_DATA_CACHE({key:a,value:c}):o&&this.data_cache[a]&&this.data_cache[a][o]?this.data_cache[a][o].timestamp_frontend<i&&this.fetchSync({app:t,model:s,id:o}):this.fetchSync({app:t,model:s,id:o}),a==="painelset_cronometro"&&(c.state==="running"||c.state==="paused")&&this.startLocalCronometro(c.id))},invalidateDataCache(e=null,t=null){if(e&&t){e.forEach(s=>{t.forEach(o=>{if(this.models[s]&&this.models[s][o]){const n=`${s}_${o}`;this.data_cache[n]={}}})});return}},invalidateCacheItems(e,t,s){if(!this.models[e]||!this.models[e][t])return;const o=`${e}_${t}`;this.data_cache[o]&&s.forEach(n=>{this.data_cache[o][n]&&delete this.data_cache[o][n]})},registerModels(e,t){this.models[e]||(this.models[e]={}),t.forEach(s=>{this.models[e][s]||(this.models[e][s]=!0)})},startLocalCronometro(e){T.startTimer(e,t=>{const s=this.data_cache.painelset_cronometro[e],o=this.lastServerSync,n=o?o.server_time_diff:0;if(s&&s.state==="running"){const r=(t-n)/1e3-s.started_time+s.accumulated_time;s.elapsed_time=r,s.remaining_time=s.duration-r,this.UPDATE_DATA_CACHE_CRONOMETRO({key:"painelset_cronometro",value:s})}else if(s&&s.state==="paused"){const r=(t-n)/1e3-s.paused_time;s.last_paused_time=r,this.UPDATE_DATA_CACHE_CRONOMETRO({key:"painelset_cronometro",value:s})}else T.stopTimer(e)},500)},stopLocalCronometro(e){T.stopTimer(e)}}}),ve={__name:"App",setup(e){return we().initialize(),(s,o)=>(v(),S(R,null,[U(s.$slots,"default"),X(A(pe))],64))}},Se={"cmj-app":ve,"cmj-error-404":b(()=>g(()=>import("./Error404-UoN1J9Z_.js"),__vite__mapDeps([6,1,2,7])))},ye={FontAwesomeIcon:Z,"cmj-refresh-page":b(()=>g(()=>import("./RefreshPage-DWw7eKfc.js"),__vite__mapDeps([8,1,2,9]))),"cmj-alert":b(()=>g(()=>import("./Alert-CG8OkyWu.js"),__vite__mapDeps([10,1,2]))),WidgetChild1:b(()=>g(()=>import("./WidgetChild1-C8jFEkpv.js"),__vite__mapDeps([11,1,2,12])))},C={rootComponents:Se,globalComponents:ye};function be(e,t={}){const s=y(null),o=y(!1),n=y(null),r=y(null),i=J("EventBus"),a={autoReconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5,...t};let c=0,l=null;const d=()=>{if(!(s.value&&(s.value.readyState===WebSocket.OPEN||s.value.readyState===WebSocket.CONNECTING)))try{s.value=new WebSocket(e),s.value.onopen=()=>{o.value=!0,r.value=null,c=0,console.debug("WebSocket connected to",e)},s.value.onmessage=u=>{n.value=u.data;try{const _=JSON.parse(u.data);n.value=_.message,i.emit("time-refresh",_.message)}catch(_){console.debug("Erro na conversão de JSON inválido.:",_)}},s.value.onerror=u=>{r.value=new Error("WebSocket error"),console.error("WebSocket error:",u)},s.value.onclose=()=>{o.value=!1,p()}}catch(u){r.value=u,p()}},p=()=>{!a.autoReconnect||c>=a.maxReconnectAttempts||(clearTimeout(l),l=setTimeout(()=>{c++,d()},a.reconnectInterval*Math.pow(1.5,c)))},m=()=>{s.value&&(s.value.close(),o.value=!1),clearTimeout(l)},w=u=>{if(!s.value||s.value.readyState!==WebSocket.OPEN)return r.value=new Error("WebSocket não conectado"),!1;try{const _=typeof u=="string"?u:JSON.stringify(u);return s.value.send(_),!0}catch(_){return r.value=_,!1}};return M(()=>{d()}),F(()=>{m()}),z(()=>e,(u,_)=>{u!==_&&(m(),d())}),{socket:s,isConnected:o,message:n,error:r,connect:d,disconnect:m,send:w}}ee.add(te,se,oe);document.querySelectorAll('[data-bs-toggle="popover"]').forEach(e=>{new G(e)});f.defaults.xsrfCookieName="csrftoken";f.defaults.xsrfHeaderName="X-CSRFToken";const E=K({delimiters:["[[","]]"],components:C.rootComponents,setup(){const t=(window.location.protocol==="https:"?"wss://":"ws://")+window.location.host+"/ws/time-refresh/",s=be(t);s.connect(),M(()=>{setTimeout(()=>{s.send({type:"ping",message:"Time refresh requested",timestamp_client:Date.now()})},3e3)})}});Object.keys(C.globalComponents).forEach(e=>{E.component(e,C.globalComponents[e])});E.provide("EventBus",L);E.config.globalProperties.$EventBus=L;E.use(ie).use(Q()).use(Y()).mount("#cmj");export{ge as R,he as _,we as u};
