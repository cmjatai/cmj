import{c as P,A as V,l as S,g,E as q,k as c,t as f,n as b,z as m,w as d,o as $,f as _,q as p,H as y,i as w,j as C,I as N,u as h,F as k,r as M}from"./vendor-Dq9xiLvp.js";import{R as F,_ as z,b as D}from"./main-BvRxZmbY.js";import"./vendor_fortawesome-D0qyeiI4.js";const A={class:"tit"},J={class:"subtitulo"},L={__name:"SessaoPlenariaItemList",props:{sessao:{type:Object,required:!0}},setup(r){const t=r,s=n=>["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][n]||"",a=P(()=>{let n=t.sessao,e=n.tipo,o=new Date(n.data_inicio),l=`${n.numero}ª ${e.nome}`;return e.tipo_numeracao===1&&(l+=` da ${o.getDate()>15?2:1}ª Quinzena do mês de ${s(o.getMonth())}`),e.tipo_numeracao===2&&(l+=` do mês de ${s(o.getMonth())}`),e.tipo_numeracao<=10&&(l+=` de ${o.getFullYear()}`),l}),u=P(()=>{let n=t.sessao;return`${n.sessao_legislativa.numero}ª Sessão Legislativa da
              ${n.legislatura.numero}ª Legislatura`}),i=P(()=>{let n=t.sessao,e=new Date(`${n.data_inicio}T${n.hora_inicio}`);return`${e.getDate()} de
              ${s(e.getMonth())} de
              ${e.getFullYear()} – ${n.hora_inicio}`});return(n,e)=>{const o=V("router-link");return g(),S(o,{class:b("sessao-plenaria-item-list"),to:{name:"sessao_plenaria_view_link",params:{id:r.sessao.id}}},{default:q(()=>[c("h4",A,f(a.value),1),c("div",J,[c("span",null,f(u.value),1),e[0]||(e[0]=c("span",{class:"separator"}," – ",-1)),c("span",null,f(i.value),1)])]),_:1},8,["to"])}}},U={__name:"YearExistsInModelSelect",props:{app:{type:String,required:!0},model:{type:String,required:!0},label:{type:String,required:!0}},emits:["change"],setup(r,{emit:t}){const s=t,a=r,u=m(null),i=m([{value:null,text:"Selecione um ano"}]);return d(u,(n,e)=>{s("change",n)}),$(()=>{F.Utils.fetch({app:a.app,model:a.model,action:"years"}).then(n=>{i.value=n.data,i.value.unshift({value:null,text:a.label})})}),(n,e)=>{const o=y;return g(),_("div",null,[p(o,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),options:i.value},null,8,["modelValue","options"])])}}},j={name:"pagination",props:["pagination"],data(){return{currentPage:this.pagination.page}},watch:{currentPage:function(r,t){r!==t&&this.$emit("currentPage",r)},pagination:function(r){this.currentPage=r.page}},methods:{nextPage(){this.pagination.next_page!==null&&this.$emit("nextPage")},previousPage(){this.pagination.previous_page!==null&&this.$emit("previousPage")}}},B={key:0,class:"widget-pagination d-flex justify-content-between align-items-center"},O={class:"pages"},E={class:"inner"};function I(r,t,s,a,u,i){const n=N;return s.pagination.total_entries!==0?(g(),_("div",B,[c("span",{class:b(["arrow",s.pagination.previous_page!==null?"hover-circle":"disabled"]),onClick:t[0]||(t[0]=(...e)=>i.previousPage&&i.previousPage(...e))},[...t[3]||(t[3]=[c("i",{class:"fas fa-chevron-left"},null,-1)])],2),c("div",O,[C(f(s.pagination.start_index)+"–"+f(s.pagination.end_index)+" de "+f(s.pagination.total_entries)+" ",1),c("div",E,[p(n,{align:"right","total-rows":s.pagination.total_entries,modelValue:u.currentPage,"onUpdate:modelValue":t[1]||(t[1]=e=>u.currentPage=e),"per-page":18},null,8,["total-rows","modelValue"])])]),c("span",{class:b(["arrow",s.pagination.next_page!==null?"hover-circle":"disabled"]),onClick:t[2]||(t[2]=(...e)=>i.nextPage&&i.nextPage(...e))},[...t[4]||(t[4]=[c("i",{class:"fas fa-chevron-right"},null,-1)])],2)])):w("",!0)}const T=z(j,[["render",I]]),Y={__name:"MonthSelect",emits:["change"],setup(r,{emit:t}){const s=t,a=m(null),u=[{value:null,text:"Filtre por mês..."},{value:1,text:"Janeiro"},{value:2,text:"Fevereiro"},{value:3,text:"Março"},{value:4,text:"Abril"},{value:5,text:"Maio"},{value:6,text:"Junho"},{value:7,text:"Julho"},{value:8,text:"Agosto"},{value:9,text:"Setembro"},{value:10,text:"Outubro"},{value:11,text:"Novembro"},{value:12,text:"Dezembro"}];return d(a,i=>{s("change",i)}),(i,n)=>{const e=y;return g(),_("div",null,[p(e,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=o=>a.value=o),options:u},null,8,["modelValue"])])}}},R={__name:"ModelSelect",props:{app:{type:String,required:!0},model:{type:String,required:!0},label:{type:String,required:!0},choice:{type:String,required:!0},ordering:{type:String,required:!1,default:""},getFromCache:{type:Boolean,required:!1,default:!0},value:{type:[String,Number,null],required:!1,default:null},height:{type:Number,required:!1,default:1}},emits:["change"],setup(r,{emit:t}){const s=D(),a=r,u=t,i=m(a.value),n=P(()=>[{value:null,text:a.label},...Object.values(s.data_cache[`${a.app}_${a.model}`]||{}).map(e=>({value:e.id,text:e[a.choice]}))]);return d(i,e=>{u("change",e)}),d(()=>a.value,e=>{i.value=e}),(e,o)=>{const l=y;return g(),_("div",null,[p(l,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=v=>i.value=v),options:n.value,"select-size":r.height},null,8,["modelValue","options","select-size"])])}}},H={class:"form-sessao-list"},Q={__name:"SessaoPlenariaFilter",props:{pagination:{type:Object,required:!0}},emits:["changeFilter","currentPage","nextPage","previousPage"],setup(r,{emit:t}){const s=t,a=m({year:null,month:null,tipo:null});d(()=>a.value.year,e=>{s("changeFilter",a.value)}),d(()=>a.value.month,e=>{s("changeFilter",a.value)}),d(()=>a.value.tipo,e=>{s("changeFilter",a.value)});const u=e=>{s("currentPage",e)},i=()=>{s("nextPage")},n=()=>{s("previousPage")};return(e,o)=>(g(),_("div",H,[p(h(U),{onChange:o[0]||(o[0]=l=>a.value.year=l),class:"form-opacity",app:"sessao",model:"sessaoplenaria",label:"Filtre por Ano"}),p(h(Y),{onChange:o[1]||(o[1]=l=>a.value.month=l),class:"form-opacity"}),p(h(R),{onChange:o[2]||(o[2]=l=>a.value.tipo=l),class:"form-opacity",app:"sessao",model:"tiposessaoplenaria",label:"Filtre por Tipo de Sessão",choice:"nome",ordering:"nome","get-from-cache":!0}),p(h(T),{pagination:r.pagination,onNextPage:i,onPreviousPage:n,onCurrentPage:u},null,8,["pagination"])]))}},G={class:"sessaoplenaria-list"},K={class:"sessao-items"},ee={__name:"SessaoPlenariaList",setup(r){const t=m({}),s=m([]),a=o=>{e(1,o)},u=o=>{console.log("currentPage",o),e(o)},i=()=>{t.value?.current_page<t.value?.total_pages&&e(t.value.current_page+1)},n=()=>{t.value?.current_page>1&&e(t.value.current_page-1)},e=async(o=1,l={})=>{const v={o:"-data_inicio,-hora_inicio,id",page:o,page_size:10,year:l.year||"",month:l.month||"",tipo:l.tipo||"",expand:"tipo;legislatura;sessao_legislativa"};F.Utils.fetch({app:"sessao",model:"sessaoplenaria",params:v}).then(x=>{x&&x.data.results&&(t.value=x.data.pagination||{},s.value=x.data.results||[])}).catch(()=>{})};return $(()=>{e(1)}),(o,l)=>(g(),_("div",G,[p(h(Q),{pagination:t.value,onChangeFilter:a,onCurrentPage:u,onNextPage:i,onPreviousPage:n},null,8,["pagination"]),c("div",K,[(g(!0),_(k,null,M(s.value,v=>(g(),S(h(L),{key:v.id,sessao:v},null,8,["sessao"]))),128))])]))}};export{ee as default};
