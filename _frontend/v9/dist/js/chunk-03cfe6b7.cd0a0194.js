(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-03cfe6b7"],{2877:function(e,t,n){"use strict";function o(e,t,n,o,i,c,a,r){var s,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),c&&(u._scopeId="data-v-"+c),a?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=s):i&&(s=r?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(u.functional){u._injectStyles=s;var d=u.render;u.render=function(e,t){return s.call(t),d(e,t)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,s):[s]}return{exports:e,options:u}}n.d(t,"a",(function(){return o}))},"3bf0":function(e,t,n){"use strict";n.r(t);var o=n("ebc0").a,i=(n("5e35"),n("2877")),c=Object(i.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return"INIT"!==e.mode?n("div",{class:e.classParent},[e.notHasParent?n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.elemento.id,expression:"elemento.id"}],staticClass:"btn-toolbar widgets-function justify-content-between"},[n("b-button-group",[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.target!==t.currentTarget?null:e.clickVersaoFinal(t)}}},[e._v("Versão Final")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.target!==t.currentTarget?null:e.clickEditMetadados(t)}}},[e._v("Editar Metadados")])],1),n("div",{staticClass:"btn-group widget-visibilidade"},[n("cmj-choices",{attrs:{options:e.visibilidade_choice,name:"visibilidade-",id:e.elemento.id},model:{value:e.elemento.visibilidade,callback:function(t){e.$set(e.elemento,"visibilidade",t)},expression:"elemento.visibilidade"}})],1)],1),n("div",{staticClass:"path-title construct"},[n("textarea-autosize",{attrs:{placeholder:"Título do Documento",align:"text-center"},model:{value:e.elemento.titulo,callback:function(t){e.$set(e.elemento,"titulo",t)},expression:"elemento.titulo"}})],1),n("div",{staticClass:"path-description construct"},[n("textarea-autosize",{attrs:{placeholder:"Descrição do Documento",align:"text-center"},model:{value:e.elemento.descricao,callback:function(t){e.$set(e.elemento,"descricao",t)},expression:"elemento.descricao"}})],1),n("div",{staticClass:"construct"},[n("textarea-autosize",{attrs:{placeholder:"texto...",align:"text-left"},model:{value:e.elemento.texto,callback:function(t){e.$set(e.elemento,"texto",t)},expression:"elemento.texto"}})],1)]):e._e(),e._l(e.childsOrdenados,(function(t){return n(e.classChild(t),{key:t.id,tag:"component",attrs:{child:t,parent:e.elemento}})}))],2):n("div",[e._m(0)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("div",{staticClass:"loading"},[this._v(" Carregando Editor... ")])])}],!1,null,null,null);t.default=c.exports},"5e35":function(e,t,n){"use strict";var o=n("a244");n.n(o).a},a244:function(e,t,n){},b0c0:function(e,t,n){var o=n("83ab"),i=n("9bf2").f,c=Function.prototype,a=c.toString,r=/^\s*function ([^ (]*)/;o&&!("name"in c)&&i(c,"name",{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(e){return""}}})},ebc0:function(e,t,n){"use strict";(function(e){n("c975"),n("b0c0"),n("d3b7");var o=n("5530"),i=n("2f62"),c=n("975e");t.a={name:"documento-edit",props:["child","parent"],components:{CmjChoices:function(){return n.e("chunk-f2e4f366").then(n.bind(null,"705b"))},TextareaAutosize:function(){return n.e("chunk-4906bdc4").then(n.bind(null,"8fe8"))},DropZone:function(){return n.e("chunk-3ad83d5e").then(n.bind(null,"45d2"))},Container:function(){return n.e("chunk-8637b368").then(n.bind(null,"26b1"))},ContainerFluid:function(){return n.e("chunk-f70bd658").then(n.bind(null,"e06f"))},ContainerFile:function(){return n.e("chunk-43eceacf").then(n.bind(null,"576e"))},ContainerTdBi:function(){return n.e("chunk-21f31f61").then(n.bind(null,"3559"))},TpdTexto:function(){return n.e("chunk-03e305fd").then(n.bind(null,"d5b8"))},TpdFile:function(){return n.e("chunk-64fddbd4").then(n.bind(null,"0c59"))},TpdVideo:function(){return n.e("chunk-01da7d98").then(n.bind(null,"0f7b"))},TpdAudio:function(){return n.e("chunk-36f69b74").then(n.bind(null,"8410"))},TpdImage:function(){return n.e("chunk-cf3b0052").then(n.bind(null,"7429"))},TpdImageTdBi:function(){return n.e("chunk-5346dcfe").then(n.bind(null,"f8dd"))},TpdGallery:function(){return n.e("chunk-5c39afd2").then(n.bind(null,"ed8f"))},TpdReferencia:function(){return n.e("chunk-55bb982f").then(n.bind(null,"f081"))},ModalImageList:function(){return n.e("chunk-7535c313").then(n.bind(null,"115a"))},ModalReferenciaImageList:function(){return n.e("chunk-166e0c47").then(n.bind(null,"863d"))}},data:function(){return{documentoResource:c.a.DocumentoResource,elemento:{id:0,classe:0,parent:null,titulo:"",descricao:"",visibilidade:99,texto:"",autor:"",refresh:0},mode:"INIT"}},watch:{"elemento.titulo":function(e,t){this.handlerWatch(e,t,"titulo")},"elemento.descricao":function(e,t){this.handlerWatch(e,t,"descricao")},"elemento.visibilidade":function(e,t){this.handlerWatch(e,t,"visibilidade")},"elemento.texto":function(e,t){this.handlerWatch(e,t,"texto")},"elemento.autor":function(e,t){this.handlerWatch(e,t,"autor")},parent:function(e,t){this.elemento=this.child}},computed:Object(o.a)(Object(o.a)({},Object(i.c)(["getChilds","getChoices","getDocObject"])),{},{name_component:function(){return this.$options.name},hasParent:function(){return this.elemento&&this.elemento.parent>0},notHasParent:function(){return!this.elemento||!this.elemento.parent},refresh:function(){var e=this.elemento;return e=e.refresh,e=void 0===e?0:e,e},slug:function(){var e=this.elemento.slug;return"/"+e},meta_edit:function(){return"/documento/"+this.elemento.id+"/edit"},childsOrdenados:function(){var t=this.elemento.childs;return e.orderBy(t,"ordem")},visibilidade_choice:function(){return this.getChoices&&this.getChoices.visibilidade?this.getChoices.visibilidade:{}},classParent:function(){return this.notHasParent?"container-path container-documento-edit":""},ordem:function(){return this.elemento.ordem}}),methods:Object(o.a)(Object(o.a)({},Object(i.b)(["setDocObject","setTitulo","setDescricao","sendMessage"])),{},{clickVersaoFinal:function(){window.open(this.slug,"_blank")},clickEditMetadados:function(){window.open(this.meta_edit,"_self")},classChild:function(e){if(!e.id&&this.notHasParent)return"container-path container-documento-edit";try{var t=this.getChoices.all_bycode[e.tipo].component_tag;return-1!==[10].indexOf(this.getDocObject.tipo)&&(t+="-"+this.getChoices.all_bycode[this.getDocObject.tipo].component_tag),t}catch(e){return""}},handlerWatch:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=Object();if(n&&(o[n]=e),"CREATE"===this.mode)return o.classe=this.elemento.classe,o.parent=this.elemento.parent,void this.createDocumento(o);if("INIT"!==this.mode){o.id=this.elemento.id;var i=this;i.updateDocumento(o).then((function(){i.success()}))}},updateDocumento:function(e){var t=this,n=this;return n.documentoResource.updateDocumento(e).then((function(e){n.setDocObject(e.data)})).catch((function(e){return t.danger()}))},success:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Informação atualizada com sucesso.";this.sendMessage({alert:"success",message:e})},danger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Ocorreu um erro na comunicação com o servidor.";this.sendMessage({alert:"danger",message:e})},createDocumento:function(e){var t=this,n=this;n.documentoResource.createDocumento(e).then((function(e){n.setDocObject(e.data),n.$router.push({name:"documento_construct",params:{id:e.data.id}}),n.$nextTick().then((function(){n.getDocumento(e.data.id)}))})).catch((function(e){return t.danger()}))},getDocumento:function(e){var t=this;return this.mode="INIT",this.$nextTick().then((function(){t.documentoResource.getDocumento(e).then((function(e){t.setDocObject(e.data),t.elemento=e.data,t.$nextTick().then((function(){t.mode="UPDATE",t.success()}))})).catch((function(e){t.setDocObject({}),t.elemento={},t.danger("erro na atualização")}))}))},createBrother:function(e){var t=this;t.documentoResource.createDocumento(e).then((function(e){t.$parent.getDocumento(e.data.parent)})).catch((function(e){t.danger()}))},createChild:function(e){var t=this,n=this;n.documentoResource.createDocumento(e).then((function(e){n.getDocumento(t.elemento.id)})).catch((function(e){n.danger("erro na adição")}))}}),mounted:function(){var e=this;if(e.child)e.elemento=e.child,e.$nextTick().then((function(){e.mode="UPDATE"}));else{var t=e.$route.params.id;"documento_construct"===e.$route.name?e.getDocumento(t):(e.mode="CREATE",e.elemento.classe=t,e.parent&&(e.elemento.parent=e.parent.id))}}}}).call(this,n("2ef0"))}}]);