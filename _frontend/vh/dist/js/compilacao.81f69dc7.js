!function(t){function e(e){for(var o,s,r=e[0],d=e[1],l=e[2],p=0,f=[];p<r.length;p++)s=r[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(t[o]=d[o]);for(c&&c(e);f.length;)f.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],o=!0,r=1;r<i.length;r++){var d=i[r];0!==n[d]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},n={compilacao:0},a=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/";var r=window.webpackJsonp=window.webpackJsonp||[],d=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var c=d;a.push([3,"chunk-vendors"]),i()}({"0872":function(t,e,i){(function(t){i("99af"),i("4de4"),i("7db0"),i("a630"),i("d81d"),i("e9f5"),i("910d"),i("f665"),i("ab43"),i("d3b7"),i("3ca3");var e=window.$;window.DispositivoEdit=function(){var i,o="textarea";if(!(this instanceof window.DispositivoEdit))return i||(i=new window.DispositivoEdit),i;i=this,window.DispositivoEdit=function(){return i},i.bindActionsEditorType=function(t){o=this.getAttribute("editortype"),window.SetCookie("editortype",o,30);var n=e(this).closest(".dpt").attr("pk");i.clearEditSelected(),i.triggerBtnDptEdit(n),t.preventDefault()},i.bindActionsClick=function(t){var o=this.getAttribute("pk"),n={action:this.getAttribute("action"),tipo_pk:this.getAttribute("tipo_pk"),perfil_pk:this.getAttribute("perfil_pk"),variacao:this.getAttribute("variacao"),pk_bloco:this.getAttribute("pk_bloco")},a=o+"/refresh";i.waitShow(),e.get(a,n).done((function(t){i.clearEditSelected(),null!=t.pk&&i.message(t)})).fail(i.waitHide).always(i.waitHide)},i.clearEditSelected=function(){e(".dpt-selected > .dpt-form").html(""),e(".dpt-actions, .dpt-actions-bottom").html(""),window.tinymce.remove(),e(".dpt-selected").removeClass("dpt-selected")},i.editDispositivo=function(t){var o=t.target.classList.contains("dpt-link")?t.target:t.target.parentElement.classList.contains("dpt-link")?t.target.parentElement:null;if(!(o&&o.getAttribute("href")&&o.getAttribute("href").length>0)){var n=e(this).closest(".dpt");if(n.hasClass("dpt-selected"))"editor-close"===this.getAttribute("action")&&i.clearEditSelected();else{i.clearEditSelected(),i.loadActionsEdit(n);var a=n.attr("formtype");n.on(a,i[a]),i.loadForm(n,a)}}},i.gc=function(){setTimeout((function(){e(".dpt:not(.dpt-selected) > .dpt-form").html("")}),500)},i.get_form_base=function(){var t=e(this);t.addClass("dpt-selected"),t.children().filter(".dpt-form").find("form").submit(i.onSubmitEditFormBase),i.scrollTo(t),t.off("get_form_base"),t.find(".btn-fechar").on("click",(function(t){i.clearEditSelected(),t.preventDefault()}));var o=t.find(".btns-excluir");t.find(".dpt-actions-bottom").first().append(o),o.find(".btn-outline-danger").on("click",i.bindActionsClick)},i.get_form_alteracao=function(){var t=e(this);t.off("get_form_alteracao"),e(".dpt-actions, .dpt-actions-bottom").html("");var o=t.children().filter(".dpt-form").children().first(),n="".concat(o[0].id_dispositivo_search_form.value,"?ta_base_id=").concat(o[0].id_texto_articulado_do_editor.value);window.DispositivoSearch({url_form:n,text_button:"Selecionar",autostart:!0}),i.scrollTo(t),o.submit(i.onSubmitFormRegistraAlteracao),t.find(".btn-fechar").on("click",(function(e){i.clearEditSelected(),i.triggerBtnDptEdit(t.attr("pk")),e.preventDefault()}))},i.get_form_inclusao=function(){var t=e(this);t.off("get_form_inclusao"),e(".dpt-actions, .dpt-actions-bottom").html("");var o=t.children().filter(".dpt-form").children().first(),n="".concat(o[0].id_dispositivo_search_form.value,"?ta_base_id=").concat(o[0].id_texto_articulado_do_editor.value);window.DispositivoSearch({url_form:n,text_button:"Selecionar",post_selected:i.allowed_inserts_registro_inclusao,params_post_selected:{pk_bloco:t.attr("pk")},autostart:!0}),i.scrollTo(t),o.submit(i.onSubmitFormRegistraInclusao),t.find(".btn-fechar").on("click",(function(e){i.clearEditSelected(),i.triggerBtnDptEdit(t.attr("pk")),e.preventDefault()}))},i.get_form_revogacao=function(){var t=e(this);t.off("get_form_revogacao"),e(".dpt-actions, .dpt-actions-bottom").html("");var o=t.children().filter(".dpt-form").children().first(),n="".concat(o[0].id_dispositivo_search_form.value,"?ta_base_id=").concat(o[0].id_texto_articulado_do_editor.value);window.DispositivoSearch({url_form:n,text_button:"Selecionar",autostart:!0}),i.scrollTo(t),o.submit(i.onSubmitFormRegistraRevogacao),t.find(".btn-fechar").on("click",(function(){i.clearEditSelected(),i.triggerBtnDptEdit(t.attr("pk"))}))},i.allowed_inserts_registro_inclusao=function(t){var o=e("#id"+t.pk_bloco+" input[name='dispositivo_base_para_inclusao']");if(0!==o.length){var n=o[0].value,a={action:"get_actions_allowed_inserts_registro_inclusao",pk_bloco:t.pk_bloco},s=n+"/refresh";i.waitShow(),e.get(s,a).done((function(t){e(".allowed_inserts").html(t),e(".allowed_inserts").find(".btn-action").on("click",i.bindActionsClick)})).fail(i.waitHide).always(i.waitHide)}},i.loadActionsEdit=function(t){var n=t.attr("pk")+"/refresh?action=get_actions";e.get(n).done((function(n){t.find(".dpt-actions").first().html(n),t.find(".btn-action").on("click",i.bindActionsClick),t.find(".btn-compila").on("click",i.loadFormsCompilacao),t.find(".btn-editor-type").on("click",i.bindActionsEditorType),"construct"===o&&(t.find(".btn-group-inserts").first().addClass("open show"),t.find(".btn-group-inserts ul").first().addClass("show")),t.find(".btn-group-inserts button").mouseenter((function(i){t.find(".btn-group-inserts ul").removeClass("show"),t.find(".btn-group-inserts").removeClass("open show"),e(this.parentElement).addClass("open show"),e(this.parentElement).find("ul").addClass("show")})),t.find(".btn-group-inserts").mouseleave((function(e){t.find(".btn-group-inserts ul").removeClass("show"),t.find(".btn-group-inserts").removeClass("open show")})),i.gc()}))},i.loadForm=function(t,n){var a=t.attr("pk"),s=t.children().filter(".dpt-form");if(1===s.length){var r=a+"/refresh?action="+n;e.get(r).done((function(e){"construct"!==o&&(s.html(e),"tinymce"===o&&window.initTextRichEditor()),t.trigger(n)})).always((function(){i.waitHide()}))}},i.loadFormsCompilacao=function(t){var o=e(this).closest(".dpt"),n=this.getAttribute("action");o.on(n,i[n]),i.loadForm(o,n)},i.modalMessage=function(t,i,o){return null!==t&&""!==t&&(e("#modal-message #message").html(t),e("#modal-message").modal("show"),e("#modal-message, #modal-message .alert button").off(),e("#modal-message .alert").removeClass("alert-success alert-info alert-warning alert-danger alert-danger"),e("#modal-message .alert").addClass(i),null!=o&&e("#modal-message").on("hidden.bs.modal",o),e("#modal-message .alert button").on("click",(function(){e("#modal-message").modal("hide")})),!0)},i.message=function(t){if(void 0!==t.message)if(t.message.modal)i.modalMessage(t.message.value,"alert-"+t.message.type,(function(){i.waitShow(),i.refreshScreenFocusPk(t)}));else{if(i.refreshScreenFocusPk(t),!("message"in t))return;var o=e(".cp-notify");o.removeClass("hide");var n=o.find(".message");n.text(t.message.value),n.removeClass("bg-primary bg-success bg-info bg-warning bg-danger").addClass("bg-"+t.message.type),setTimeout((function(){o.addClass("hide")}),t.message.time?t.message.time:3e3)}else i.refreshScreenFocusPk(t)},i.offClicks=function(){e(".btn-dpt-edit").off()},i.onClicks=function(t){(null==t?e(".btn-dpt-edit"):e(t).find(".btn-dpt-edit")).on("click",i.editDispositivo)},i.onSubmitFormRegistraAlteracao=function(t){if(void 0===this.dispositivo_alterado)return i.modalMessage("Nenhum dispositivo selecionado","alert-info"),void(null!=t&&t.preventDefault());var o=void 0===this.dispositivo_alterado.length?[this.dispositivo_alterado]:Array.from(this.dispositivo_alterado),n={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_alterado:o.filter((function(t,e,i){return t.checked})).map((function(t){return t.value})),formtype:"get_form_alteracao"},a=e(this).closest(".dpt").attr("pk")+"/refresh";i.waitShow(),e.post(a,n).done((function(t){i.clearEditSelected(),null!=t.pk?i.message(t):alert("Erro na resposta!")})).always((function(){i.waitHide()})),null!=t&&t.preventDefault()},i.onSubmitFormRegistraInclusao=function(t){var o={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_base_para_inclusao:this.dispositivo_base_para_inclusao.value,formtype:"get_form_inclusao"},n=e(this).closest(".dpt").attr("pk")+"/refresh";i.waitShow(),e.post(n,o).done((function(t){i.clearEditSelected(),null!=t.pk?i.message(t):alert("Erro na resposta!")})).always((function(){i.waitHide()})),null!=t&&t.preventDefault()},i.onSubmitFormRegistraRevogacao=function(t){if(void 0===this.dispositivo_revogado)return i.modalMessage("Nenhum dispositivo selecionado","alert-info"),void(null!=t&&t.preventDefault());var o=void 0===this.dispositivo_revogado.length?[this.dispositivo_revogado]:Array.from(this.dispositivo_revogado),n={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,dispositivo_revogado:o.filter((function(t,e,i){return t.checked})).map((function(t){return t.value})),revogacao_em_bloco:this.revogacao_em_bloco.value,formtype:"get_form_revogacao"},a=e(this).closest(".dpt").attr("pk")+"/refresh";i.waitShow(),e.post(a,n).done((function(t){i.clearEditSelected(),null!=t.pk?i.message(t):alert("Erro na resposta!")})).always((function(){i.waitHide()})),null!=t&&t.preventDefault()},i.onSubmitEditFormBase=function(t){var o=this,n="",a="",s="",r=window.tinymce.get("id_texto"),d=window.tinymce.get("id_texto_atualizador");n=null!=r?r.getContent():this.id_texto.value,null!=d?a=d.getContent():"id_texto_atualizador"in this&&(a=this.id_texto_atualizador.value),"visibilidade"in this&&(s=this.visibilidade.value);var l={csrfmiddlewaretoken:this.csrfmiddlewaretoken.value,texto:n,texto_atualizador:a,visibilidade:s,formtype:"get_form_base"},c=e(this).closest(".dpt").attr("pk")+"/refresh";i.waitShow(),e.post(c,l).done((function(t){if("string"==typeof t){var n=e(o).closest(".dpt");return n=e("#"+n.replaceWith(t).attr("id")),i.onClicks(n),void i.waitHide()}i.clearEditSelected(),null!=t.pk?i.message(t):alert("Erro na resposta!")})).always((function(){i.waitHide()})),null!=t&&t.preventDefault()},i.refreshContent=function(t,o){if(0!==t.length){var n=t.shift(),a=n+"/refresh";e.get(a).done((function(a){var s=e("#id"+n).closest(".dpt");s=e("#"+s.replaceWith(a).attr("id")),i.onClicks(s),i.reloadFunctionsDraggables(),o>0&&i.triggerBtnDptEdit(o),i.refreshContent(t)}))}else i.waitHide()},i.refreshScreenFocusPk=function(t){if(i.waitShow(),-1===t.pai[0]){i.waitShow();var e=location.href.split("#")[0];location.href=e+"#"+t.pk,location.reload(!0)}else i.refreshContent(t.pai,t.pk)},i.reloadFunctionsDraggables=function(){var i=e(".dpt-alts");i.length>0?(i.sortable({connectWith:".dpt-alts",items:".sorting-initialize",revert:!0,distance:15,start:function(t,e){},stop:function(t,i){var o=i.item.attr("pk"),n=i.item.closest(".dpt-alts").closest(".dpt").attr("pk"),a=o+"/refresh?action=json_drag_move_dpt_alterado&index="+i.item.index()+"&bloco_pk="+n;e.get(a).done((function(t){}))}}),i.find(".dpt").one("mouseenter",(function(){t(this).addClass("sorting-initialize"),i.sortable("refresh")})),e(".dpt-alts .dpt").draggable({connectToSortable:".dpt-alts",revert:"invalid",zIndex:1,distance:15,drag:function(t,i){e(".dpt-alts").addClass("drag")},stop:function(t,i){e(".dpt-alts").removeClass("drag")}}),i.disableSelection()):console.warn("No '.dpt-alts' elements found to make sortable/draggable.")},i.scrollTo=function(t){try{e("html, body").animate({scrollTop:t.offset().top-window.innerHeight/9},100)}catch(t){}},i.triggerBtnDptEdit=function(t){var i=e("#id"+t+" > .dpt-text.btn-dpt-edit");0===i.length&&(i=e("#id"+t+" > .dpt-actions-fixed > .btn-dpt-edit")),i.first().trigger("click")},i.waitHide=function(){e("#wait_message").addClass("displaynone")},i.waitShow=function(){e("#wait_message").removeClass("displaynone")},i.init=function(){e(".dpt-actions-fixed").first().css("opacity","1"),null!==(o=window.ReadCookie("editortype"))&&""!==o||(o="textarea",window.SetCookie("editortype",o,30)),i.offClicks(),i.onClicks(),i.reloadFunctionsDraggables();var t=location.href.split("#");2===t.length&&""!==t[1]&&i.triggerBtnDptEdit(t[1]),e("main").click((function(t){t.target!==this&&t.target!==this.firstElementChild||i.clearEditSelected()})),i.waitHide()},i.init()},e(document).ready((function(){t(".cpe").length>0&&window.DispositivoEdit()}))}).call(this,i("1157"))},3:function(t,e,i){t.exports=i("6ccd")},"4a8b":function(t,e,i){"use strict";i("4de4"),i("7db0"),i("e9f5"),i("910d"),i("f665"),i("e9c4"),i("b64b"),i("d3b7");var o=window.$;function n(t){o(t).append('<div style="text-align:center;"><i style="font-size: 200%;" class="fa fa-refresh fa-spin"></i></div>')}e.a={SetCookie:function(t,e,i){var o=new Date,n=new Date;null!==i&&0!==i||(i=1),n.setTime(o.getTime()+864e5*i),document.cookie=t+"="+escape(e)+";expires="+n.toGMTString()},ReadCookie:function(t){var e=" "+document.cookie,i=e.indexOf(" "+t+"=");if(-1===i&&(i=e.indexOf(";"+t+"=")),-1===i||""===t)return"";var o=e.indexOf(";",i+1);return-1===o&&(o=e.length),unescape(e.substring(i+t.length+2,o))},insertWaitAjax:n,DispositivoSearch:function(t){o((function(){var e={},i=o("body").children("#container_ds");i.length>0&&o(i).remove(),i=o('<div id="container_ds"/>'),o("body").prepend(i),o('[data-sapl-ta="DispositivoSearch"]').each((function(){var a=o(this),s=a.attr("data-type-selection"),r=a.attr("data-field"),d=a.attr("data-function"),l=function(t){if("checkbox"===s){var e=a.find('input[name="ta_select_all"]');e.off(),e.on("change",(function(t){o(this).closest("ul").find('input[name="'+r+'"]').prop("checked",this.checked)}))}else{var i=a.find("input");i.off(),i.attr("type","hidden"),o('<a class="text-danger">').insertBefore(i).append(o('<span aria-hidden="true">&times;</span>')).on("click",(function(){2===o(this).closest("ul").find("li").length?o(this).closest("ul").remove():o(this).closest("li").remove()}))}};l();var c=function(t){var i=o('select[name="tipo_ta"]').val(),a=o('select[name="tipo_model"]').val(),l=o('input[name="num_ta"]').val(),c=o('input[name="ano_ta"]').val(),p=o('input[name="tipo_resultado"]:checked').val(),f=o('input[name="rotulo_dispositivo"]').val(),u=o('input[name="texto_dispositivo"]').val(),m=o('select[name="max_results"]').val(),h=o('input[name="texto_articulado_do_editor"]').val();f.length>0||u.length>0?(o('input[name="tipo_resultado"]').prop("disabled",!1),o('input[name="tipo_resultado"]').each((function(t,e){e.parentElement.classList.remove("disabled")})),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","1")):(o('input[name="tipo_resultado"]').filter('[value="False"]').prop("checked",!0),o('input[name="tipo_resultado"]').prop("disabled",!0),o('input[name="tipo_resultado"]').each((function(t,e){e.parentElement.classList.add("disabled")})),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","0.3"),p="False"),e={tipo_ta:i,tipo_model:a,num_ta:l,ano_ta:c,texto:u,rotulo:f,tipo_resultado:p,max_results:m,data_type_selection:s,data_field:r,data_function:d,texto_articulado_do_editor:h},window.localStorage.setItem("dispositivo_search_form_data",JSON.stringify(e)),o(".result-busca-dispositivo").html(""),n(".result-busca-dispositivo"),o.get("/ta/search_fragment_form",e).done((function(t){if(o(".result-busca-dispositivo").html(t),"checkbox"===s){var e=o(".result-busca-dispositivo").find('input[name="ta_select_all"]');e.off(),e.on("change",(function(t){o(this).closest("ul").find('input[name="'+r+'"]').prop("checked",this.checked)}))}}))},p=function(t){var e=o('input[name="rotulo_dispositivo"]').val(),i=o('input[name="texto_dispositivo"]').val();e.length>0||i.length>0?(o('input[name="tipo_resultado"]').prop("disabled",!1),o('input[name="tipo_resultado"]').each((function(t,e){e.parentElement.classList.remove("disabled")})),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","1")):(o('input[name="tipo_resultado"]').filter('[value="False"]').prop("checked",!0),o('input[name="tipo_resultado"]').prop("disabled",!0),o('input[name="tipo_resultado"]').each((function(t,e){e.parentElement.classList.add("disabled")})),o('input[name="tipo_resultado"]').closest("#div_id_tipo_resultado").css("opacity","0.3"))},f=a.children("#buttonDs");f.length>0&&o(f).remove(),f=o('<div id="buttonDs" class="clearfix"/>'),a.prepend(f);var u=o("<button>").text(t.text_button).attr("type","button").attr("class","btn btn-sm btn-success btn-modal-open");f.append(u),u.on("click",(function(){o.get(t.url_form,(function(n){i.html(n);var d=o("#modal-ds");d.find('select[name="tipo_ta"]').change((function(t){var i;i="/ta/search_fragment_form?action=get_tipos&tipo_ta="+this.value,d.find('label[for="id_tipo_model"]').html("Tipos de "+this.children[this.selectedIndex].innerHTML);var n=d.find('select[name="tipo_model"]');n.empty(),o('<option value="">Carregando...</option>').appendTo(n),o.get(i).done((function(t){for(var i in n.empty(),t)for(var a in t[i])n.append(o("<option>").attr("value",a).text(t[i][a]));setTimeout((function(){o('select[name="tipo_model"]').val(e.tipo_model)}),200)}))})),d.find('input[name="texto_dispositivo"], input[name="rotulo_dispositivo"]').on("keyup",p),d.find(".btn-busca").click(c),d.find("#btn-modal-select").click((function(){var e=a.find("ul");"radio"===s&&e.remove();var i=d.find('[name="'+r+'"]:checked');i.closest("ul").find("input:not(:checked)").filter('[name!="ta_select_all"]').closest("li").remove(),i.closest("ul").each((function(){var t=a.find("#"+this.id);0!==t.length?o(this).find("input").each((function(){t.find("#"+this.id).length>0||t.append(o(this).closest("li"))})):a.append(this)})),l(),d.modal("hide"),"post_selected"in t&&t.post_selected(t.params_post_selected)}));try{e=JSON.parse(window.localStorage.getItem("dispositivo_search_form_data")),o('input[name="num_ta"]').val(e.num_ta),o('input[name="ano_ta"]').val(e.ano_ta),o('input[name="rotulo_dispositivo"]').val(e.rotulo),o('input[name="texto_dispositivo"]').val(e.texto),o('select[name="max_results"]').val(e.max_results),o('input[name="tipo_resultado"]').filter('[value="'.concat(e.tipo_resultado,'"]')).attr("checked",!0)}catch(t){}setTimeout((function(){try{o('select[name="tipo_ta"]').val(e.tipo_ta),o('select[name="tipo_ta"]').trigger("change")}catch(t){}}),200),d.modal("show")}))})),"autostart"in t&&t.autostart&&u.trigger("click")}))}))}}},"6ccd":function(t,e,i){"use strict";i.r(e),function(t,e){i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("e9f5"),i("7d54"),i("d3b7"),i("159b"),i("6d5e");var o=i("4a8b"),n=i("a0fe"),a=i("aa48");i("0872");t.forEach(t.merge(t.merge(o.a,a.a),n.a),(function(t,e){window[e]=t})),e(document).ready((function(){setTimeout((function(){var t=location.href.split("#");if(2===t.length)try{e("html, body").animate({scrollTop:e("#dptt"+t[1]).offset().top-window.innerHeight/9},0)}catch(t){}}),100),e("#btn_font_menos").click((function(){e(".dpt").css("font-size","-=1")})),e("#btn_font_mais").click((function(){e(".dpt").css("font-size","+=1")})),e(".dpt.bloco_alteracao .dpt").each((function(){var t=parseInt(e(this).attr("nivel"));e(this).css("z-index",15-t)})),e(".cp-linha-vigencias > li:not(:first-child):not(:last-child) > a").click((function(t){e(".cp-linha-vigencias > li").removeClass("active"),e(this).closest("li").addClass("active"),t.preventDefault()})),e("main").click((function(t){t.target!==this&&t.target!==this.firstElementChild||e(".cp-linha-vigencias > li").removeClass("active")})),window.onReadyNotasVides()}))}.call(this,i("2ef0"),i("1157"))},"6d5e":function(t,e,i){},a0fe:function(t,e,i){"use strict";(function(t){i("4de4"),i("e9f5"),i("910d"),i("7d54"),i("d3b7"),i("ac1f"),i("841c"),i("159b");var o=window.$,n=i("bf68");function a(e){"function"==typeof t&&e instanceof t&&(e=e[0]);var i=e.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}function s(t,e){for(var i=null,n=o(".dptt"),s=0;s<n.length;s++)if(!o(n[s]).hasClass("displaynone")&&a(n[s])){i=s+1<n.length?n[s+1]:n[s];break}if(o(".cp .tipo-vigencias a").removeClass("active"),o(t).addClass("active"),o(".dptt.desativado").addClass("displaynone"),o(".desativado > .dn").addClass("displaynone"),o(".nota-alteracao").removeClass("displaynone"),o(".dptt.revogado").removeClass("displaynone"),e||o(".nota-alteracao").addClass("displaynone"),i)try{o("html, body").animate({scrollTop:o(i).parent().offset().top-60},0)}catch(t){}}e.a={isElementInViewport:a,textoMultiVigente:function(t,e){for(var i=null,s=o(".dptt"),r=0;r<s.length;r++)if(!o(s[r]).hasClass("displaynone")&&a(s[r])){i=r+1<s.length?s[r+1]:s[r];break}if(o(".cp .tipo-vigencias a").removeClass("active"),o(t).addClass("active"),o(".dptt.desativado").removeClass("displaynone"),o(".desativado > .dn").removeClass("displaynone"),o(".dptt.revogado").removeClass("displaynone"),o(".dtxt").removeClass("displaynone"),o(".dtxt.diff").remove(),o(".nota-alteracao").removeClass("displaynone"),e&&o('.dtxt[id^="da"').each((function(){if(!(o(this).html().search(/<\/\w+>/g)>0)){var t=o(this).attr("pk"),e=o(this).attr("pks"),i=o("#d"+e).contents().filter((function(){return this.nodeType===Node.TEXT_NODE})),a=o("#da"+t).contents().filter((function(){return this.nodeType===Node.TEXT_NODE})),s=n.diffWordsWithSpace(o(i).text(),o(a).text());if(s.length>0){o("#d"+e).closest(".desativado").addClass("displaynone");var r=o("#da"+t).clone();o("#da"+t).after(r),o("#da"+t).addClass("displaynone"),o(r).addClass("diff").html(""),s.forEach((function(t){var e=document.createElement("span"),i=t.value;t.removed?(o(e).addClass("desativado"),i+=" "):t.added&&o(e).addClass("added"),e.appendChild(document.createTextNode(i)),o(r).append(e)}))}}})),i)try{o("html, body").animate({scrollTop:o(i).parent().offset().top-60},0)}catch(t){}},textoVigente:s,textoVigenteSemRevogados:function(t,e){s(t,e),o(".dptt.revogado").addClass("displaynone")}}}).call(this,i("1157"))},aa48:function(t,e,i){"use strict";var o=window.$;function n(t,e){o("html, body").animate({scrollTop:o("#dne"+t).offset().top-window.innerHeight/5},300),window.refreshDatePicker(),o("#dne"+t+" #button-id-submit-form").click(a),o("#dne"+t+" .btn-close-container").click((function(){o(this).closest(".dne-nota").removeClass("dne-nota"),o(this).closest(".dne-form").html("")})),"nota"===e?o("#dne"+t+' select[name="tipo"]').change((function(e){var i;i="text/"+t+"/nota/create?action=modelo_nota&id_tipo="+this.value,o.get(i).done((function(e){o("#dne"+t+' textarea[name="texto"]').val(e)}))})):"vide"===e&&window.DispositivoSearch({url_form:"/ta/search_form",text_button:"Definir Dispositivo"})}function a(t){var e,i="",a="nota",s=o("#id_dispositivo").val();void 0===s&&(s=o("#id_dispositivo_base").val(),a="vide"),e=o("#id_pk").val(),i="text/"+s+"/"+a+"/",i+=null===e||""===e?"create":e+"/edit",o.post(i,o("#dne"+s+" form").serialize(),(function(t){if("string"==typeof t)if(t.indexOf("<form")>=0)o("#dne"+s+" .dne-form").html(t),n(s,a);else{o("#dne"+s+" .dne-form").closest(".dpt").html(t),r();try{o("html, body").animate({scrollTop:o("#dne"+s).offset().top-window.innerHeight/3},300)}catch(t){}}}))}function s(t){var e=o(t).attr("model"),i=o(t).closest(".dn").attr("pk"),n=o(t).attr("pk"),a="text/"+i+"/"+e+"/"+n+"/delete";o.get(a,(function(t){o("#dne"+i+" .dne-form").closest(".dpt").html(t),r()}))}function r(){o(".dne-nota").removeClass("dne-nota"),o(".dne-form").html(""),o(".dne .btn-action").off(),o(".dn .btn-action").off(),o(".dne .btn-action, .dn .btn-action").not(".btn-nota-delete").not(".btn-vide-delete").click((function(){!function(t){var e="",i=o(t).attr("model"),a=o(".dne-nota .dne-form").closest(".dne").attr("pk");if(null!=a&&(o("#dne"+a).removeClass("dne-nota"),o("#dne"+a+" .dne-form").html("")),t.className.indexOf("create")>=0)e="text/"+(a=o(t).attr("pk"))+"/"+i+"/create";else if(t.className.indexOf("edit")>=0){var s=o(t).attr("pk");e="text/"+(a=o(t).closest(".dn").attr("pk"))+"/"+i+"/"+s+"/edit"}o("#dne"+a).addClass("dne-nota"),o.get(e).done((function(t){o("#dne"+a+" .dne-form").html(t),n(a,i)})).fail((function(){r()}))}(this)})),o(".dn .btn-nota-delete, .dn .btn-vide-delete").click((function(){s(this)}))}e.a={onEventsDneExec:n,onSubmitEditNVForm:a,onDelete:s,onReadyNotasVides:r}}});