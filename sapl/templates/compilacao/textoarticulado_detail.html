{% extends "compilacao/base_compilacao.html" %}
{% load i18n %}
{% load compilacao_filters %}
{% load common_tags %}
{% load static %}
{% load webpack_static from webpack_loader %}

{% if object.content_object and object.content_object|model_name == 'norma.NormaJuridica' and not object.content_object|has_perm_change_instance:perms  %}
 
  {% block base_container_header %}
    <div class="pt-3 d-flex justify-content-around align-items-center">
      <div>
        <img height="100"
            src="{% if logotipo %}{{ MEDIA_URL }}{{ logotipo }}{% else %}{% webpack_static 'img/logo.png' %}{% endif %}"
            alt="Logotipo"
            class="img-responsive visible-lg-inline-block vcenter">
      </div>
      <div class="control-label">
        <h1 class="">
          {% if nome %}
            <b>{{ nome }}</b>
          {% else %}
            <b>{% trans 'Sem Nome Cadastrado' %}</b>
          {% endif %}
        </h1>
        <h2 class="text-center">
          Poder Legislativo
        </h2>
      </div>
    </div>
    <div class="row">
      <div class="col pt-3">
        <h2 class="text-center">
          <strong>
            {{object.content_object}}
          </strong>
        </h2>
      </div>
    </div>
  {% endblock base_container_header %}
{% endif %}

{% block sections_nav %}
  {% include 'compilacao/subnav.html'%}
{% endblock %}

{% block base_content %}
  
  {% block actions %}
    <div class="context-actions justify-content-between mb-4">
      <div class="actions btn-group" role="group">
        {% if perms.compilacao.change_textoarticulado and object|can_use_dynamic_editing:user %}
          <a href="{% url 'sapl.compilacao:ta_edit' object.pk %}" class="btn btn-outline-primary">{% trans 'Editar Metadados do Texto Articulado' %}</a>
        {% endif %}
        {% if object|can_use_dynamic_editing:user %}
          <a href="{% url 'sapl.compilacao:ta_text_edit' object.pk %}" class="btn btn-outline-primary">{% trans 'Editar Texto' %}</a>
        {% endif %}
        {% if perms.compilacao.lock_unlock_textoarticulado and not object.editable_only_by_owners%}
          <a href="{% url 'sapl.compilacao:ta_text_edit' object.pk %}?{% if object.editing_locked %}unlock{%else%}lock{% endif %}" class="btn {% if object.editing_locked %}btn-danger{%else%}btn-outline-primary{% endif %}">{% if object.editing_locked %}{% trans 'Desbloquear Edição' %}{%else%}{% trans 'Publicar Texto' %}{% endif %}</a>
        {% endif %}
      </div>
    </div>
  {% endblock actions %}

  {% block detail_content %}

    {% if object.content_object and object.content_object|model_name == 'norma.NormaJuridica'  and not object.content_object|has_perm_change_instance:perms  %}
    
    {% else %}
      <fieldset class="hidden-print">
          <legend>{%trans 'Identificação Básica'%}</legend>
          <div class="row">
            <div class="col-md-3">
              <div id="div_id_tipo" class="holder">
                <label>{% field_verbose_name object 'tipo_ta' %}</label>
                <p>{{ object.tipo_ta}}</p>
              </div>
            </div>

            {% if object.content_object and object.content_object.tipo %}
              <div class="col-md-3">
                <div id="div_id_tipo" class="holder">
                  <label>{% field_verbose_name object.content_object 'tipo' %}</label>
                  <p>{{ object.content_object.tipo}}</p>
                </div>
              </div>
            {% endif %}

            <div class="col-md-2">
              <div id="div_id_numero" class="holder">
                <label>{% field_verbose_name object 'numero' %}</label>
                <p>{{ object.numero}}</p>
              </div>
            </div>

            <div class="col-md-2">
              <div id="div_id_ano" class="holder">
                <label>{% field_verbose_name object 'ano' %}</label>
                <p>{{ object.ano}}</p>
              </div>
            </div>

            <div class="col-md-2">
              <div id="div_id_data" class="holder">
                <label>{% field_verbose_name object 'data' %}</label>
                <p>{{ object.data}}</p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div id="div_id_ementa" class="holder">
                <label>{% field_verbose_name object 'ementa' %}</label>
                <p>{{ object.ementa|safe}}</p>
              </div>
            </div>
          </div>
      </fieldset>
    {% endif %}

  {% endblock detail_content %}
{% endblock base_content %}
